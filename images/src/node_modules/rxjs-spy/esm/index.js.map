{"version":3,"file":"index.js","sources":["../../source/detect.ts","../../source/logger.ts","../../source/identify.ts","../../source/subscription-ref.ts","../../source/util.ts","../../source/match.ts","../../source/plugin/plugin.ts","../../node_modules/stackframe/stackframe.js","../../node_modules/error-stack-parser/error-stack-parser.js","../../node_modules/stacktrace-gps/node_modules/source-map/lib/util.js","../../node_modules/stacktrace-gps/node_modules/source-map/lib/binary-search.js","../../node_modules/stacktrace-gps/node_modules/source-map/lib/array-set.js","../../node_modules/stacktrace-gps/node_modules/source-map/lib/base64.js","../../node_modules/stacktrace-gps/node_modules/source-map/lib/base64-vlq.js","../../node_modules/stacktrace-gps/node_modules/source-map/lib/quick-sort.js","../../node_modules/stacktrace-gps/node_modules/source-map/lib/source-map-consumer.js","../../node_modules/stacktrace-gps/stacktrace-gps.js","../../source/operators/hide.ts","../../source/operators/tag.ts","../../source/plugin/stack-trace-plugin.ts","../../source/plugin/cycle-plugin.ts","../../source/plugin/debug-plugin.ts","../../source/plugin/graph-plugin.ts","../../source/plugin/let-plugin.ts","../../source/plugin/log-plugin.ts","../../source/plugin/pause-plugin.ts","../../source/plugin/snapshot-plugin.ts","../../source/plugin/stats-plugin.ts","../../source/auditor.ts","../../source/detector.ts","../../source/hidden.ts","../../source/spy-console.ts","../../source/spy-core.ts","../../source/spy-factory.ts","../../source/index.ts"],"sourcesContent":["/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nexport type Hook = (id: string) => void;\n\nconst noop_: Hook = () => {};\nlet hook_: Hook = noop_;\n\nexport function detect(id: string): void {\n\n    hook_(id);\n}\n\nexport function hook(hook: Hook | undefined): void {\n\n    hook_ = hook || noop_;\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n/*tslint:disable:no-console no-invalid-this*/\n\nexport interface PartialLogger {\n    readonly error?: (message?: any, ...args: any[]) => void;\n    readonly group?: (title?: string) => void;\n    readonly groupCollapsed?: (title?: string) => void;\n    readonly groupEnd?: () => void;\n    readonly log: (message?: any, ...args: any[]) => void;\n    readonly warn?: (message?: any, ...args: any[]) => void;\n}\n\nexport interface Logger extends PartialLogger {\n    readonly error: (message?: any, ...args: any[]) => void;\n    readonly group: (title?: string) => void;\n    readonly groupCollapsed: (title?: string) => void;\n    readonly groupEnd: () => void;\n    readonly log: (message?: any, ...args: any[]) => void;\n    readonly warn: (message?: any, ...args: any[]) => void;\n}\n\nexport const defaultLogger = console;\n\nexport function toLogger(partialLogger: PartialLogger): Logger {\n\n    if (partialLogger.error &&\n        partialLogger.group &&\n        partialLogger.groupCollapsed &&\n        partialLogger.groupEnd &&\n        partialLogger.warn) {\n\n        return partialLogger as Logger;\n    }\n\n    const spaces = 2;\n    let indent = 0;\n\n    return {\n\n        error(message?: any, ...args: any[]): void {\n\n            call(\"error\", message, ...args);\n        },\n\n        group(title?: string): void {\n\n            call(\"log\", title);\n            indent += spaces;\n        },\n\n        groupCollapsed(title?: string): void {\n\n            call(\"log\", title);\n            indent += spaces;\n        },\n\n        groupEnd(): void {\n\n            indent = Math.max(0, indent - spaces);\n        },\n\n        log(message?: any, ...args: any[]): void {\n\n            call(\"log\", message, ...args);\n        },\n\n        warn(message?: any, ...args: any[]): void {\n\n            call(\"warn\", message, ...args);\n        }\n    };\n\n    function call(method: string, message?: any, ...args: any[]): void {\n\n        const padding = \" \".repeat(indent);\n        if (message) {\n            message = padding + message;\n        } else {\n            message = padding;\n        }\n        (partialLogger[method] || partialLogger.log).call(partialLogger, message, ...args);\n    }\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nconst idSymbol = Symbol(\"id\");\nlet lastId = 0;\n\nexport function identify(instance: object): string {\n    const id = instance[idSymbol] = instance[idSymbol] || (++lastId).toString();\n    return id;\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nimport { Observable, Subscriber, Subscription } from \"rxjs\";\n\nexport interface SubscriberRef {\n    observable: Observable<any>;\n    subscriber: Subscriber<any>;\n    timestamp: number;\n    unsubscribed: boolean;\n}\n\nexport interface SubscriptionRef extends SubscriberRef {\n    subscription: Subscription;\n}\n\nexport function isSubscriptionRef(subscriberRef: SubscriberRef): subscriberRef is SubscriptionRef {\n    return subscriberRef && subscriberRef[\"subscription\"];\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nimport { Observable, PartialObserver, Subscriber } from \"rxjs\";\n\nexport function inferPath(observable: Observable<any>): string {\n\n    const { source } = observable as any;\n\n    if (source) {\n        return `${inferPath(source)}/${inferType(observable)}`;\n    }\n    return `/${inferType(observable)}`;\n}\n\nexport function inferType(observable: Observable<any>): string {\n\n    const { operator } = observable as any;\n\n    const prototype = Object.getPrototypeOf(operator ? operator : observable);\n    if (prototype.constructor && prototype.constructor.name) {\n        let { name } = prototype.constructor;\n        name = `${name.charAt(0).toLowerCase()}${name.substring(1)}`;\n        return name.replace(/^(\\w+)(Observable|Operator)$/, (match: string, p: string) => p);\n    }\n    return \"unknown\";\n}\n\nexport function isObservable(arg: any): arg is Observable<any> {\n\n    return arg && arg.subscribe;\n}\n\n// This is included because - although there is an \"rxjs/Observer.js\" in the\n// RxJS NPM distribution - there is no \"Rx.Observer\" (and, therefore, no\n// \"Rx.Observer.empty\") in the bundle:\n\nconst empty = {\n    closed: true,\n    error(error: any): void { throw error; },\n    next(value: any): void {},\n    complete(): void {}\n};\nconst SubscriberSymbol = Symbol.for(\"rxSubscriber\");\n\n// https://github.com/ReactiveX/rxjs/blob/master/src/util/toSubscriber.ts\n//\n// toSubscriber is not part of the RxJS bundle's public API, so if it were to\n// be imported using a Rollup CommonJS plugin, it would need to be included in\n// the spy's bundle - but the other RxJS modules should not be included. This\n// seems too complicated, for the moment.\n\nexport function toSubscriber<T>(\n    nextOrObserver?: PartialObserver<T> | ((value: T) => void),\n    error?: (error: any) => void,\n    complete?: () => void\n): Subscriber<T> {\n\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber) {\n            return nextOrObserver as Subscriber<T>;\n        }\n        if (nextOrObserver[SubscriberSymbol]) {\n            return nextOrObserver[SubscriberSymbol]();\n        }\n    }\n\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber(empty);\n    }\n    return new Subscriber(nextOrObserver, error, complete);\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nimport { Observable, Subscriber, Subscription } from \"rxjs\";\nimport { identify } from \"./identify\";\nimport { isSubscriptionRef, SubscriberRef } from \"./subscription-ref\";\nimport { isObservable } from \"./util\";\n\nexport type MatchPredicate = (value: string | undefined, observable?: Observable<any>) => boolean;\nexport type Match = Observable<any> | string | RegExp | MatchPredicate;\n\nexport function matches<T>(observable: Observable<T>, match: Match, value?: string): boolean;\nexport function matches<T>(observable: Observable<T>, match: Match): boolean;\nexport function matches(subscriberRef: SubscriberRef, match: Match, value?: string): boolean;\nexport function matches(subscriberRef: SubscriberRef, match: Match): boolean;\nexport function matches<T>(arg: Observable<T> | SubscriberRef, match: Match, value?: string): boolean {\n\n    let observable: Observable<T>;\n    let subscriber: Subscriber<T> | undefined = undefined;\n    let subscription: Subscription | undefined = undefined;\n\n    if (isObservable(arg)) {\n        observable = arg;\n    } else {\n        observable = arg.observable;\n        subscriber = arg.subscriber;\n        subscription = isSubscriptionRef(arg) ? arg.subscription : undefined;\n    }\n\n    if (isObservable(match)) {\n        return observable === match;\n    }\n\n    const observableId = identify(observable);\n    const subscriberId = subscriber ? identify(subscriber) : undefined;\n    const subscriptionId = subscription ? identify(subscription) : undefined;\n    const tag = value || read(observable);\n\n    if (typeof match === \"function\") {\n        return match(tag, observable);\n    }\n    if (typeof match === \"string\") {\n        return (match === observableId) || (match === subscriberId) || (match === subscriptionId) || (match === tag);\n    }\n    if (tag === undefined) {\n        return false;\n    }\n    return match.test(tag);\n}\n\nexport function read<T>(observable: Observable<T>): string | undefined {\n\n    const operator = observable[\"operator\"];\n    if (!operator) {\n        return undefined;\n    }\n\n    const tag = operator[\"tag\"];\n    if (!tag) {\n        return undefined;\n    }\n    return tag;\n}\n\nexport function toString(match: Match): string {\n\n    if (isObservable(match)) {\n        return \"[Observable]\";\n    } else if (typeof match === \"function\") {\n        return \"[Function]\";\n    }\n    return match.toString();\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nimport { Observable } from \"rxjs\";\nimport { SubscriberRef, SubscriptionRef } from \"../subscription-ref\";\n\nexport type Notification = \"complete\" | \"error\" | \"next\" | \"subscribe\" | \"unsubscribe\";\n\nexport interface Plugin {\n\n    readonly name: string;\n\n    afterComplete(ref: SubscriptionRef): void;\n    afterError(ref: SubscriptionRef, error: any): void;\n    afterNext(ref: SubscriptionRef, value: any): void;\n    afterSubscribe(ref: SubscriptionRef): void;\n    afterUnsubscribe(ref: SubscriptionRef): void;\n    beforeComplete(ref: SubscriptionRef): void;\n    beforeError(ref: SubscriptionRef, error: any): void;\n    beforeNext(ref: SubscriptionRef, value: any): void;\n    beforeSubscribe(ref: SubscriberRef): void;\n    beforeUnsubscribe(ref: SubscriptionRef): void;\n    flush(): void;\n    select(ref: SubscriptionRef): ((source: Observable<any>) => Observable<any>) | undefined;\n    teardown(): void;\n}\n\nexport class BasePlugin implements Plugin {\n\n    constructor(public readonly name: string) {}\n\n    afterComplete(ref: SubscriptionRef): void {}\n    afterError(ref: SubscriptionRef, error: any): void {}\n    afterNext(ref: SubscriptionRef, value: any): void {}\n    afterSubscribe(ref: SubscriptionRef): void {}\n    afterUnsubscribe(ref: SubscriptionRef): void {}\n    beforeComplete(ref: SubscriptionRef): void {}\n    beforeError(ref: SubscriptionRef, error: any): void {}\n    beforeNext(ref: SubscriptionRef, value: any): void {}\n    beforeSubscribe(ref: SubscriberRef): void {}\n    beforeUnsubscribe(ref: SubscriptionRef): void {}\n    flush(): void {}\n    select(ref: SubscriptionRef): ((source: Observable<any>) => Observable<any>) | undefined { return undefined; }\n    teardown(): void {}\n}\n","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('stackframe', [], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.StackFrame = factory();\n    }\n}(this, function() {\n    'use strict';\n    function _isNumber(n) {\n        return !isNaN(parseFloat(n)) && isFinite(n);\n    }\n\n    function _capitalize(str) {\n        return str.charAt(0).toUpperCase() + str.substring(1);\n    }\n\n    function _getter(p) {\n        return function() {\n            return this[p];\n        };\n    }\n\n    var booleanProps = ['isConstructor', 'isEval', 'isNative', 'isToplevel'];\n    var numericProps = ['columnNumber', 'lineNumber'];\n    var stringProps = ['fileName', 'functionName', 'source'];\n    var arrayProps = ['args'];\n    var objectProps = ['evalOrigin'];\n\n    var props = booleanProps.concat(numericProps, stringProps, arrayProps, objectProps);\n\n    function StackFrame(obj) {\n        if (!obj) return;\n        for (var i = 0; i < props.length; i++) {\n            if (obj[props[i]] !== undefined) {\n                this['set' + _capitalize(props[i])](obj[props[i]]);\n            }\n        }\n    }\n\n    StackFrame.prototype = {\n        getArgs: function() {\n            return this.args;\n        },\n        setArgs: function(v) {\n            if (Object.prototype.toString.call(v) !== '[object Array]') {\n                throw new TypeError('Args must be an Array');\n            }\n            this.args = v;\n        },\n\n        getEvalOrigin: function() {\n            return this.evalOrigin;\n        },\n        setEvalOrigin: function(v) {\n            if (v instanceof StackFrame) {\n                this.evalOrigin = v;\n            } else if (v instanceof Object) {\n                this.evalOrigin = new StackFrame(v);\n            } else {\n                throw new TypeError('Eval Origin must be an Object or StackFrame');\n            }\n        },\n\n        toString: function() {\n            var fileName = this.getFileName() || '';\n            var lineNumber = this.getLineNumber() || '';\n            var columnNumber = this.getColumnNumber() || '';\n            var functionName = this.getFunctionName() || '';\n            if (this.getIsEval()) {\n                if (fileName) {\n                    return '[eval] (' + fileName + ':' + lineNumber + ':' + columnNumber + ')';\n                }\n                return '[eval]:' + lineNumber + ':' + columnNumber;\n            }\n            if (functionName) {\n                return functionName + ' (' + fileName + ':' + lineNumber + ':' + columnNumber + ')';\n            }\n            return fileName + ':' + lineNumber + ':' + columnNumber;\n        }\n    };\n\n    StackFrame.fromString = function StackFrame$$fromString(str) {\n        var argsStartIndex = str.indexOf('(');\n        var argsEndIndex = str.lastIndexOf(')');\n\n        var functionName = str.substring(0, argsStartIndex);\n        var args = str.substring(argsStartIndex + 1, argsEndIndex).split(',');\n        var locationString = str.substring(argsEndIndex + 1);\n\n        if (locationString.indexOf('@') === 0) {\n            var parts = /@(.+?)(?::(\\d+))?(?::(\\d+))?$/.exec(locationString, '');\n            var fileName = parts[1];\n            var lineNumber = parts[2];\n            var columnNumber = parts[3];\n        }\n\n        return new StackFrame({\n            functionName: functionName,\n            args: args || undefined,\n            fileName: fileName,\n            lineNumber: lineNumber || undefined,\n            columnNumber: columnNumber || undefined\n        });\n    };\n\n    for (var i = 0; i < booleanProps.length; i++) {\n        StackFrame.prototype['get' + _capitalize(booleanProps[i])] = _getter(booleanProps[i]);\n        StackFrame.prototype['set' + _capitalize(booleanProps[i])] = (function(p) {\n            return function(v) {\n                this[p] = Boolean(v);\n            };\n        })(booleanProps[i]);\n    }\n\n    for (var j = 0; j < numericProps.length; j++) {\n        StackFrame.prototype['get' + _capitalize(numericProps[j])] = _getter(numericProps[j]);\n        StackFrame.prototype['set' + _capitalize(numericProps[j])] = (function(p) {\n            return function(v) {\n                if (!_isNumber(v)) {\n                    throw new TypeError(p + ' must be a Number');\n                }\n                this[p] = Number(v);\n            };\n        })(numericProps[j]);\n    }\n\n    for (var k = 0; k < stringProps.length; k++) {\n        StackFrame.prototype['get' + _capitalize(stringProps[k])] = _getter(stringProps[k]);\n        StackFrame.prototype['set' + _capitalize(stringProps[k])] = (function(p) {\n            return function(v) {\n                this[p] = String(v);\n            };\n        })(stringProps[k]);\n    }\n\n    return StackFrame;\n}));\n","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('error-stack-parser', ['stackframe'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('stackframe'));\n    } else {\n        root.ErrorStackParser = factory(root.StackFrame);\n    }\n}(this, function ErrorStackParser(StackFrame) {\n    'use strict';\n\n    var FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+:\\d+/;\n    var CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+:\\d+|\\(native\\))/m;\n    var SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code])?$/;\n\n    return {\n        /**\n         * Given an Error object, extract the most information from it.\n         *\n         * @param {Error} error object\n         * @return {Array} of StackFrames\n         */\n        parse: function ErrorStackParser$$parse(error) {\n            if (typeof error.stacktrace !== 'undefined' || typeof error['opera#sourceloc'] !== 'undefined') {\n                return this.parseOpera(error);\n            } else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\n                return this.parseV8OrIE(error);\n            } else if (error.stack) {\n                return this.parseFFOrSafari(error);\n            } else {\n                throw new Error('Cannot parse given Error object');\n            }\n        },\n\n        // Separate line and column numbers from a string of the form: (URI:Line:Column)\n        extractLocation: function ErrorStackParser$$extractLocation(urlLike) {\n            // Fail-fast but return locations like \"(native)\"\n            if (urlLike.indexOf(':') === -1) {\n                return [urlLike];\n            }\n\n            var regExp = /(.+?)(?::(\\d+))?(?::(\\d+))?$/;\n            var parts = regExp.exec(urlLike.replace(/[()]/g, ''));\n            return [parts[1], parts[2] || undefined, parts[3] || undefined];\n        },\n\n        parseV8OrIE: function ErrorStackParser$$parseV8OrIE(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(CHROME_IE_STACK_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                if (line.indexOf('(eval ') > -1) {\n                    // Throw away eval information until we implement stacktrace.js/stackframe#8\n                    line = line.replace(/eval code/g, 'eval').replace(/(\\(eval at [^()]*)|(\\),.*$)/g, '');\n                }\n                var sanitizedLine = line.replace(/^\\s+/, '').replace(/\\(eval code/g, '(');\n\n                // capture and preseve the parenthesized location \"(/foo/my bar.js:12:87)\" in\n                // case it has spaces in it, as the string is split on \\s+ later on\n                var location = sanitizedLine.match(/ (\\((.+):(\\d+):(\\d+)\\)$)/);\n\n                // remove the parenthesized location from the line, if it was matched\n                sanitizedLine = location ? sanitizedLine.replace(location[0], '') : sanitizedLine;\n\n                var tokens = sanitizedLine.split(/\\s+/).slice(1);\n                // if a location was matched, pass it to extractLocation() otherwise pop the last token\n                var locationParts = this.extractLocation(location ? location[1] : tokens.pop());\n                var functionName = tokens.join(' ') || undefined;\n                var fileName = ['eval', '<anonymous>'].indexOf(locationParts[0]) > -1 ? undefined : locationParts[0];\n\n                return new StackFrame({\n                    functionName: functionName,\n                    fileName: fileName,\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        },\n\n        parseFFOrSafari: function ErrorStackParser$$parseFFOrSafari(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !line.match(SAFARI_NATIVE_CODE_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                // Throw away eval information until we implement stacktrace.js/stackframe#8\n                if (line.indexOf(' > eval') > -1) {\n                    line = line.replace(/ line (\\d+)(?: > eval line \\d+)* > eval:\\d+:\\d+/g, ':$1');\n                }\n\n                if (line.indexOf('@') === -1 && line.indexOf(':') === -1) {\n                    // Safari eval frames only have function names and nothing else\n                    return new StackFrame({\n                        functionName: line\n                    });\n                } else {\n                    var functionNameRegex = /((.*\".+\"[^@]*)?[^@]*)(?:@)/;\n                    var matches = line.match(functionNameRegex);\n                    var functionName = matches && matches[1] ? matches[1] : undefined;\n                    var locationParts = this.extractLocation(line.replace(functionNameRegex, ''));\n\n                    return new StackFrame({\n                        functionName: functionName,\n                        fileName: locationParts[0],\n                        lineNumber: locationParts[1],\n                        columnNumber: locationParts[2],\n                        source: line\n                    });\n                }\n            }, this);\n        },\n\n        parseOpera: function ErrorStackParser$$parseOpera(e) {\n            if (!e.stacktrace || (e.message.indexOf('\\n') > -1 &&\n                e.message.split('\\n').length > e.stacktrace.split('\\n').length)) {\n                return this.parseOpera9(e);\n            } else if (!e.stack) {\n                return this.parseOpera10(e);\n            } else {\n                return this.parseOpera11(e);\n            }\n        },\n\n        parseOpera9: function ErrorStackParser$$parseOpera9(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\n            var lines = e.message.split('\\n');\n            var result = [];\n\n            for (var i = 2, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(new StackFrame({\n                        fileName: match[2],\n                        lineNumber: match[1],\n                        source: lines[i]\n                    }));\n                }\n            }\n\n            return result;\n        },\n\n        parseOpera10: function ErrorStackParser$$parseOpera10(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\n            var lines = e.stacktrace.split('\\n');\n            var result = [];\n\n            for (var i = 0, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(\n                        new StackFrame({\n                            functionName: match[3] || undefined,\n                            fileName: match[2],\n                            lineNumber: match[1],\n                            source: lines[i]\n                        })\n                    );\n                }\n            }\n\n            return result;\n        },\n\n        // Opera 10.65+ Error.stack very similar to FF/Safari\n        parseOpera11: function ErrorStackParser$$parseOpera11(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(FIREFOX_SAFARI_STACK_REGEXP) && !line.match(/^Error created at/);\n            }, this);\n\n            return filtered.map(function(line) {\n                var tokens = line.split('@');\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionCall = (tokens.shift() || '');\n                var functionName = functionCall\n                    .replace(/<anonymous function(: (\\w+))?>/, '$2')\n                    .replace(/\\([^)]*\\)/g, '') || undefined;\n                var argsRaw;\n                if (functionCall.match(/\\(([^)]*)\\)/)) {\n                    argsRaw = functionCall.replace(/^[^(]+\\(([^)]*)\\)$/, '$1');\n                }\n                var args = (argsRaw === undefined || argsRaw === '[arguments not available]') ?\n                    undefined : argsRaw.split(',');\n\n                return new StackFrame({\n                    functionName: functionName,\n                    args: args,\n                    fileName: locationParts[0],\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        }\n    };\n}));\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n/**\n * This is a helper function for getting values from parameter/options\n * objects.\n *\n * @param args The object we are extracting values from\n * @param name The name of the property we are getting.\n * @param defaultValue An optional value to return if the property is missing\n * from the object. If this is not specified and the property is missing, an\n * error will be thrown.\n */\nfunction getArg(aArgs, aName, aDefaultValue) {\n  if (aName in aArgs) {\n    return aArgs[aName];\n  } else if (arguments.length === 3) {\n    return aDefaultValue;\n  } else {\n    throw new Error('\"' + aName + '\" is a required argument.');\n  }\n}\nexports.getArg = getArg;\n\nvar urlRegexp = /^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.]*)(?::(\\d+))?(\\S*)$/;\nvar dataUrlRegexp = /^data:.+\\,.+$/;\n\nfunction urlParse(aUrl) {\n  var match = aUrl.match(urlRegexp);\n  if (!match) {\n    return null;\n  }\n  return {\n    scheme: match[1],\n    auth: match[2],\n    host: match[3],\n    port: match[4],\n    path: match[5]\n  };\n}\nexports.urlParse = urlParse;\n\nfunction urlGenerate(aParsedUrl) {\n  var url = '';\n  if (aParsedUrl.scheme) {\n    url += aParsedUrl.scheme + ':';\n  }\n  url += '//';\n  if (aParsedUrl.auth) {\n    url += aParsedUrl.auth + '@';\n  }\n  if (aParsedUrl.host) {\n    url += aParsedUrl.host;\n  }\n  if (aParsedUrl.port) {\n    url += \":\" + aParsedUrl.port\n  }\n  if (aParsedUrl.path) {\n    url += aParsedUrl.path;\n  }\n  return url;\n}\nexports.urlGenerate = urlGenerate;\n\n/**\n * Normalizes a path, or the path portion of a URL:\n *\n * - Replaces consecutive slashes with one slash.\n * - Removes unnecessary '.' parts.\n * - Removes unnecessary '<dir>/..' parts.\n *\n * Based on code in the Node.js 'path' core module.\n *\n * @param aPath The path or url to normalize.\n */\nfunction normalize(aPath) {\n  var path = aPath;\n  var url = urlParse(aPath);\n  if (url) {\n    if (!url.path) {\n      return aPath;\n    }\n    path = url.path;\n  }\n  var isAbsolute = exports.isAbsolute(path);\n\n  var parts = path.split(/\\/+/);\n  for (var part, up = 0, i = parts.length - 1; i >= 0; i--) {\n    part = parts[i];\n    if (part === '.') {\n      parts.splice(i, 1);\n    } else if (part === '..') {\n      up++;\n    } else if (up > 0) {\n      if (part === '') {\n        // The first part is blank if the path is absolute. Trying to go\n        // above the root is a no-op. Therefore we can remove all '..' parts\n        // directly after the root.\n        parts.splice(i + 1, up);\n        up = 0;\n      } else {\n        parts.splice(i, 2);\n        up--;\n      }\n    }\n  }\n  path = parts.join('/');\n\n  if (path === '') {\n    path = isAbsolute ? '/' : '.';\n  }\n\n  if (url) {\n    url.path = path;\n    return urlGenerate(url);\n  }\n  return path;\n}\nexports.normalize = normalize;\n\n/**\n * Joins two paths/URLs.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be joined with the root.\n *\n * - If aPath is a URL or a data URI, aPath is returned, unless aPath is a\n *   scheme-relative URL: Then the scheme of aRoot, if any, is prepended\n *   first.\n * - Otherwise aPath is a path. If aRoot is a URL, then its path portion\n *   is updated with the result and aRoot is returned. Otherwise the result\n *   is returned.\n *   - If aPath is absolute, the result is aPath.\n *   - Otherwise the two paths are joined with a slash.\n * - Joining for example 'http://' and 'www.example.com' is also supported.\n */\nfunction join(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n  if (aPath === \"\") {\n    aPath = \".\";\n  }\n  var aPathUrl = urlParse(aPath);\n  var aRootUrl = urlParse(aRoot);\n  if (aRootUrl) {\n    aRoot = aRootUrl.path || '/';\n  }\n\n  // `join(foo, '//www.example.org')`\n  if (aPathUrl && !aPathUrl.scheme) {\n    if (aRootUrl) {\n      aPathUrl.scheme = aRootUrl.scheme;\n    }\n    return urlGenerate(aPathUrl);\n  }\n\n  if (aPathUrl || aPath.match(dataUrlRegexp)) {\n    return aPath;\n  }\n\n  // `join('http://', 'www.example.com')`\n  if (aRootUrl && !aRootUrl.host && !aRootUrl.path) {\n    aRootUrl.host = aPath;\n    return urlGenerate(aRootUrl);\n  }\n\n  var joined = aPath.charAt(0) === '/'\n    ? aPath\n    : normalize(aRoot.replace(/\\/+$/, '') + '/' + aPath);\n\n  if (aRootUrl) {\n    aRootUrl.path = joined;\n    return urlGenerate(aRootUrl);\n  }\n  return joined;\n}\nexports.join = join;\n\nexports.isAbsolute = function (aPath) {\n  return aPath.charAt(0) === '/' || !!aPath.match(urlRegexp);\n};\n\n/**\n * Make a path relative to a URL or another path.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be made relative to aRoot.\n */\nfunction relative(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n\n  aRoot = aRoot.replace(/\\/$/, '');\n\n  // It is possible for the path to be above the root. In this case, simply\n  // checking whether the root is a prefix of the path won't work. Instead, we\n  // need to remove components from the root one by one, until either we find\n  // a prefix that fits, or we run out of components to remove.\n  var level = 0;\n  while (aPath.indexOf(aRoot + '/') !== 0) {\n    var index = aRoot.lastIndexOf(\"/\");\n    if (index < 0) {\n      return aPath;\n    }\n\n    // If the only part of the root that is left is the scheme (i.e. http://,\n    // file:///, etc.), one or more slashes (/), or simply nothing at all, we\n    // have exhausted all components, so the path is not relative to the root.\n    aRoot = aRoot.slice(0, index);\n    if (aRoot.match(/^([^\\/]+:\\/)?\\/*$/)) {\n      return aPath;\n    }\n\n    ++level;\n  }\n\n  // Make sure we add a \"../\" for each component we removed from the root.\n  return Array(level + 1).join(\"../\") + aPath.substr(aRoot.length + 1);\n}\nexports.relative = relative;\n\nvar supportsNullProto = (function () {\n  var obj = Object.create(null);\n  return !('__proto__' in obj);\n}());\n\nfunction identity (s) {\n  return s;\n}\n\n/**\n * Because behavior goes wacky when you set `__proto__` on objects, we\n * have to prefix all the strings in our set with an arbitrary character.\n *\n * See https://github.com/mozilla/source-map/pull/31 and\n * https://github.com/mozilla/source-map/issues/30\n *\n * @param String aStr\n */\nfunction toSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return '$' + aStr;\n  }\n\n  return aStr;\n}\nexports.toSetString = supportsNullProto ? identity : toSetString;\n\nfunction fromSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return aStr.slice(1);\n  }\n\n  return aStr;\n}\nexports.fromSetString = supportsNullProto ? identity : fromSetString;\n\nfunction isProtoString(s) {\n  if (!s) {\n    return false;\n  }\n\n  var length = s.length;\n\n  if (length < 9 /* \"__proto__\".length */) {\n    return false;\n  }\n\n  if (s.charCodeAt(length - 1) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 2) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 3) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 4) !== 116 /* 't' */ ||\n      s.charCodeAt(length - 5) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 6) !== 114 /* 'r' */ ||\n      s.charCodeAt(length - 7) !== 112 /* 'p' */ ||\n      s.charCodeAt(length - 8) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 9) !== 95  /* '_' */) {\n    return false;\n  }\n\n  for (var i = length - 10; i >= 0; i--) {\n    if (s.charCodeAt(i) !== 36 /* '$' */) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Comparator between two mappings where the original positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same original source/line/column, but different generated\n * line and column the same. Useful when searching for a mapping with a\n * stubbed out mapping.\n */\nfunction compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {\n  var cmp = mappingA.source - mappingB.source;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0 || onlyCompareOriginal) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return mappingA.name - mappingB.name;\n}\nexports.compareByOriginalPositions = compareByOriginalPositions;\n\n/**\n * Comparator between two mappings with deflated source and name indices where\n * the generated positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same generated line and column, but different\n * source/name/original line and column the same. Useful when searching for a\n * mapping with a stubbed out mapping.\n */\nfunction compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0 || onlyCompareGenerated) {\n    return cmp;\n  }\n\n  cmp = mappingA.source - mappingB.source;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return mappingA.name - mappingB.name;\n}\nexports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;\n\nfunction strcmp(aStr1, aStr2) {\n  if (aStr1 === aStr2) {\n    return 0;\n  }\n\n  if (aStr1 > aStr2) {\n    return 1;\n  }\n\n  return -1;\n}\n\n/**\n * Comparator between two mappings with inflated source and name strings where\n * the generated positions are compared.\n */\nfunction compareByGeneratedPositionsInflated(mappingA, mappingB) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nexports.GREATEST_LOWER_BOUND = 1;\nexports.LEAST_UPPER_BOUND = 2;\n\n/**\n * Recursive implementation of binary search.\n *\n * @param aLow Indices here and lower do not contain the needle.\n * @param aHigh Indices here and higher do not contain the needle.\n * @param aNeedle The element being searched for.\n * @param aHaystack The non-empty array being searched.\n * @param aCompare Function which takes two elements and returns -1, 0, or 1.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n */\nfunction recursiveSearch(aLow, aHigh, aNeedle, aHaystack, aCompare, aBias) {\n  // This function terminates when one of the following is true:\n  //\n  //   1. We find the exact element we are looking for.\n  //\n  //   2. We did not find the exact element, but we can return the index of\n  //      the next-closest element.\n  //\n  //   3. We did not find the exact element, and there is no next-closest\n  //      element than the one we are searching for, so we return -1.\n  var mid = Math.floor((aHigh - aLow) / 2) + aLow;\n  var cmp = aCompare(aNeedle, aHaystack[mid], true);\n  if (cmp === 0) {\n    // Found the element we are looking for.\n    return mid;\n  }\n  else if (cmp > 0) {\n    // Our needle is greater than aHaystack[mid].\n    if (aHigh - mid > 1) {\n      // The element is in the upper half.\n      return recursiveSearch(mid, aHigh, aNeedle, aHaystack, aCompare, aBias);\n    }\n\n    // The exact needle element was not found in this haystack. Determine if\n    // we are in termination case (3) or (2) and return the appropriate thing.\n    if (aBias == exports.LEAST_UPPER_BOUND) {\n      return aHigh < aHaystack.length ? aHigh : -1;\n    } else {\n      return mid;\n    }\n  }\n  else {\n    // Our needle is less than aHaystack[mid].\n    if (mid - aLow > 1) {\n      // The element is in the lower half.\n      return recursiveSearch(aLow, mid, aNeedle, aHaystack, aCompare, aBias);\n    }\n\n    // we are in termination case (3) or (2) and return the appropriate thing.\n    if (aBias == exports.LEAST_UPPER_BOUND) {\n      return mid;\n    } else {\n      return aLow < 0 ? -1 : aLow;\n    }\n  }\n}\n\n/**\n * This is an implementation of binary search which will always try and return\n * the index of the closest element if there is no exact hit. This is because\n * mappings between original and generated line/col pairs are single points,\n * and there is an implicit region between each of them, so a miss just means\n * that you aren't on the very start of a region.\n *\n * @param aNeedle The element you are looking for.\n * @param aHaystack The array that is being searched.\n * @param aCompare A function which takes the needle and an element in the\n *     array and returns -1, 0, or 1 depending on whether the needle is less\n *     than, equal to, or greater than the element, respectively.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'binarySearch.GREATEST_LOWER_BOUND'.\n */\nexports.search = function search(aNeedle, aHaystack, aCompare, aBias) {\n  if (aHaystack.length === 0) {\n    return -1;\n  }\n\n  var index = recursiveSearch(-1, aHaystack.length, aNeedle, aHaystack,\n                              aCompare, aBias || exports.GREATEST_LOWER_BOUND);\n  if (index < 0) {\n    return -1;\n  }\n\n  // We have found either the exact element, or the next-closest element than\n  // the one we are searching for. However, there may be more than one such\n  // element. Make sure we always return the smallest of these.\n  while (index - 1 >= 0) {\n    if (aCompare(aHaystack[index], aHaystack[index - 1], true) !== 0) {\n      break;\n    }\n    --index;\n  }\n\n  return index;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * A data structure which is a combination of an array and a set. Adding a new\n * member is O(1), testing for membership is O(1), and finding the index of an\n * element is O(1). Removing elements from the set is not supported. Only\n * strings are supported for membership.\n */\nfunction ArraySet() {\n  this._array = [];\n  this._set = Object.create(null);\n}\n\n/**\n * Static method for creating ArraySet instances from an existing array.\n */\nArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\n  var set = new ArraySet();\n  for (var i = 0, len = aArray.length; i < len; i++) {\n    set.add(aArray[i], aAllowDuplicates);\n  }\n  return set;\n};\n\n/**\n * Return how many unique items are in this ArraySet. If duplicates have been\n * added, than those do not count towards the size.\n *\n * @returns Number\n */\nArraySet.prototype.size = function ArraySet_size() {\n  return Object.getOwnPropertyNames(this._set).length;\n};\n\n/**\n * Add the given string to this set.\n *\n * @param String aStr\n */\nArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\n  var sStr = util.toSetString(aStr);\n  var isDuplicate = has.call(this._set, sStr);\n  var idx = this._array.length;\n  if (!isDuplicate || aAllowDuplicates) {\n    this._array.push(aStr);\n  }\n  if (!isDuplicate) {\n    this._set[sStr] = idx;\n  }\n};\n\n/**\n * Is the given string a member of this set?\n *\n * @param String aStr\n */\nArraySet.prototype.has = function ArraySet_has(aStr) {\n  var sStr = util.toSetString(aStr);\n  return has.call(this._set, sStr);\n};\n\n/**\n * What is the index of the given string in the array?\n *\n * @param String aStr\n */\nArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\n  var sStr = util.toSetString(aStr);\n  if (has.call(this._set, sStr)) {\n    return this._set[sStr];\n  }\n  throw new Error('\"' + aStr + '\" is not in the set.');\n};\n\n/**\n * What is the element at the given index?\n *\n * @param Number aIdx\n */\nArraySet.prototype.at = function ArraySet_at(aIdx) {\n  if (aIdx >= 0 && aIdx < this._array.length) {\n    return this._array[aIdx];\n  }\n  throw new Error('No element indexed by ' + aIdx);\n};\n\n/**\n * Returns the array representation of this set (which has the proper indices\n * indicated by indexOf). Note that this is a copy of the internal array used\n * for storing the members so that no one can mess with internal state.\n */\nArraySet.prototype.toArray = function ArraySet_toArray() {\n  return this._array.slice();\n};\n\nexports.ArraySet = ArraySet;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar intToCharMap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n\n/**\n * Encode an integer in the range of 0 to 63 to a single base 64 digit.\n */\nexports.encode = function (number) {\n  if (0 <= number && number < intToCharMap.length) {\n    return intToCharMap[number];\n  }\n  throw new TypeError(\"Must be between 0 and 63: \" + number);\n};\n\n/**\n * Decode a single base 64 character code digit to an integer. Returns -1 on\n * failure.\n */\nexports.decode = function (charCode) {\n  var bigA = 65;     // 'A'\n  var bigZ = 90;     // 'Z'\n\n  var littleA = 97;  // 'a'\n  var littleZ = 122; // 'z'\n\n  var zero = 48;     // '0'\n  var nine = 57;     // '9'\n\n  var plus = 43;     // '+'\n  var slash = 47;    // '/'\n\n  var littleOffset = 26;\n  var numberOffset = 52;\n\n  // 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ\n  if (bigA <= charCode && charCode <= bigZ) {\n    return (charCode - bigA);\n  }\n\n  // 26 - 51: abcdefghijklmnopqrstuvwxyz\n  if (littleA <= charCode && charCode <= littleZ) {\n    return (charCode - littleA + littleOffset);\n  }\n\n  // 52 - 61: 0123456789\n  if (zero <= charCode && charCode <= nine) {\n    return (charCode - zero + numberOffset);\n  }\n\n  // 62: +\n  if (charCode == plus) {\n    return 62;\n  }\n\n  // 63: /\n  if (charCode == slash) {\n    return 63;\n  }\n\n  // Invalid base64 digit.\n  return -1;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n *\n * Based on the Base 64 VLQ implementation in Closure Compiler:\n * https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\n *\n * Copyright 2011 The Closure Compiler Authors. All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *  * Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials provided\n *    with the distribution.\n *  * Neither the name of Google Inc. nor the names of its\n *    contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nvar base64 = require('./base64');\n\n// A single base 64 digit can contain 6 bits of data. For the base 64 variable\n// length quantities we use in the source map spec, the first bit is the sign,\n// the next four bits are the actual value, and the 6th bit is the\n// continuation bit. The continuation bit tells us whether there are more\n// digits in this value following this digit.\n//\n//   Continuation\n//   |    Sign\n//   |    |\n//   V    V\n//   101011\n\nvar VLQ_BASE_SHIFT = 5;\n\n// binary: 100000\nvar VLQ_BASE = 1 << VLQ_BASE_SHIFT;\n\n// binary: 011111\nvar VLQ_BASE_MASK = VLQ_BASE - 1;\n\n// binary: 100000\nvar VLQ_CONTINUATION_BIT = VLQ_BASE;\n\n/**\n * Converts from a two-complement value to a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\n *   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\n */\nfunction toVLQSigned(aValue) {\n  return aValue < 0\n    ? ((-aValue) << 1) + 1\n    : (aValue << 1) + 0;\n}\n\n/**\n * Converts to a two-complement value from a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\n *   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\n */\nfunction fromVLQSigned(aValue) {\n  var isNegative = (aValue & 1) === 1;\n  var shifted = aValue >> 1;\n  return isNegative\n    ? -shifted\n    : shifted;\n}\n\n/**\n * Returns the base 64 VLQ encoded value.\n */\nexports.encode = function base64VLQ_encode(aValue) {\n  var encoded = \"\";\n  var digit;\n\n  var vlq = toVLQSigned(aValue);\n\n  do {\n    digit = vlq & VLQ_BASE_MASK;\n    vlq >>>= VLQ_BASE_SHIFT;\n    if (vlq > 0) {\n      // There are still more digits in this value, so we must make sure the\n      // continuation bit is marked.\n      digit |= VLQ_CONTINUATION_BIT;\n    }\n    encoded += base64.encode(digit);\n  } while (vlq > 0);\n\n  return encoded;\n};\n\n/**\n * Decodes the next base 64 VLQ value from the given string and returns the\n * value and the rest of the string via the out parameter.\n */\nexports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {\n  var strLen = aStr.length;\n  var result = 0;\n  var shift = 0;\n  var continuation, digit;\n\n  do {\n    if (aIndex >= strLen) {\n      throw new Error(\"Expected more digits in base 64 VLQ value.\");\n    }\n\n    digit = base64.decode(aStr.charCodeAt(aIndex++));\n    if (digit === -1) {\n      throw new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\n    }\n\n    continuation = !!(digit & VLQ_CONTINUATION_BIT);\n    digit &= VLQ_BASE_MASK;\n    result = result + (digit << shift);\n    shift += VLQ_BASE_SHIFT;\n  } while (continuation);\n\n  aOutParam.value = fromVLQSigned(result);\n  aOutParam.rest = aIndex;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n// It turns out that some (most?) JavaScript engines don't self-host\n// `Array.prototype.sort`. This makes sense because C++ will likely remain\n// faster than JS when doing raw CPU-intensive sorting. However, when using a\n// custom comparator function, calling back and forth between the VM's C++ and\n// JIT'd JS is rather slow *and* loses JIT type information, resulting in\n// worse generated code for the comparator function than would be optimal. In\n// fact, when sorting with a comparator, these costs outweigh the benefits of\n// sorting in C++. By using our own JS-implemented Quick Sort (below), we get\n// a ~3500ms mean speed-up in `bench/bench.html`.\n\n/**\n * Swap the elements indexed by `x` and `y` in the array `ary`.\n *\n * @param {Array} ary\n *        The array.\n * @param {Number} x\n *        The index of the first item.\n * @param {Number} y\n *        The index of the second item.\n */\nfunction swap(ary, x, y) {\n  var temp = ary[x];\n  ary[x] = ary[y];\n  ary[y] = temp;\n}\n\n/**\n * Returns a random integer within the range `low .. high` inclusive.\n *\n * @param {Number} low\n *        The lower bound on the range.\n * @param {Number} high\n *        The upper bound on the range.\n */\nfunction randomIntInRange(low, high) {\n  return Math.round(low + (Math.random() * (high - low)));\n}\n\n/**\n * The Quick Sort algorithm.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n * @param {Number} p\n *        Start index of the array\n * @param {Number} r\n *        End index of the array\n */\nfunction doQuickSort(ary, comparator, p, r) {\n  // If our lower bound is less than our upper bound, we (1) partition the\n  // array into two pieces and (2) recurse on each half. If it is not, this is\n  // the empty array and our base case.\n\n  if (p < r) {\n    // (1) Partitioning.\n    //\n    // The partitioning chooses a pivot between `p` and `r` and moves all\n    // elements that are less than or equal to the pivot to the before it, and\n    // all the elements that are greater than it after it. The effect is that\n    // once partition is done, the pivot is in the exact place it will be when\n    // the array is put in sorted order, and it will not need to be moved\n    // again. This runs in O(n) time.\n\n    // Always choose a random pivot so that an input array which is reverse\n    // sorted does not cause O(n^2) running time.\n    var pivotIndex = randomIntInRange(p, r);\n    var i = p - 1;\n\n    swap(ary, pivotIndex, r);\n    var pivot = ary[r];\n\n    // Immediately after `j` is incremented in this loop, the following hold\n    // true:\n    //\n    //   * Every element in `ary[p .. i]` is less than or equal to the pivot.\n    //\n    //   * Every element in `ary[i+1 .. j-1]` is greater than the pivot.\n    for (var j = p; j < r; j++) {\n      if (comparator(ary[j], pivot) <= 0) {\n        i += 1;\n        swap(ary, i, j);\n      }\n    }\n\n    swap(ary, i + 1, j);\n    var q = i + 1;\n\n    // (2) Recurse on each half.\n\n    doQuickSort(ary, comparator, p, q - 1);\n    doQuickSort(ary, comparator, q + 1, r);\n  }\n}\n\n/**\n * Sort the given array in-place with the given comparator function.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n */\nexports.quickSort = function (ary, comparator) {\n  doQuickSort(ary, comparator, 0, ary.length - 1);\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\nvar binarySearch = require('./binary-search');\nvar ArraySet = require('./array-set').ArraySet;\nvar base64VLQ = require('./base64-vlq');\nvar quickSort = require('./quick-sort').quickSort;\n\nfunction SourceMapConsumer(aSourceMap) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\n  }\n\n  return sourceMap.sections != null\n    ? new IndexedSourceMapConsumer(sourceMap)\n    : new BasicSourceMapConsumer(sourceMap);\n}\n\nSourceMapConsumer.fromSourceMap = function(aSourceMap) {\n  return BasicSourceMapConsumer.fromSourceMap(aSourceMap);\n}\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nSourceMapConsumer.prototype._version = 3;\n\n// `__generatedMappings` and `__originalMappings` are arrays that hold the\n// parsed mapping coordinates from the source map's \"mappings\" attribute. They\n// are lazily instantiated, accessed via the `_generatedMappings` and\n// `_originalMappings` getters respectively, and we only parse the mappings\n// and create these arrays once queried for a source location. We jump through\n// these hoops because there can be many thousands of mappings, and parsing\n// them is expensive, so we only want to do it if we must.\n//\n// Each object in the arrays is of the form:\n//\n//     {\n//       generatedLine: The line number in the generated code,\n//       generatedColumn: The column number in the generated code,\n//       source: The path to the original source file that generated this\n//               chunk of code,\n//       originalLine: The line number in the original source that\n//                     corresponds to this chunk of generated code,\n//       originalColumn: The column number in the original source that\n//                       corresponds to this chunk of generated code,\n//       name: The name of the original symbol which generated this chunk of\n//             code.\n//     }\n//\n// All properties except for `generatedLine` and `generatedColumn` can be\n// `null`.\n//\n// `_generatedMappings` is ordered by the generated positions.\n//\n// `_originalMappings` is ordered by the original positions.\n\nSourceMapConsumer.prototype.__generatedMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_generatedMappings', {\n  get: function () {\n    if (!this.__generatedMappings) {\n      this._parseMappings(this._mappings, this.sourceRoot);\n    }\n\n    return this.__generatedMappings;\n  }\n});\n\nSourceMapConsumer.prototype.__originalMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_originalMappings', {\n  get: function () {\n    if (!this.__originalMappings) {\n      this._parseMappings(this._mappings, this.sourceRoot);\n    }\n\n    return this.__originalMappings;\n  }\n});\n\nSourceMapConsumer.prototype._charIsMappingSeparator =\n  function SourceMapConsumer_charIsMappingSeparator(aStr, index) {\n    var c = aStr.charAt(index);\n    return c === \";\" || c === \",\";\n  };\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nSourceMapConsumer.prototype._parseMappings =\n  function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    throw new Error(\"Subclasses must implement _parseMappings\");\n  };\n\nSourceMapConsumer.GENERATED_ORDER = 1;\nSourceMapConsumer.ORIGINAL_ORDER = 2;\n\nSourceMapConsumer.GREATEST_LOWER_BOUND = 1;\nSourceMapConsumer.LEAST_UPPER_BOUND = 2;\n\n/**\n * Iterate over each mapping between an original source/line/column and a\n * generated line/column in this source map.\n *\n * @param Function aCallback\n *        The function that is called with each mapping.\n * @param Object aContext\n *        Optional. If specified, this object will be the value of `this` every\n *        time that `aCallback` is called.\n * @param aOrder\n *        Either `SourceMapConsumer.GENERATED_ORDER` or\n *        `SourceMapConsumer.ORIGINAL_ORDER`. Specifies whether you want to\n *        iterate over the mappings sorted by the generated file's line/column\n *        order or the original's source/line/column order, respectively. Defaults to\n *        `SourceMapConsumer.GENERATED_ORDER`.\n */\nSourceMapConsumer.prototype.eachMapping =\n  function SourceMapConsumer_eachMapping(aCallback, aContext, aOrder) {\n    var context = aContext || null;\n    var order = aOrder || SourceMapConsumer.GENERATED_ORDER;\n\n    var mappings;\n    switch (order) {\n    case SourceMapConsumer.GENERATED_ORDER:\n      mappings = this._generatedMappings;\n      break;\n    case SourceMapConsumer.ORIGINAL_ORDER:\n      mappings = this._originalMappings;\n      break;\n    default:\n      throw new Error(\"Unknown order of iteration.\");\n    }\n\n    var sourceRoot = this.sourceRoot;\n    mappings.map(function (mapping) {\n      var source = mapping.source === null ? null : this._sources.at(mapping.source);\n      if (source != null && sourceRoot != null) {\n        source = util.join(sourceRoot, source);\n      }\n      return {\n        source: source,\n        generatedLine: mapping.generatedLine,\n        generatedColumn: mapping.generatedColumn,\n        originalLine: mapping.originalLine,\n        originalColumn: mapping.originalColumn,\n        name: mapping.name === null ? null : this._names.at(mapping.name)\n      };\n    }, this).forEach(aCallback, context);\n  };\n\n/**\n * Returns all generated line and column information for the original source,\n * line, and column provided. If no column is provided, returns all mappings\n * corresponding to a either the line we are searching for or the next\n * closest line that has any mappings. Otherwise, returns all mappings\n * corresponding to the given line and either the column we are searching for\n * or the next closest column that has any offsets.\n *\n * The only argument is an object with the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.\n *   - column: Optional. the column number in the original source.\n *\n * and an array of objects is returned, each with the following properties:\n *\n *   - line: The line number in the generated source, or null.\n *   - column: The column number in the generated source, or null.\n */\nSourceMapConsumer.prototype.allGeneratedPositionsFor =\n  function SourceMapConsumer_allGeneratedPositionsFor(aArgs) {\n    var line = util.getArg(aArgs, 'line');\n\n    // When there is no exact match, BasicSourceMapConsumer.prototype._findMapping\n    // returns the index of the closest mapping less than the needle. By\n    // setting needle.originalColumn to 0, we thus find the last mapping for\n    // the given line, provided such a mapping exists.\n    var needle = {\n      source: util.getArg(aArgs, 'source'),\n      originalLine: line,\n      originalColumn: util.getArg(aArgs, 'column', 0)\n    };\n\n    if (this.sourceRoot != null) {\n      needle.source = util.relative(this.sourceRoot, needle.source);\n    }\n    if (!this._sources.has(needle.source)) {\n      return [];\n    }\n    needle.source = this._sources.indexOf(needle.source);\n\n    var mappings = [];\n\n    var index = this._findMapping(needle,\n                                  this._originalMappings,\n                                  \"originalLine\",\n                                  \"originalColumn\",\n                                  util.compareByOriginalPositions,\n                                  binarySearch.LEAST_UPPER_BOUND);\n    if (index >= 0) {\n      var mapping = this._originalMappings[index];\n\n      if (aArgs.column === undefined) {\n        var originalLine = mapping.originalLine;\n\n        // Iterate until either we run out of mappings, or we run into\n        // a mapping for a different line than the one we found. Since\n        // mappings are sorted, this is guaranteed to find all mappings for\n        // the line we found.\n        while (mapping && mapping.originalLine === originalLine) {\n          mappings.push({\n            line: util.getArg(mapping, 'generatedLine', null),\n            column: util.getArg(mapping, 'generatedColumn', null),\n            lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n          });\n\n          mapping = this._originalMappings[++index];\n        }\n      } else {\n        var originalColumn = mapping.originalColumn;\n\n        // Iterate until either we run out of mappings, or we run into\n        // a mapping for a different line than the one we were searching for.\n        // Since mappings are sorted, this is guaranteed to find all mappings for\n        // the line we are searching for.\n        while (mapping &&\n               mapping.originalLine === line &&\n               mapping.originalColumn == originalColumn) {\n          mappings.push({\n            line: util.getArg(mapping, 'generatedLine', null),\n            column: util.getArg(mapping, 'generatedColumn', null),\n            lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n          });\n\n          mapping = this._originalMappings[++index];\n        }\n      }\n    }\n\n    return mappings;\n  };\n\nexports.SourceMapConsumer = SourceMapConsumer;\n\n/**\n * A BasicSourceMapConsumer instance represents a parsed source map which we can\n * query for information about the original file positions by giving it a file\n * position in the generated source.\n *\n * The only parameter is the raw source map (either as a JSON string, or\n * already parsed to an object). According to the spec, source maps have the\n * following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - sources: An array of URLs to the original source files.\n *   - names: An array of identifiers which can be referrenced by individual mappings.\n *   - sourceRoot: Optional. The URL root from which all sources are relative.\n *   - sourcesContent: Optional. An array of contents of the original source files.\n *   - mappings: A string of base64 VLQs which contain the actual mappings.\n *   - file: Optional. The generated file this source map is associated with.\n *\n * Here is an example source map, taken from the source map spec[0]:\n *\n *     {\n *       version : 3,\n *       file: \"out.js\",\n *       sourceRoot : \"\",\n *       sources: [\"foo.js\", \"bar.js\"],\n *       names: [\"src\", \"maps\", \"are\", \"fun\"],\n *       mappings: \"AA,AB;;ABCDE;\"\n *     }\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?pli=1#\n */\nfunction BasicSourceMapConsumer(aSourceMap) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\n  }\n\n  var version = util.getArg(sourceMap, 'version');\n  var sources = util.getArg(sourceMap, 'sources');\n  // Sass 3.3 leaves out the 'names' array, so we deviate from the spec (which\n  // requires the array) to play nice here.\n  var names = util.getArg(sourceMap, 'names', []);\n  var sourceRoot = util.getArg(sourceMap, 'sourceRoot', null);\n  var sourcesContent = util.getArg(sourceMap, 'sourcesContent', null);\n  var mappings = util.getArg(sourceMap, 'mappings');\n  var file = util.getArg(sourceMap, 'file', null);\n\n  // Once again, Sass deviates from the spec and supplies the version as a\n  // string rather than a number, so we use loose equality checking here.\n  if (version != this._version) {\n    throw new Error('Unsupported version: ' + version);\n  }\n\n  sources = sources\n    .map(String)\n    // Some source maps produce relative source paths like \"./foo.js\" instead of\n    // \"foo.js\".  Normalize these first so that future comparisons will succeed.\n    // See bugzil.la/1090768.\n    .map(util.normalize)\n    // Always ensure that absolute sources are internally stored relative to\n    // the source root, if the source root is absolute. Not doing this would\n    // be particularly problematic when the source root is a prefix of the\n    // source (valid, but why??). See github issue #199 and bugzil.la/1188982.\n    .map(function (source) {\n      return sourceRoot && util.isAbsolute(sourceRoot) && util.isAbsolute(source)\n        ? util.relative(sourceRoot, source)\n        : source;\n    });\n\n  // Pass `true` below to allow duplicate names and sources. While source maps\n  // are intended to be compressed and deduplicated, the TypeScript compiler\n  // sometimes generates source maps with duplicates in them. See Github issue\n  // #72 and bugzil.la/889492.\n  this._names = ArraySet.fromArray(names.map(String), true);\n  this._sources = ArraySet.fromArray(sources, true);\n\n  this.sourceRoot = sourceRoot;\n  this.sourcesContent = sourcesContent;\n  this._mappings = mappings;\n  this.file = file;\n}\n\nBasicSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nBasicSourceMapConsumer.prototype.consumer = SourceMapConsumer;\n\n/**\n * Create a BasicSourceMapConsumer from a SourceMapGenerator.\n *\n * @param SourceMapGenerator aSourceMap\n *        The source map that will be consumed.\n * @returns BasicSourceMapConsumer\n */\nBasicSourceMapConsumer.fromSourceMap =\n  function SourceMapConsumer_fromSourceMap(aSourceMap) {\n    var smc = Object.create(BasicSourceMapConsumer.prototype);\n\n    var names = smc._names = ArraySet.fromArray(aSourceMap._names.toArray(), true);\n    var sources = smc._sources = ArraySet.fromArray(aSourceMap._sources.toArray(), true);\n    smc.sourceRoot = aSourceMap._sourceRoot;\n    smc.sourcesContent = aSourceMap._generateSourcesContent(smc._sources.toArray(),\n                                                            smc.sourceRoot);\n    smc.file = aSourceMap._file;\n\n    // Because we are modifying the entries (by converting string sources and\n    // names to indices into the sources and names ArraySets), we have to make\n    // a copy of the entry or else bad things happen. Shared mutable state\n    // strikes again! See github issue #191.\n\n    var generatedMappings = aSourceMap._mappings.toArray().slice();\n    var destGeneratedMappings = smc.__generatedMappings = [];\n    var destOriginalMappings = smc.__originalMappings = [];\n\n    for (var i = 0, length = generatedMappings.length; i < length; i++) {\n      var srcMapping = generatedMappings[i];\n      var destMapping = new Mapping;\n      destMapping.generatedLine = srcMapping.generatedLine;\n      destMapping.generatedColumn = srcMapping.generatedColumn;\n\n      if (srcMapping.source) {\n        destMapping.source = sources.indexOf(srcMapping.source);\n        destMapping.originalLine = srcMapping.originalLine;\n        destMapping.originalColumn = srcMapping.originalColumn;\n\n        if (srcMapping.name) {\n          destMapping.name = names.indexOf(srcMapping.name);\n        }\n\n        destOriginalMappings.push(destMapping);\n      }\n\n      destGeneratedMappings.push(destMapping);\n    }\n\n    quickSort(smc.__originalMappings, util.compareByOriginalPositions);\n\n    return smc;\n  };\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nBasicSourceMapConsumer.prototype._version = 3;\n\n/**\n * The list of original sources.\n */\nObject.defineProperty(BasicSourceMapConsumer.prototype, 'sources', {\n  get: function () {\n    return this._sources.toArray().map(function (s) {\n      return this.sourceRoot != null ? util.join(this.sourceRoot, s) : s;\n    }, this);\n  }\n});\n\n/**\n * Provide the JIT with a nice shape / hidden class.\n */\nfunction Mapping() {\n  this.generatedLine = 0;\n  this.generatedColumn = 0;\n  this.source = null;\n  this.originalLine = null;\n  this.originalColumn = null;\n  this.name = null;\n}\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nBasicSourceMapConsumer.prototype._parseMappings =\n  function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    var generatedLine = 1;\n    var previousGeneratedColumn = 0;\n    var previousOriginalLine = 0;\n    var previousOriginalColumn = 0;\n    var previousSource = 0;\n    var previousName = 0;\n    var length = aStr.length;\n    var index = 0;\n    var cachedSegments = {};\n    var temp = {};\n    var originalMappings = [];\n    var generatedMappings = [];\n    var mapping, str, segment, end, value;\n\n    while (index < length) {\n      if (aStr.charAt(index) === ';') {\n        generatedLine++;\n        index++;\n        previousGeneratedColumn = 0;\n      }\n      else if (aStr.charAt(index) === ',') {\n        index++;\n      }\n      else {\n        mapping = new Mapping();\n        mapping.generatedLine = generatedLine;\n\n        // Because each offset is encoded relative to the previous one,\n        // many segments often have the same encoding. We can exploit this\n        // fact by caching the parsed variable length fields of each segment,\n        // allowing us to avoid a second parse if we encounter the same\n        // segment again.\n        for (end = index; end < length; end++) {\n          if (this._charIsMappingSeparator(aStr, end)) {\n            break;\n          }\n        }\n        str = aStr.slice(index, end);\n\n        segment = cachedSegments[str];\n        if (segment) {\n          index += str.length;\n        } else {\n          segment = [];\n          while (index < end) {\n            base64VLQ.decode(aStr, index, temp);\n            value = temp.value;\n            index = temp.rest;\n            segment.push(value);\n          }\n\n          if (segment.length === 2) {\n            throw new Error('Found a source, but no line and column');\n          }\n\n          if (segment.length === 3) {\n            throw new Error('Found a source and line, but no column');\n          }\n\n          cachedSegments[str] = segment;\n        }\n\n        // Generated column.\n        mapping.generatedColumn = previousGeneratedColumn + segment[0];\n        previousGeneratedColumn = mapping.generatedColumn;\n\n        if (segment.length > 1) {\n          // Original source.\n          mapping.source = previousSource + segment[1];\n          previousSource += segment[1];\n\n          // Original line.\n          mapping.originalLine = previousOriginalLine + segment[2];\n          previousOriginalLine = mapping.originalLine;\n          // Lines are stored 0-based\n          mapping.originalLine += 1;\n\n          // Original column.\n          mapping.originalColumn = previousOriginalColumn + segment[3];\n          previousOriginalColumn = mapping.originalColumn;\n\n          if (segment.length > 4) {\n            // Original name.\n            mapping.name = previousName + segment[4];\n            previousName += segment[4];\n          }\n        }\n\n        generatedMappings.push(mapping);\n        if (typeof mapping.originalLine === 'number') {\n          originalMappings.push(mapping);\n        }\n      }\n    }\n\n    quickSort(generatedMappings, util.compareByGeneratedPositionsDeflated);\n    this.__generatedMappings = generatedMappings;\n\n    quickSort(originalMappings, util.compareByOriginalPositions);\n    this.__originalMappings = originalMappings;\n  };\n\n/**\n * Find the mapping that best matches the hypothetical \"needle\" mapping that\n * we are searching for in the given \"haystack\" of mappings.\n */\nBasicSourceMapConsumer.prototype._findMapping =\n  function SourceMapConsumer_findMapping(aNeedle, aMappings, aLineName,\n                                         aColumnName, aComparator, aBias) {\n    // To return the position we are searching for, we must first find the\n    // mapping for the given position and then return the opposite position it\n    // points to. Because the mappings are sorted, we can use binary search to\n    // find the best mapping.\n\n    if (aNeedle[aLineName] <= 0) {\n      throw new TypeError('Line must be greater than or equal to 1, got '\n                          + aNeedle[aLineName]);\n    }\n    if (aNeedle[aColumnName] < 0) {\n      throw new TypeError('Column must be greater than or equal to 0, got '\n                          + aNeedle[aColumnName]);\n    }\n\n    return binarySearch.search(aNeedle, aMappings, aComparator, aBias);\n  };\n\n/**\n * Compute the last column for each generated mapping. The last column is\n * inclusive.\n */\nBasicSourceMapConsumer.prototype.computeColumnSpans =\n  function SourceMapConsumer_computeColumnSpans() {\n    for (var index = 0; index < this._generatedMappings.length; ++index) {\n      var mapping = this._generatedMappings[index];\n\n      // Mappings do not contain a field for the last generated columnt. We\n      // can come up with an optimistic estimate, however, by assuming that\n      // mappings are contiguous (i.e. given two consecutive mappings, the\n      // first mapping ends where the second one starts).\n      if (index + 1 < this._generatedMappings.length) {\n        var nextMapping = this._generatedMappings[index + 1];\n\n        if (mapping.generatedLine === nextMapping.generatedLine) {\n          mapping.lastGeneratedColumn = nextMapping.generatedColumn - 1;\n          continue;\n        }\n      }\n\n      // The last mapping for each line spans the entire line.\n      mapping.lastGeneratedColumn = Infinity;\n    }\n  };\n\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.\n *   - column: The column number in the generated source.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.\n *   - column: The column number in the original source, or null.\n *   - name: The original identifier, or null.\n */\nBasicSourceMapConsumer.prototype.originalPositionFor =\n  function SourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n      generatedLine: util.getArg(aArgs, 'line'),\n      generatedColumn: util.getArg(aArgs, 'column')\n    };\n\n    var index = this._findMapping(\n      needle,\n      this._generatedMappings,\n      \"generatedLine\",\n      \"generatedColumn\",\n      util.compareByGeneratedPositionsDeflated,\n      util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\n    );\n\n    if (index >= 0) {\n      var mapping = this._generatedMappings[index];\n\n      if (mapping.generatedLine === needle.generatedLine) {\n        var source = util.getArg(mapping, 'source', null);\n        if (source !== null) {\n          source = this._sources.at(source);\n          if (this.sourceRoot != null) {\n            source = util.join(this.sourceRoot, source);\n          }\n        }\n        var name = util.getArg(mapping, 'name', null);\n        if (name !== null) {\n          name = this._names.at(name);\n        }\n        return {\n          source: source,\n          line: util.getArg(mapping, 'originalLine', null),\n          column: util.getArg(mapping, 'originalColumn', null),\n          name: name\n        };\n      }\n    }\n\n    return {\n      source: null,\n      line: null,\n      column: null,\n      name: null\n    };\n  };\n\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */\nBasicSourceMapConsumer.prototype.hasContentsOfAllSources =\n  function BasicSourceMapConsumer_hasContentsOfAllSources() {\n    if (!this.sourcesContent) {\n      return false;\n    }\n    return this.sourcesContent.length >= this._sources.size() &&\n      !this.sourcesContent.some(function (sc) { return sc == null; });\n  };\n\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */\nBasicSourceMapConsumer.prototype.sourceContentFor =\n  function SourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    if (!this.sourcesContent) {\n      return null;\n    }\n\n    if (this.sourceRoot != null) {\n      aSource = util.relative(this.sourceRoot, aSource);\n    }\n\n    if (this._sources.has(aSource)) {\n      return this.sourcesContent[this._sources.indexOf(aSource)];\n    }\n\n    var url;\n    if (this.sourceRoot != null\n        && (url = util.urlParse(this.sourceRoot))) {\n      // XXX: file:// URIs and absolute paths lead to unexpected behavior for\n      // many users. We can help them out when they expect file:// URIs to\n      // behave like it would if they were running a local HTTP server. See\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=885597.\n      var fileUriAbsPath = aSource.replace(/^file:\\/\\//, \"\");\n      if (url.scheme == \"file\"\n          && this._sources.has(fileUriAbsPath)) {\n        return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]\n      }\n\n      if ((!url.path || url.path == \"/\")\n          && this._sources.has(\"/\" + aSource)) {\n        return this.sourcesContent[this._sources.indexOf(\"/\" + aSource)];\n      }\n    }\n\n    // This function is used recursively from\n    // IndexedSourceMapConsumer.prototype.sourceContentFor. In that case, we\n    // don't want to throw if we can't find the source - we just want to\n    // return null, so we provide a flag to exit gracefully.\n    if (nullOnMissing) {\n      return null;\n    }\n    else {\n      throw new Error('\"' + aSource + '\" is not in the SourceMap.');\n    }\n  };\n\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.\n *   - column: The column number in the original source.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.\n *   - column: The column number in the generated source, or null.\n */\nBasicSourceMapConsumer.prototype.generatedPositionFor =\n  function SourceMapConsumer_generatedPositionFor(aArgs) {\n    var source = util.getArg(aArgs, 'source');\n    if (this.sourceRoot != null) {\n      source = util.relative(this.sourceRoot, source);\n    }\n    if (!this._sources.has(source)) {\n      return {\n        line: null,\n        column: null,\n        lastColumn: null\n      };\n    }\n    source = this._sources.indexOf(source);\n\n    var needle = {\n      source: source,\n      originalLine: util.getArg(aArgs, 'line'),\n      originalColumn: util.getArg(aArgs, 'column')\n    };\n\n    var index = this._findMapping(\n      needle,\n      this._originalMappings,\n      \"originalLine\",\n      \"originalColumn\",\n      util.compareByOriginalPositions,\n      util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\n    );\n\n    if (index >= 0) {\n      var mapping = this._originalMappings[index];\n\n      if (mapping.source === needle.source) {\n        return {\n          line: util.getArg(mapping, 'generatedLine', null),\n          column: util.getArg(mapping, 'generatedColumn', null),\n          lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n        };\n      }\n    }\n\n    return {\n      line: null,\n      column: null,\n      lastColumn: null\n    };\n  };\n\nexports.BasicSourceMapConsumer = BasicSourceMapConsumer;\n\n/**\n * An IndexedSourceMapConsumer instance represents a parsed source map which\n * we can query for information. It differs from BasicSourceMapConsumer in\n * that it takes \"indexed\" source maps (i.e. ones with a \"sections\" field) as\n * input.\n *\n * The only parameter is a raw source map (either as a JSON string, or already\n * parsed to an object). According to the spec for indexed source maps, they\n * have the following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - file: Optional. The generated file this source map is associated with.\n *   - sections: A list of section definitions.\n *\n * Each value under the \"sections\" field has two fields:\n *   - offset: The offset into the original specified at which this section\n *       begins to apply, defined as an object with a \"line\" and \"column\"\n *       field.\n *   - map: A source map definition. This source map could also be indexed,\n *       but doesn't have to be.\n *\n * Instead of the \"map\" field, it's also possible to have a \"url\" field\n * specifying a URL to retrieve a source map from, but that's currently\n * unsupported.\n *\n * Here's an example source map, taken from the source map spec[0], but\n * modified to omit a section which uses the \"url\" field.\n *\n *  {\n *    version : 3,\n *    file: \"app.js\",\n *    sections: [{\n *      offset: {line:100, column:10},\n *      map: {\n *        version : 3,\n *        file: \"section.js\",\n *        sources: [\"foo.js\", \"bar.js\"],\n *        names: [\"src\", \"maps\", \"are\", \"fun\"],\n *        mappings: \"AAAA,E;;ABCDE;\"\n *      }\n *    }],\n *  }\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit#heading=h.535es3xeprgt\n */\nfunction IndexedSourceMapConsumer(aSourceMap) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\n  }\n\n  var version = util.getArg(sourceMap, 'version');\n  var sections = util.getArg(sourceMap, 'sections');\n\n  if (version != this._version) {\n    throw new Error('Unsupported version: ' + version);\n  }\n\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n\n  var lastOffset = {\n    line: -1,\n    column: 0\n  };\n  this._sections = sections.map(function (s) {\n    if (s.url) {\n      // The url field will require support for asynchronicity.\n      // See https://github.com/mozilla/source-map/issues/16\n      throw new Error('Support for url field in sections not implemented.');\n    }\n    var offset = util.getArg(s, 'offset');\n    var offsetLine = util.getArg(offset, 'line');\n    var offsetColumn = util.getArg(offset, 'column');\n\n    if (offsetLine < lastOffset.line ||\n        (offsetLine === lastOffset.line && offsetColumn < lastOffset.column)) {\n      throw new Error('Section offsets must be ordered and non-overlapping.');\n    }\n    lastOffset = offset;\n\n    return {\n      generatedOffset: {\n        // The offset fields are 0-based, but we use 1-based indices when\n        // encoding/decoding from VLQ.\n        generatedLine: offsetLine + 1,\n        generatedColumn: offsetColumn + 1\n      },\n      consumer: new SourceMapConsumer(util.getArg(s, 'map'))\n    }\n  });\n}\n\nIndexedSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nIndexedSourceMapConsumer.prototype.constructor = SourceMapConsumer;\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nIndexedSourceMapConsumer.prototype._version = 3;\n\n/**\n * The list of original sources.\n */\nObject.defineProperty(IndexedSourceMapConsumer.prototype, 'sources', {\n  get: function () {\n    var sources = [];\n    for (var i = 0; i < this._sections.length; i++) {\n      for (var j = 0; j < this._sections[i].consumer.sources.length; j++) {\n        sources.push(this._sections[i].consumer.sources[j]);\n      }\n    }\n    return sources;\n  }\n});\n\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.\n *   - column: The column number in the generated source.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.\n *   - column: The column number in the original source, or null.\n *   - name: The original identifier, or null.\n */\nIndexedSourceMapConsumer.prototype.originalPositionFor =\n  function IndexedSourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n      generatedLine: util.getArg(aArgs, 'line'),\n      generatedColumn: util.getArg(aArgs, 'column')\n    };\n\n    // Find the section containing the generated position we're trying to map\n    // to an original position.\n    var sectionIndex = binarySearch.search(needle, this._sections,\n      function(needle, section) {\n        var cmp = needle.generatedLine - section.generatedOffset.generatedLine;\n        if (cmp) {\n          return cmp;\n        }\n\n        return (needle.generatedColumn -\n                section.generatedOffset.generatedColumn);\n      });\n    var section = this._sections[sectionIndex];\n\n    if (!section) {\n      return {\n        source: null,\n        line: null,\n        column: null,\n        name: null\n      };\n    }\n\n    return section.consumer.originalPositionFor({\n      line: needle.generatedLine -\n        (section.generatedOffset.generatedLine - 1),\n      column: needle.generatedColumn -\n        (section.generatedOffset.generatedLine === needle.generatedLine\n         ? section.generatedOffset.generatedColumn - 1\n         : 0),\n      bias: aArgs.bias\n    });\n  };\n\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */\nIndexedSourceMapConsumer.prototype.hasContentsOfAllSources =\n  function IndexedSourceMapConsumer_hasContentsOfAllSources() {\n    return this._sections.every(function (s) {\n      return s.consumer.hasContentsOfAllSources();\n    });\n  };\n\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */\nIndexedSourceMapConsumer.prototype.sourceContentFor =\n  function IndexedSourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n\n      var content = section.consumer.sourceContentFor(aSource, true);\n      if (content) {\n        return content;\n      }\n    }\n    if (nullOnMissing) {\n      return null;\n    }\n    else {\n      throw new Error('\"' + aSource + '\" is not in the SourceMap.');\n    }\n  };\n\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.\n *   - column: The column number in the original source.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.\n *   - column: The column number in the generated source, or null.\n */\nIndexedSourceMapConsumer.prototype.generatedPositionFor =\n  function IndexedSourceMapConsumer_generatedPositionFor(aArgs) {\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n\n      // Only consider this section if the requested source is in the list of\n      // sources of the consumer.\n      if (section.consumer.sources.indexOf(util.getArg(aArgs, 'source')) === -1) {\n        continue;\n      }\n      var generatedPosition = section.consumer.generatedPositionFor(aArgs);\n      if (generatedPosition) {\n        var ret = {\n          line: generatedPosition.line +\n            (section.generatedOffset.generatedLine - 1),\n          column: generatedPosition.column +\n            (section.generatedOffset.generatedLine === generatedPosition.line\n             ? section.generatedOffset.generatedColumn - 1\n             : 0)\n        };\n        return ret;\n      }\n    }\n\n    return {\n      line: null,\n      column: null\n    };\n  };\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nIndexedSourceMapConsumer.prototype._parseMappings =\n  function IndexedSourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    this.__generatedMappings = [];\n    this.__originalMappings = [];\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n      var sectionMappings = section.consumer._generatedMappings;\n      for (var j = 0; j < sectionMappings.length; j++) {\n        var mapping = sectionMappings[j];\n\n        var source = section.consumer._sources.at(mapping.source);\n        if (section.consumer.sourceRoot !== null) {\n          source = util.join(section.consumer.sourceRoot, source);\n        }\n        this._sources.add(source);\n        source = this._sources.indexOf(source);\n\n        var name = section.consumer._names.at(mapping.name);\n        this._names.add(name);\n        name = this._names.indexOf(name);\n\n        // The mappings coming from the consumer for the section have\n        // generated positions relative to the start of the section, so we\n        // need to offset them to be relative to the start of the concatenated\n        // generated file.\n        var adjustedMapping = {\n          source: source,\n          generatedLine: mapping.generatedLine +\n            (section.generatedOffset.generatedLine - 1),\n          generatedColumn: mapping.generatedColumn +\n            (section.generatedOffset.generatedLine === mapping.generatedLine\n            ? section.generatedOffset.generatedColumn - 1\n            : 0),\n          originalLine: mapping.originalLine,\n          originalColumn: mapping.originalColumn,\n          name: name\n        };\n\n        this.__generatedMappings.push(adjustedMapping);\n        if (typeof adjustedMapping.originalLine === 'number') {\n          this.__originalMappings.push(adjustedMapping);\n        }\n      }\n    }\n\n    quickSort(this.__generatedMappings, util.compareByGeneratedPositionsDeflated);\n    quickSort(this.__originalMappings, util.compareByOriginalPositions);\n  };\n\nexports.IndexedSourceMapConsumer = IndexedSourceMapConsumer;\n","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('stacktrace-gps', ['source-map', 'stackframe'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('source-map/lib/source-map-consumer'), require('stackframe'));\n    } else {\n        root.StackTraceGPS = factory(root.SourceMap || root.sourceMap, root.StackFrame);\n    }\n}(this, function(SourceMap, StackFrame) {\n    'use strict';\n\n    /**\n     * Make a X-Domain request to url and callback.\n     *\n     * @param {String} url\n     * @returns {Promise} with response text if fulfilled\n     */\n    function _xdr(url) {\n        return new Promise(function(resolve, reject) {\n            var req = new XMLHttpRequest();\n            req.open('get', url);\n            req.onerror = reject;\n            req.onreadystatechange = function onreadystatechange() {\n                if (req.readyState === 4) {\n                    if ((req.status >= 200 && req.status < 300) ||\n                        (url.substr(0, 7) === 'file://' && req.responseText)) {\n                        resolve(req.responseText);\n                    } else {\n                        reject(new Error('HTTP status: ' + req.status + ' retrieving ' + url));\n                    }\n                }\n            };\n            req.send();\n        });\n\n    }\n\n    /**\n     * Convert a Base64-encoded string into its original representation.\n     * Used for inline sourcemaps.\n     *\n     * @param {String} b64str Base-64 encoded string\n     * @returns {String} original representation of the base64-encoded string.\n     */\n    function _atob(b64str) {\n        if (typeof window !== 'undefined' && window.atob) {\n            return window.atob(b64str);\n        } else {\n            throw new Error('You must supply a polyfill for window.atob in this environment');\n        }\n    }\n\n    function _parseJson(string) {\n        if (typeof JSON !== 'undefined' && JSON.parse) {\n            return JSON.parse(string);\n        } else {\n            throw new Error('You must supply a polyfill for JSON.parse in this environment');\n        }\n    }\n\n    function _findFunctionName(source, lineNumber/*, columnNumber*/) {\n        var syntaxes = [\n            // {name} = function ({args}) TODO args capture\n            /['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*function\\b/,\n            // function {name}({args}) m[1]=name m[2]=args\n            /function\\s+([^('\"`]*?)\\s*\\(([^)]*)\\)/,\n            // {name} = eval()\n            /['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*(?:eval|new Function)\\b/,\n            // fn_name() {\n            /\\b(?!(?:if|for|switch|while|with|catch)\\b)(?:(?:static)\\s+)?(\\S+)\\s*\\(.*?\\)\\s*\\{/,\n            // {name} = () => {\n            /['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*\\(.*?\\)\\s*=>/\n        ];\n        var lines = source.split('\\n');\n\n        // Walk backwards in the source lines until we find the line which matches one of the patterns above\n        var code = '';\n        var maxLines = Math.min(lineNumber, 20);\n        for (var i = 0; i < maxLines; ++i) {\n            // lineNo is 1-based, source[] is 0-based\n            var line = lines[lineNumber - i - 1];\n            var commentPos = line.indexOf('//');\n            if (commentPos >= 0) {\n                line = line.substr(0, commentPos);\n            }\n\n            if (line) {\n                code = line + code;\n                var len = syntaxes.length;\n                for (var index = 0; index < len; index++) {\n                    var m = syntaxes[index].exec(code);\n                    if (m && m[1]) {\n                        return m[1];\n                    }\n                }\n            }\n        }\n        return undefined;\n    }\n\n    function _ensureSupportedEnvironment() {\n        if (typeof Object.defineProperty !== 'function' || typeof Object.create !== 'function') {\n            throw new Error('Unable to consume source maps in older browsers');\n        }\n    }\n\n    function _ensureStackFrameIsLegit(stackframe) {\n        if (typeof stackframe !== 'object') {\n            throw new TypeError('Given StackFrame is not an object');\n        } else if (typeof stackframe.fileName !== 'string') {\n            throw new TypeError('Given file name is not a String');\n        } else if (typeof stackframe.lineNumber !== 'number' ||\n            stackframe.lineNumber % 1 !== 0 ||\n            stackframe.lineNumber < 1) {\n            throw new TypeError('Given line number must be a positive integer');\n        } else if (typeof stackframe.columnNumber !== 'number' ||\n            stackframe.columnNumber % 1 !== 0 ||\n            stackframe.columnNumber < 0) {\n            throw new TypeError('Given column number must be a non-negative integer');\n        }\n        return true;\n    }\n\n    function _findSourceMappingURL(source) {\n        var sourceMappingUrlRegExp = /\\/\\/[#@] ?sourceMappingURL=([^\\s'\"]+)\\s*$/mg;\n        var lastSourceMappingUrl;\n        var matchSourceMappingUrl;\n        // eslint-disable-next-line no-cond-assign\n        while (matchSourceMappingUrl = sourceMappingUrlRegExp.exec(source)) {\n            lastSourceMappingUrl = matchSourceMappingUrl[1];\n        }\n        if (lastSourceMappingUrl) {\n            return lastSourceMappingUrl;\n        } else {\n            throw new Error('sourceMappingURL not found');\n        }\n    }\n\n    function _extractLocationInfoFromSourceMapSource(stackframe, sourceMapConsumer, sourceCache) {\n        return new Promise(function(resolve, reject) {\n            var loc = sourceMapConsumer.originalPositionFor({\n                line: stackframe.lineNumber,\n                column: stackframe.columnNumber\n            });\n\n            if (loc.source) {\n                // cache mapped sources\n                var mappedSource = sourceMapConsumer.sourceContentFor(loc.source);\n                if (mappedSource) {\n                    sourceCache[loc.source] = mappedSource;\n                }\n\n                resolve(\n                    // given stackframe and source location, update stackframe\n                    new StackFrame({\n                        functionName: loc.name || stackframe.functionName,\n                        args: stackframe.args,\n                        fileName: loc.source,\n                        lineNumber: loc.line,\n                        columnNumber: loc.column\n                    }));\n            } else {\n                reject(new Error('Could not get original source for given stackframe and source map'));\n            }\n        });\n    }\n\n    /**\n     * @constructor\n     * @param {Object} opts\n     *      opts.sourceCache = {url: \"Source String\"} => preload source cache\n     *      opts.sourceMapConsumerCache = {/path/file.js.map: SourceMapConsumer}\n     *      opts.offline = True to prevent network requests.\n     *              Best effort without sources or source maps.\n     *      opts.ajax = Promise returning function to make X-Domain requests\n     */\n    return function StackTraceGPS(opts) {\n        if (!(this instanceof StackTraceGPS)) {\n            return new StackTraceGPS(opts);\n        }\n        opts = opts || {};\n\n        this.sourceCache = opts.sourceCache || {};\n        this.sourceMapConsumerCache = opts.sourceMapConsumerCache || {};\n\n        this.ajax = opts.ajax || _xdr;\n\n        this._atob = opts.atob || _atob;\n\n        this._get = function _get(location) {\n            return new Promise(function(resolve, reject) {\n                var isDataUrl = location.substr(0, 5) === 'data:';\n                if (this.sourceCache[location]) {\n                    resolve(this.sourceCache[location]);\n                } else if (opts.offline && !isDataUrl) {\n                    reject(new Error('Cannot make network requests in offline mode'));\n                } else {\n                    if (isDataUrl) {\n                        // data URLs can have parameters.\n                        // see http://tools.ietf.org/html/rfc2397\n                        var supportedEncodingRegexp =\n                            /^data:application\\/json;([\\w=:\"-]+;)*base64,/;\n                        var match = location.match(supportedEncodingRegexp);\n                        if (match) {\n                            var sourceMapStart = match[0].length;\n                            var encodedSource = location.substr(sourceMapStart);\n                            var source = this._atob(encodedSource);\n                            this.sourceCache[location] = source;\n                            resolve(source);\n                        } else {\n                            reject(new Error('The encoding of the inline sourcemap is not supported'));\n                        }\n                    } else {\n                        var xhrPromise = this.ajax(location, {method: 'get'});\n                        // Cache the Promise to prevent duplicate in-flight requests\n                        this.sourceCache[location] = xhrPromise;\n                        xhrPromise.then(resolve, reject);\n                    }\n                }\n            }.bind(this));\n        };\n\n        /**\n         * Creating SourceMapConsumers is expensive, so this wraps the creation of a\n         * SourceMapConsumer in a per-instance cache.\n         *\n         * @param {String} sourceMappingURL = URL to fetch source map from\n         * @param {String} defaultSourceRoot = Default source root for source map if undefined\n         * @returns {Promise} that resolves a SourceMapConsumer\n         */\n        this._getSourceMapConsumer = function _getSourceMapConsumer(sourceMappingURL, defaultSourceRoot) {\n            return new Promise(function(resolve) {\n                if (this.sourceMapConsumerCache[sourceMappingURL]) {\n                    resolve(this.sourceMapConsumerCache[sourceMappingURL]);\n                } else {\n                    var sourceMapConsumerPromise = new Promise(function(resolve, reject) {\n                        return this._get(sourceMappingURL).then(function(sourceMapSource) {\n                            if (typeof sourceMapSource === 'string') {\n                                sourceMapSource = _parseJson(sourceMapSource.replace(/^\\)\\]\\}'/, ''));\n                            }\n                            if (typeof sourceMapSource.sourceRoot === 'undefined') {\n                                sourceMapSource.sourceRoot = defaultSourceRoot;\n                            }\n\n                            resolve(new SourceMap.SourceMapConsumer(sourceMapSource));\n                        }, reject);\n                    }.bind(this));\n                    this.sourceMapConsumerCache[sourceMappingURL] = sourceMapConsumerPromise;\n                    resolve(sourceMapConsumerPromise);\n                }\n            }.bind(this));\n        };\n\n        /**\n         * Given a StackFrame, enhance function name and use source maps for a\n         * better StackFrame.\n         *\n         * @param {StackFrame} stackframe object\n         * @returns {Promise} that resolves with with source-mapped StackFrame\n         */\n        this.pinpoint = function StackTraceGPS$$pinpoint(stackframe) {\n            return new Promise(function(resolve, reject) {\n                this.getMappedLocation(stackframe).then(function(mappedStackFrame) {\n                    function resolveMappedStackFrame() {\n                        resolve(mappedStackFrame);\n                    }\n\n                    this.findFunctionName(mappedStackFrame)\n                        .then(resolve, resolveMappedStackFrame)\n                        // eslint-disable-next-line no-unexpected-multiline\n                        ['catch'](resolveMappedStackFrame);\n                }.bind(this), reject);\n            }.bind(this));\n        };\n\n        /**\n         * Given a StackFrame, guess function name from location information.\n         *\n         * @param {StackFrame} stackframe\n         * @returns {Promise} that resolves with enhanced StackFrame.\n         */\n        this.findFunctionName = function StackTraceGPS$$findFunctionName(stackframe) {\n            return new Promise(function(resolve, reject) {\n                _ensureStackFrameIsLegit(stackframe);\n                this._get(stackframe.fileName).then(function getSourceCallback(source) {\n                    var lineNumber = stackframe.lineNumber;\n                    var columnNumber = stackframe.columnNumber;\n                    var guessedFunctionName = _findFunctionName(source, lineNumber, columnNumber);\n                    // Only replace functionName if we found something\n                    if (guessedFunctionName) {\n                        resolve(new StackFrame({\n                            functionName: guessedFunctionName,\n                            args: stackframe.args,\n                            fileName: stackframe.fileName,\n                            lineNumber: lineNumber,\n                            columnNumber: columnNumber\n                        }));\n                    } else {\n                        resolve(stackframe);\n                    }\n                }, reject)['catch'](reject);\n            }.bind(this));\n        };\n\n        /**\n         * Given a StackFrame, seek source-mapped location and return new enhanced StackFrame.\n         *\n         * @param {StackFrame} stackframe\n         * @returns {Promise} that resolves with enhanced StackFrame.\n         */\n        this.getMappedLocation = function StackTraceGPS$$getMappedLocation(stackframe) {\n            return new Promise(function(resolve, reject) {\n                _ensureSupportedEnvironment();\n                _ensureStackFrameIsLegit(stackframe);\n\n                var sourceCache = this.sourceCache;\n                var fileName = stackframe.fileName;\n                this._get(fileName).then(function(source) {\n                    var sourceMappingURL = _findSourceMappingURL(source);\n                    var isDataUrl = sourceMappingURL.substr(0, 5) === 'data:';\n                    var defaultSourceRoot = fileName.substring(0, fileName.lastIndexOf('/') + 1);\n\n                    if (sourceMappingURL[0] !== '/' && !isDataUrl && !(/^https?:\\/\\/|^\\/\\//i).test(sourceMappingURL)) {\n                        sourceMappingURL = defaultSourceRoot + sourceMappingURL;\n                    }\n\n                    return this._getSourceMapConsumer(sourceMappingURL, defaultSourceRoot)\n                        .then(function(sourceMapConsumer) {\n                            return _extractLocationInfoFromSourceMapSource(stackframe, sourceMapConsumer, sourceCache)\n                                .then(resolve)['catch'](function() {\n                                    resolve(stackframe);\n                                });\n                        });\n                }.bind(this), reject)['catch'](reject);\n            }.bind(this));\n        };\n    };\n}));\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n/*tslint:disable:no-use-before-declare*/\n\nimport { Observable, Operator, Subscriber } from \"rxjs\";\n\nexport function hide<T>(): (source: Observable<T>) => Observable<T> {\n\n    return function hideOperation(source: Observable<T>): Observable<T> {\n\n        return source.lift(new HideOperator());\n    };\n}\n\nclass HideOperator<T> implements Operator<T, T> {\n\n    // It would be better if this were a symbol. However ...\n    // error TS1166: A computed property name in a class property declaration must directly refer to a built-in symbol.\n    readonly hide = true;\n\n    constructor() {}\n\n    call(subscriber: Subscriber<T>, source: any): any {\n\n        return source.subscribe(subscriber);\n    }\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n/*tslint:disable:no-use-before-declare*/\n\nimport { Observable, Operator, Subscriber } from \"rxjs\";\n\nexport function tag<T>(tag: string): (source: Observable<T>) => Observable<T> {\n\n    return function tagOperation(source: Observable<T>): Observable<T> {\n\n        return source.lift(new TagOperator(tag));\n    };\n}\n\nclass TagOperator<T> implements Operator<T, T> {\n\n    // It would be better if this were a symbol. However ...\n    // error TS1166: A computed property name in a class property declaration must directly refer to a built-in symbol.\n    readonly tag: string;\n\n    constructor(tag: string) {\n\n        this.tag = tag;\n    }\n\n    call(subscriber: Subscriber<T>, source: any): any {\n\n        return source.subscribe(subscriber);\n    }\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n/*tslint:disable:rxjs-no-sharereplay*/\n\nimport { parse, StackFrame } from \"error-stack-parser\";\nimport { defer, Observable, of } from \"rxjs\";\nimport { shareReplay } from \"rxjs/operators\";\n\n// @ts-ignore: Could not find a declaration file for module 'stacktrace-gps'.\nimport * as StackTraceGps from \"stacktrace-gps\";\n\nimport { hide } from \"../operators\";\nimport { SubscriberRef } from \"../subscription-ref\";\nimport { BasePlugin } from \"./plugin\";\n\nconst stackTraceRefSymbol = Symbol(\"stackTraceRef\");\n\nexport interface StackTraceRef {\n    mappedStackTrace: Observable<StackFrame[]>;\n    stackTrace: StackFrame[];\n}\n\nexport function getMappedStackTrace(ref: SubscriberRef): Observable<StackFrame[]> {\n\n    const stackTraceRef = getStackTraceRef(ref);\n    return stackTraceRef ? stackTraceRef.mappedStackTrace : of([]);\n}\n\nexport function getStackTrace(ref: SubscriberRef): StackFrame[] {\n\n    const stackTraceRef = getStackTraceRef(ref);\n    return stackTraceRef ? stackTraceRef.stackTrace : [];\n}\n\nexport function getStackTraceRef(ref: SubscriberRef): StackTraceRef {\n\n    return ref[stackTraceRefSymbol];\n}\n\nfunction setStackTraceRef(ref: SubscriberRef, value: StackTraceRef): StackTraceRef {\n\n    ref[stackTraceRefSymbol] = value;\n    return value;\n}\n\nexport class StackTracePlugin extends BasePlugin {\n\n    private sourceCache_: object;\n    private sourceMaps_: boolean;\n\n    constructor({ sourceMaps = false }: { sourceMaps?: boolean } = {}) {\n\n        super(\"stackTrace\");\n\n        this.sourceCache_ = {};\n        this.sourceMaps_ = sourceMaps;\n    }\n\n    beforeSubscribe(ref: SubscriberRef): void {\n\n        const stackFrames = this.getStackFrames_();\n\n        if (this.sourceMaps_ && (typeof window !== \"undefined\") && (window.location.protocol !== \"file:\")) {\n            setStackTraceRef(ref, {\n                mappedStackTrace: defer(() => {\n                    const gps = new StackTraceGps({ sourceCache: this.sourceCache_ });\n                    return Promise.all(stackFrames.map(stackFrame => gps\n                        .pinpoint(stackFrame)\n                        .catch(() => stackFrame)\n                    ));\n                }).pipe(\n                    shareReplay(1),\n                    hide()\n                ),\n                stackTrace: stackFrames\n            });\n        } else {\n            setStackTraceRef(ref, {\n                mappedStackTrace: of(stackFrames).pipe(hide()),\n                stackTrace: stackFrames\n            });\n        }\n    }\n\n    teardown(): void {\n\n        this.sourceCache_ = {};\n    }\n\n    private getStackFrames_(): StackFrame[] {\n\n        /* tslint:disable:no-implicit-any-catch */\n        try {\n            throw new Error();\n        } catch (error) {\n            let core = true;\n            return parse(error).filter(stackFrame => {\n                const result = !core;\n                if (/coreSubscribe_/.test(stackFrame.functionName || \"\")) {\n                    core = false;\n                }\n                return result;\n            });\n        }\n    }\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nimport { Logger, PartialLogger, toLogger } from \"../logger\";\nimport { Spy } from \"../spy-interface\";\nimport { SubscriptionRef } from \"../subscription-ref\";\nimport { inferType } from \"../util\";\nimport { BasePlugin } from \"./plugin\";\nimport { getStackTrace } from \"./stack-trace-plugin\";\n\nconst cycleDetectedSymbol = Symbol(\"cycleDetected\");\nconst cycleWarnedSymbol = Symbol(\"cycleWarned\");\n\nexport class CyclePlugin extends BasePlugin {\n\n    private logger_: Logger;\n    private nexts_: SubscriptionRef[] = [];\n    private spy_: Spy;\n\n    constructor(spy: Spy, partialLogger: PartialLogger) {\n\n        super(\"cycle\");\n\n        this.logger_ = toLogger(partialLogger);\n        this.spy_ = spy;\n    }\n\n    afterNext(ref: SubscriptionRef, value: any): void {\n\n        const { nexts_ } = this;\n        nexts_.pop();\n    }\n\n    beforeNext(ref: SubscriptionRef, value: any): void {\n\n        const { logger_, nexts_, spy_ } = this;\n        const { observable, subscription } = ref;\n\n        if (nexts_.indexOf(ref) !== -1) {\n            if (!subscription[cycleDetectedSymbol]) {\n                subscription[cycleDetectedSymbol] = true;\n                if (nexts_.findIndex(n => n.subscription[cycleWarnedSymbol]) === -1) {\n                    subscription[cycleWarnedSymbol] = true;\n                    const stackFrames = getStackTrace(ref);\n                    if (stackFrames.length === 0) {\n                        spy_.warnOnce(console, \"Stack tracing is not enabled; add the StackTracePlugin before the CyclePlugin.\");\n                    }\n                    const stackTrace = stackFrames.length ? `; subscribed at\\n${stackFrames.join(\"\\n\")}` : \"\";\n                    const type = inferType(observable);\n                    logger_.warn(`Cyclic next detected; type = ${type}; value = ${value}${stackTrace}`);\n                }\n            }\n        }\n        nexts_.push(ref);\n    }\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n/*tslint:disable:no-debugger*/\n\nimport { Match, matches, toString as matchToString } from \"../match\";\nimport { SubscriberRef, SubscriptionRef } from \"../subscription-ref\";\nimport { BasePlugin, Notification } from \"./plugin\";\n\nexport class DebugPlugin extends BasePlugin {\n\n    private notifications_: Notification[];\n    private matcher_: (ref: SubscriberRef, notification: Notification) => boolean;\n\n    constructor(match: Match, notifications: Notification[]) {\n\n        super(`debug(${matchToString(match)})`);\n\n        this.notifications_ = notifications;\n        this.matcher_ = (ref: SubscriberRef, notification: Notification) => matches(ref, match) && (this.notifications_.indexOf(notification) !== -1);\n    }\n\n    beforeComplete(ref: SubscriptionRef): void {\n\n        const { matcher_ } = this;\n\n        if (matcher_(ref, \"complete\")) {\n            debugger;\n        }\n    }\n\n    beforeError(ref: SubscriptionRef, error: any): void {\n\n        const { matcher_ } = this;\n\n        if (matcher_(ref, \"error\")) {\n            debugger;\n        }\n    }\n\n    beforeNext(ref: SubscriptionRef, value: any): void {\n\n        const { matcher_ } = this;\n\n        if (matcher_(ref, \"next\")) {\n            debugger;\n        }\n    }\n\n    beforeSubscribe(ref: SubscriberRef): void {\n\n        const { matcher_ } = this;\n\n        if (matcher_(ref, \"subscribe\")) {\n            debugger;\n        }\n    }\n\n    beforeUnsubscribe(ref: SubscriptionRef): void {\n\n        const { matcher_ } = this;\n\n        if (matcher_(ref, \"unsubscribe\")) {\n            debugger;\n        }\n    }\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nimport { SubscriberRef, SubscriptionRef } from \"../subscription-ref\";\nimport { BasePlugin, Notification } from \"./plugin\";\n\nconst graphRefSymbol = Symbol(\"graphRef\");\n\nexport interface GraphRef {\n    depth: number;\n    flattened: boolean;\n    flattenings: SubscriptionRef[];\n    flatteningsFlushed: number;\n    link: GraphRef;\n    rootSink: SubscriptionRef | undefined;\n    sentinel: GraphRef;\n    sink: SubscriptionRef | undefined;\n    sources: SubscriptionRef[];\n    sourcesFlushed: number;\n}\n\nexport function getGraphRef(ref: SubscriberRef): GraphRef {\n\n    return ref[graphRefSymbol];\n}\n\nfunction setGraphRef(ref: SubscriberRef, value: GraphRef): GraphRef {\n\n    ref[graphRefSymbol] = value;\n    return value;\n}\n\nexport class GraphPlugin extends BasePlugin {\n\n    private flushIntervalId_: any;\n    private flushQueue_: { due: number, flush: Function }[];\n    private keptDuration_: number;\n    private notifications_: {\n        notification: Notification;\n        ref: SubscriberRef;\n    }[];\n    private sentinel_: GraphRef;\n\n    constructor({\n        keptDuration = 30000\n    }: {\n        keptDuration?: number\n    } = {}) {\n\n        super(\"graph\");\n\n        this.flushIntervalId_ = undefined;\n        this.flushQueue_ = [];\n        this.keptDuration_ = keptDuration;\n        this.notifications_ = [];\n        this.sentinel_ = {\n            depth: 0,\n            flattened: false,\n            flattenings: [],\n            flatteningsFlushed: 0,\n            link: undefined!,\n            rootSink: undefined,\n            sentinel: undefined!,\n            sink: undefined,\n            sources: [],\n            sourcesFlushed: 0\n        };\n        this.sentinel_.link = this.sentinel_;\n        this.sentinel_.sentinel = this.sentinel_;\n    }\n\n    afterNext(ref: SubscriptionRef, value: any): void {\n\n        const { notifications_ } = this;\n        notifications_.pop();\n    }\n\n    afterSubscribe(ref: SubscriptionRef): void {\n\n        const { notifications_ } = this;\n        notifications_.pop();\n    }\n\n    afterUnsubscribe(ref: SubscriptionRef): void {\n\n        const { notifications_ } = this;\n        notifications_.pop();\n        this.flush_(ref);\n    }\n\n    beforeNext(ref: SubscriptionRef, value: any): void {\n\n        const { notifications_ } = this;\n        notifications_.push({ notification: \"next\", ref });\n    }\n\n    beforeSubscribe(ref: SubscriberRef): void {\n\n        const { notifications_, sentinel_ } = this;\n\n        const graphRef = setGraphRef(ref, {\n            depth: 1,\n            flattened: false,\n            flattenings: [],\n            flatteningsFlushed: 0,\n            link: sentinel_,\n            rootSink: undefined,\n            sentinel: sentinel_,\n            sink: undefined,\n            sources: [],\n            sourcesFlushed: 0\n        });\n\n        const length = notifications_.length;\n        if ((length > 0) && (notifications_[length - 1].notification === \"next\")) {\n\n            const { ref: sinkRef } = notifications_[length - 1];\n            const sinkGraphRef = getGraphRef(sinkRef);\n            sinkGraphRef.flattenings.push(ref as SubscriptionRef);\n            graphRef.link = sinkGraphRef;\n            graphRef.flattened = true;\n            graphRef.rootSink = sinkGraphRef.rootSink || sinkRef as SubscriptionRef;\n            graphRef.sink = sinkRef as SubscriptionRef;\n\n        } else {\n            for (let n = length - 1; n > -1; --n) {\n                if (notifications_[n].notification === \"subscribe\") {\n\n                    const { ref: sinkRef } = notifications_[length - 1];\n                    const sinkGraphRef = getGraphRef(sinkRef);\n                    sinkGraphRef.sources.push(ref as SubscriptionRef);\n                    graphRef.depth = sinkGraphRef.depth + 1;\n                    graphRef.link = sinkGraphRef;\n                    graphRef.rootSink = sinkGraphRef.rootSink || sinkRef as SubscriptionRef;\n                    graphRef.sink = sinkRef as SubscriptionRef;\n\n                    break;\n                }\n            }\n        }\n\n        if (graphRef.link === graphRef.sentinel) {\n            graphRef.sentinel.sources.push(ref as SubscriptionRef);\n        }\n\n        notifications_.push({ notification: \"subscribe\", ref });\n    }\n\n    beforeUnsubscribe(ref: SubscriptionRef): void {\n\n        const { notifications_ } = this;\n        notifications_.push({ notification: \"unsubscribe\", ref });\n    }\n\n    teardown(): void {\n\n        if (this.flushIntervalId_ !== undefined) {\n            clearInterval(this.flushIntervalId_);\n            this.flushIntervalId_ = undefined;\n        }\n    }\n\n    private flush_(ref: SubscriptionRef): void {\n\n        const graphRef = getGraphRef(ref);\n        const { flattenings, sources } = graphRef;\n\n        if (!ref.unsubscribed || !flattenings.every(ref => ref.unsubscribed) || !sources.every(ref => ref.unsubscribed)) {\n            return;\n        }\n\n        const { keptDuration_ } = this;\n        const { link } = graphRef;\n\n        const flush = () => {\n            const { flattenings, sources } = link;\n            const flatteningIndex = flattenings.indexOf(ref);\n            if (flatteningIndex !== -1) {\n                flattenings.splice(flatteningIndex, 1);\n                ++link.flatteningsFlushed;\n            }\n            const sourceIndex = sources.indexOf(ref);\n            if (sourceIndex !== -1) {\n                sources.splice(sourceIndex, 1);\n                ++link.sourcesFlushed;\n            }\n        };\n\n        if (keptDuration_ === 0) {\n            flush();\n        } else if ((keptDuration_ > 0) && (keptDuration_ < Infinity)) {\n            this.flushQueue_.push({ due: Date.now() + keptDuration_, flush });\n            if (this.flushIntervalId_ === undefined) {\n                this.flushIntervalId_ = setInterval(() => {\n                    const now = Date.now();\n                    this.flushQueue_ = this.flushQueue_.filter(q => {\n                        if (q.due > now) { return true; }\n                        q.flush();\n                        return false;\n                    });\n                    if (this.flushQueue_.length === 0) {\n                        clearInterval(this.flushIntervalId_);\n                        this.flushIntervalId_ = undefined;\n                    }\n                }, keptDuration_);\n            }\n        }\n    }\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nimport { merge, NEVER, Observable } from \"rxjs\";\nimport { Match, matches, toString as matchToString } from \"../match\";\nimport { SubscriptionRef } from \"../subscription-ref\";\nimport { BasePlugin } from \"./plugin\";\n\nexport class LetPlugin extends BasePlugin {\n\n    private match_: Match;\n    private select_: (source: Observable<any>) => Observable<any>;\n\n    constructor(\n        match: Match,\n        select: (source: Observable<any>) => Observable<any>,\n        { complete = true }: { complete?: boolean } = {}\n    ) {\n\n        super(`let(${matchToString(match)})`);\n\n        this.match_ = match;\n        this.select_ = complete ? select : source => merge(NEVER, select(source));\n    }\n\n    select(ref: SubscriptionRef): ((source: Observable<any>) => Observable<any>) | undefined {\n\n        const { match_, select_ } = this;\n\n        if (matches(ref, match_)) {\n            return select_;\n        }\n        return undefined;\n    }\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nimport { Auditor } from \"../auditor\";\nimport { defaultLogger, Logger, PartialLogger, toLogger } from \"../logger\";\nimport { Match, matches, read, toString as matchToString } from \"../match\";\nimport { Spy } from \"../spy-interface\";\nimport { SubscriberRef, SubscriptionRef } from \"../subscription-ref\";\nimport { inferType } from \"../util\";\nimport { BasePlugin, Notification } from \"./plugin\";\n\nexport class LogPlugin extends BasePlugin {\n\n    private auditor_: Auditor;\n    private logger_: Logger;\n    private notificationMatch_: Match;\n    private tagMatch_: Match;\n\n    constructor(\n        spy: Spy,\n        tagMatch: Match,\n        partialLogger?: PartialLogger\n    );\n    constructor(\n        spy: Spy,\n        tagMatch: Match,\n        notifcationMatch: Match,\n        partialLogger?: PartialLogger\n    );\n    constructor(\n        spy: Spy,\n        tagMatch: Match,\n        ...args: any[]\n    ) {\n\n        super(`log(${matchToString(tagMatch)})`);\n\n        this.auditor_ = spy.auditor;\n        this.tagMatch_ = tagMatch;\n\n        const defaultMatch = /.+/;\n        switch (args.length) {\n        case 0:\n            this.notificationMatch_ = defaultMatch;\n            this.logger_ = toLogger(defaultLogger);\n            break;\n        case 1:\n            if (typeof args[0] === \"function\") {\n                this.notificationMatch_ = args[0];\n                this.logger_ = toLogger(defaultLogger);\n            } else {\n                this.notificationMatch_ = defaultMatch;\n                this.logger_ = toLogger(args[0]);\n            }\n            break;\n        default:\n            this.notificationMatch_ = args[0];\n            this.logger_ = toLogger(args[1]);\n            break;\n        }\n    }\n\n    beforeComplete(ref: SubscriptionRef): void {\n\n        this.log_(ref, \"complete\");\n    }\n\n    beforeError(ref: SubscriptionRef, error: any): void {\n\n        this.log_(ref, \"error\", error);\n    }\n\n    beforeNext(ref: SubscriptionRef, value: any): void {\n\n        this.log_(ref, \"next\", value);\n    }\n\n    beforeSubscribe(ref: SubscriberRef): void {\n\n        this.log_(ref, \"subscribe\");\n    }\n\n    beforeUnsubscribe(ref: SubscriptionRef): void {\n\n        this.log_(ref, \"unsubscribe\");\n    }\n\n    private log_(\n        ref: SubscriberRef,\n        notification: Notification,\n        param?: any\n    ): void {\n\n        const { auditor_, notificationMatch_, tagMatch_ } = this;\n\n        if (matches(ref, tagMatch_) && matches(ref, notificationMatch_, notification)) {\n\n            auditor_.audit(this, (ignored) => {\n\n                const { logger_ } = this;\n                const { observable } = ref;\n                const tag = read(observable);\n                const type = inferType(observable);\n\n                const matching = (typeof tagMatch_ === \"string\") ? \"\" : `; matching ${matchToString(tagMatch_)}`;\n                const audit  = (ignored === 0) ? \"\" : `; ignored ${ignored}`;\n                const description = tag ?\n                    `Tag = ${tag}; notification = ${notification}${matching}${audit}` :\n                    `Type = ${type}; notification = ${notification}${matching}${audit}`;\n\n                switch (notification) {\n                case \"error\":\n                    logger_.error(`${description}; error =`, param);\n                    break;\n                case \"next\":\n                    logger_.log(`${description}; value =`, param);\n                    break;\n                default:\n                    logger_.log(description);\n                    break;\n                }\n            });\n        }\n    }\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nimport {\n    Notification,\n    Observable,\n    Subject,\n    Subscription\n} from \"rxjs\";\n\nimport { dematerialize, materialize } from \"rxjs/operators\";\nimport { defaultLogger, PartialLogger, toLogger } from \"../logger\";\nimport { Match, matches, read, toString as matchToString } from \"../match\";\nimport { hide } from \"../operators\";\nimport { Teardown } from \"../spy-interface\";\nimport { SubscriptionRef } from \"../subscription-ref\";\nimport { BasePlugin } from \"./plugin\";\n\nexport interface DeckStats {\n    notifications: number;\n    paused: boolean;\n}\n\ninterface State {\n    notifications_: Notification<any>[];\n    subject_: Subject<Notification<any>>;\n    subscription_: Subscription | undefined;\n    tag_: string | undefined;\n}\n\nexport class Deck {\n\n    public teardown: Teardown | undefined;\n\n    private match_: Match;\n    private paused_ = true;\n    private states_ = new Map<Observable<any>, State>();\n    private stats_: Subject<DeckStats>;\n\n    constructor(match: Match) {\n\n        this.match_ = match;\n        this.stats_ = new Subject<DeckStats>();\n    }\n\n    get stats(): Observable<DeckStats> {\n\n        return this.stats_.asObservable();\n    }\n\n    get paused(): boolean {\n\n        return this.paused_;\n    }\n\n    clear(predicate: (notification: Notification<any>) => boolean = () => true): void {\n\n        this.states_.forEach((state) => {\n            state.notifications_ = state.notifications_.filter((notification) => !predicate(notification));\n        });\n        this.broadcast_();\n    }\n\n    log(partialLogger: PartialLogger = defaultLogger): void {\n\n        const logger = toLogger(partialLogger);\n\n        logger.group(`Deck matching ${matchToString(this.match_)}`);\n        logger.log(\"Paused =\", this.paused_);\n        this.states_.forEach((state) => {\n            logger.group(`Observable; tag = ${state.tag_}`);\n            logger.log(\"Notifications =\", state.notifications_);\n            logger.groupEnd();\n        });\n        logger.groupEnd();\n    }\n\n    pause(): void {\n\n        this.paused_ = true;\n        this.broadcast_();\n    }\n\n    resume(): void {\n\n        this.states_.forEach((state) => {\n            while (state.notifications_.length > 0) {\n                state.subject_.next(state.notifications_.shift());\n            }\n        });\n        this.paused_ = false;\n        this.broadcast_();\n    }\n\n    select(ref: SubscriptionRef): (source: Observable<any>) => Observable<any> {\n\n        const { observable } = ref;\n\n        return (source: Observable<any>) => {\n\n            let state = this.states_.get(observable);\n            if (state) {\n                state.subscription_!.unsubscribe();\n            } else {\n                state = {\n                    notifications_: [],\n                    subject_: new Subject<Notification<any>>(),\n                    subscription_: undefined,\n                    tag_: read(observable)\n                };\n                this.states_.set(observable, state);\n            }\n\n            state.subscription_ = source.pipe(\n                materialize(),\n                hide()\n            ).subscribe({\n                next: (notification: any) => {\n                    if (this.paused_) {\n                        state!.notifications_.push(notification);\n                    } else {\n                        state!.subject_.next(notification);\n                    }\n                    this.broadcast_();\n                }\n            });\n            this.broadcast_();\n\n            return state.subject_.asObservable().pipe(\n                dematerialize()\n            );\n        };\n    }\n\n    skip(): void {\n\n        this.states_.forEach((state) => {\n            if (state.notifications_.length > 0) {\n                state.notifications_.shift();\n            }\n        });\n        this.broadcast_();\n    }\n\n    step(): void {\n\n        this.states_.forEach((state) => {\n            if (state.notifications_.length > 0) {\n                state.subject_.next(state.notifications_.shift());\n            }\n        });\n        this.broadcast_();\n    }\n\n    unsubscribe(): void {\n        this.states_.forEach((state) => {\n            if (state.subscription_) {\n                state.subscription_.unsubscribe();\n                state.subscription_ = undefined;\n            }\n        });\n        this.broadcast_();\n    }\n\n    private broadcast_(): void {\n\n        const { paused_, states_, stats_ } = this;\n\n        let notifications = 0;\n        states_.forEach((state) => notifications += state.notifications_.length);\n\n        stats_.next({\n            notifications,\n            paused: paused_\n        });\n    }\n}\n\nexport class PausePlugin extends BasePlugin {\n\n    private match_: Match;\n    private deck_: Deck;\n\n    constructor(match: Match) {\n\n        super(`pause(${matchToString(match)})`);\n\n        this.deck_ = new Deck(match);\n        this.match_ = match;\n    }\n\n    get deck(): Deck {\n\n        const { deck_ } = this;\n        return deck_;\n    }\n\n    get match(): Match {\n\n        const { match_ } = this;\n        return match_;\n    }\n\n    select(ref: SubscriptionRef): ((source: Observable<any>) => Observable<any>) | undefined {\n\n        const { deck_, match_ } = this;\n\n        if (matches(ref, match_)) {\n            return deck_.select(ref);\n        }\n        return undefined;\n    }\n\n    teardown(): void {\n\n        const { deck_ } = this;\n\n        if (deck_) {\n            deck_.resume();\n            deck_.unsubscribe();\n        }\n    }\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nimport { StackFrame } from \"error-stack-parser\";\nimport { forkJoin, Observable, of, Subscriber, Subscription } from \"rxjs\";\nimport { mapTo } from \"rxjs/operators\";\nimport { identify } from \"../identify\";\nimport { read } from \"../match\";\nimport { hide } from \"../operators\";\nimport { Spy } from \"../spy-interface\";\nimport { SubscriberRef, SubscriptionRef } from \"../subscription-ref\";\nimport { inferPath, inferType } from \"../util\";\nimport { getGraphRef, GraphRef } from \"./graph-plugin\";\nimport { BasePlugin } from \"./plugin\";\nimport { getMappedStackTrace, getStackTrace } from \"./stack-trace-plugin\";\n\nconst snapshotRefSymbol = Symbol(\"snapshotRef\");\n\nexport interface SnapshotRef {\n    complete: boolean;\n    error: any;\n    tick: number;\n    timestamp: number;\n    unsubscribed: boolean;\n    values: { tick: number; timestamp: number; value: any; }[];\n    valuesFlushed: number;\n}\n\nexport function getSnapshotRef(ref: SubscriberRef): SnapshotRef {\n\n    return ref[snapshotRefSymbol];\n}\n\nfunction mapStackTraces(observableSnapshots: ObservableSnapshot[]): Observable<void>;\nfunction mapStackTraces(subscriberSnapshots: SubscriberSnapshot[]): Observable<void>;\nfunction mapStackTraces(subscriptionSnapshots: SubscriptionSnapshot[]): Observable<void>;\nfunction mapStackTraces(snapshots: any[]): Observable<void> {\n\n    const observables: Observable<any>[] = [of(null)];\n\n    snapshots.forEach(snapshot => {\n\n        if (snapshot.subscriptions) {\n            snapshot.subscriptions.forEach(mapSubscriptionStackTraces);\n        } else {\n            mapSubscriptionStackTraces(snapshot);\n        }\n    });\n    return forkJoin(observables).pipe(\n        mapTo(undefined),\n        hide()\n    );\n\n    function mapSubscriptionStackTraces(subscriptionSnapshot: SubscriptionSnapshot): void {\n\n        observables.push(subscriptionSnapshot.mappedStackTrace);\n        if (subscriptionSnapshot.rootSink) {\n            observables.push(subscriptionSnapshot.rootSink.mappedStackTrace);\n        }\n    }\n}\n\nfunction setSnapshotRef(ref: SubscriberRef, value: SnapshotRef): SnapshotRef {\n\n    ref[snapshotRefSymbol] = value;\n    return value;\n}\n\nexport interface Snapshot {\n    observables: Map<Observable<any>, ObservableSnapshot>;\n    subscribers: Map<Subscriber<any>, SubscriberSnapshot>;\n    subscriptions: Map<Subscription, SubscriptionSnapshot>;\n    tick: number;\n    mapStackTraces(observableSnapshots: ObservableSnapshot[]): Observable<void>;\n    mapStackTraces(subscriberSnapshots: SubscriberSnapshot[]): Observable<void>;\n    mapStackTraces(subscriptionSnapshots: SubscriptionSnapshot[]): Observable<void>;\n}\n\nexport interface ObservableSnapshot {\n    id: string;\n    observable: Observable<any>;\n    path: string;\n    subscriptions: Map<Subscription, SubscriptionSnapshot>;\n    tag: string | undefined;\n    tick: number;\n    type: string;\n}\n\nexport interface SubscriberSnapshot {\n    id: string;\n    subscriber: Subscriber<any>;\n    subscriptions: Map<Subscription, SubscriptionSnapshot>;\n    tick: number;\n    values: { tick: number; timestamp: number; value: any; }[];\n    valuesFlushed: number;\n}\n\nexport interface SubscriptionSnapshot {\n    complete: boolean;\n    error: any;\n    flattenings: Map<Subscription, SubscriptionSnapshot>;\n    flatteningsFlushed: number;\n    id: string;\n    mappedStackTrace: Observable<StackFrame[]>;\n    observable: Observable<any>;\n    rootSink: SubscriptionSnapshot | undefined;\n    sink: SubscriptionSnapshot | undefined;\n    sources: Map<Subscription, SubscriptionSnapshot>;\n    sourcesFlushed: number;\n    stackTrace: StackFrame[];\n    subscriber: Subscriber<any>;\n    subscription: Subscription;\n    tick: number;\n    timestamp: number;\n    unsubscribed: boolean;\n}\n\nexport class SnapshotPlugin extends BasePlugin {\n\n    private keptValues_: number;\n    private sentinel_: GraphRef | undefined;\n    private spy_: Spy;\n\n    constructor(spy: Spy, {\n        keptValues = 4\n    }: {\n        keptValues?: number\n    } = {}) {\n\n        super(\"snapshot\");\n\n        this.keptValues_ = keptValues;\n        this.sentinel_ = undefined;\n        this.spy_ = spy;\n    }\n\n    afterUnsubscribe(ref: SubscriptionRef): void {\n\n        const snapshotRef = getSnapshotRef(ref);\n        snapshotRef.tick = this.spy_.tick;\n        snapshotRef.unsubscribed = true;\n    }\n\n    beforeComplete(ref: SubscriptionRef): void {\n\n        const snapshotRef = getSnapshotRef(ref);\n        snapshotRef.tick = this.spy_.tick;\n        snapshotRef.complete = true;\n    }\n\n    beforeError(ref: SubscriptionRef, error: any): void {\n\n        const snapshotRef = getSnapshotRef(ref);\n        snapshotRef.tick = this.spy_.tick;\n        snapshotRef.error = error;\n    }\n\n    beforeNext(ref: SubscriptionRef, value: any): void {\n\n        const tick = this.spy_.tick;\n        const snapshotRef = getSnapshotRef(ref);\n        snapshotRef.tick = tick;\n        snapshotRef.values.push({ tick, timestamp: Date.now(), value });\n\n        const { keptValues_ } = this;\n        const count = snapshotRef.values.length - keptValues_;\n        if (count > 0) {\n            snapshotRef.values.splice(0, count);\n            snapshotRef.valuesFlushed += count;\n        }\n    }\n\n    beforeSubscribe(ref: SubscriberRef): void {\n\n        setSnapshotRef(ref, {\n            complete: false,\n            error: undefined,\n            tick: this.spy_.tick,\n            timestamp: Date.now(),\n            unsubscribed: false,\n            values: [],\n            valuesFlushed: 0\n        });\n\n        const graphRef = getGraphRef(ref);\n        if (graphRef) {\n            this.sentinel_ = graphRef.sentinel;\n        } else {\n            this.spy_.warnOnce(console, \"Graphing is not enabled; add the GraphPlugin before the SnapshotPlugin.\");\n        }\n    }\n\n    snapshotAll({\n        since\n    }: {\n        since?: Snapshot\n    } = {}): Snapshot {\n\n        const observables = new Map<Observable<any>, ObservableSnapshot>();\n        const subscribers = new Map<Subscriber<any>, SubscriberSnapshot>();\n        const subscriptions = new Map<Subscription, SubscriptionSnapshot>();\n\n        const subscriptionRefs = this.getSubscriptionRefs_();\n        subscriptionRefs.forEach((unused, ref) => {\n\n            const { observable, subscriber, subscription } = ref;\n\n            const graphRef = getGraphRef(ref);\n            const { flatteningsFlushed, sourcesFlushed } = graphRef;\n\n            const snapshotRef = getSnapshotRef(ref);\n            const {\n                complete,\n                error,\n                tick,\n                timestamp,\n                unsubscribed,\n                values,\n                valuesFlushed\n            } = snapshotRef;\n\n            const subscriptionSnapshot: SubscriptionSnapshot = {\n                complete,\n                error,\n                flattenings: new Map<Subscription, SubscriptionSnapshot>(),\n                flatteningsFlushed,\n                id: identify(ref),\n                mappedStackTrace: getMappedStackTrace(ref),\n                observable,\n                rootSink: undefined,\n                sink: undefined,\n                sources: new Map<Subscription, SubscriptionSnapshot>(),\n                sourcesFlushed,\n                stackTrace: getStackTrace(ref),\n                subscriber,\n                subscription,\n                tick,\n                timestamp,\n                unsubscribed\n            };\n            subscriptions.set(subscription, subscriptionSnapshot);\n\n            let subscriberSnapshot = subscribers.get(subscriber);\n            if (!subscriberSnapshot) {\n                subscriberSnapshot = {\n                    id: identify(subscriber),\n                    subscriber,\n                    subscriptions: new Map<Subscription, SubscriptionSnapshot>(),\n                    tick,\n                    values: [],\n                    valuesFlushed: 0\n                };\n                subscribers.set(subscriber, subscriberSnapshot);\n            }\n            subscriberSnapshot.subscriptions.set(subscription, subscriptionSnapshot);\n            subscriberSnapshot.tick = Math.max(subscriberSnapshot.tick, tick);\n            subscriberSnapshot.values.push(...values);\n            subscriberSnapshot.valuesFlushed += valuesFlushed;\n\n            let observableSnapshot = observables.get(observable);\n            if (!observableSnapshot) {\n                observableSnapshot = {\n                    id: identify(observable),\n                    observable,\n                    path: inferPath(observable),\n                    subscriptions: new Map<Subscription, SubscriptionSnapshot>(),\n                    tag: read(observable),\n                    tick,\n                    type: inferType(observable)\n                };\n                observables.set(observable, observableSnapshot);\n            }\n            observableSnapshot.subscriptions.set(subscription, subscriptionSnapshot);\n            observableSnapshot.tick = Math.max(observableSnapshot.tick, tick);\n        });\n\n        subscriptionRefs.forEach((unused, ref) => {\n\n            const graphRef = getGraphRef(ref);\n            const subscriptionSnapshot = subscriptions.get(ref.subscription)!;\n\n            if (graphRef.sink) {\n                subscriptionSnapshot.sink = subscriptions.get(graphRef.sink.subscription)!;\n            }\n            if (graphRef.rootSink) {\n                subscriptionSnapshot.rootSink = subscriptions.get(graphRef.rootSink.subscription)!;\n            }\n            graphRef.flattenings.forEach((m) => subscriptionSnapshot.flattenings.set(m.subscription, subscriptions.get(m.subscription)!));\n            graphRef.sources.forEach((s) => subscriptionSnapshot.sources.set(s.subscription, subscriptions.get(s.subscription)!));\n        });\n\n        subscribers.forEach((subscriberSnapshot) => {\n\n            subscriberSnapshot.values.sort((a, b) => a.tick - b.tick);\n        });\n\n        if (since !== undefined) {\n\n            observables.forEach((value, key) => {\n                if (value.tick <= since.tick) {\n                    observables.delete(key);\n                }\n            });\n\n            subscribers.forEach((value, key) => {\n                if (value.tick <= since.tick) {\n                    subscribers.delete(key);\n                }\n            });\n\n            subscriptions.forEach((value, key) => {\n                if (value.tick <= since.tick) {\n                    subscriptions.delete(key);\n                }\n            });\n        }\n\n        return {\n            mapStackTraces,\n            observables,\n            subscribers,\n            subscriptions,\n            tick: this.spy_.tick\n        };\n    }\n\n    snapshotObservable(ref: SubscriptionRef): ObservableSnapshot | undefined {\n\n        const snapshot = this.snapshotAll();\n        return snapshot.observables.get(ref.observable);\n    }\n\n    snapshotSubscriber(ref: SubscriptionRef): SubscriberSnapshot | undefined {\n\n        const snapshot = this.snapshotAll();\n        return snapshot.subscribers.get(ref.subscriber);\n    }\n\n    private addSubscriptionRefs_(ref: SubscriptionRef, map: Map<SubscriptionRef, boolean>): void {\n\n        map.set(ref, true);\n\n        const graphRef = getGraphRef(ref);\n        graphRef.flattenings.forEach((m) => this.addSubscriptionRefs_(m, map));\n        graphRef.sources.forEach((s) => this.addSubscriptionRefs_(s, map));\n    }\n\n    private getSubscriptionRefs_(): Map<SubscriptionRef, boolean> {\n\n        const { sentinel_ } = this;\n        const map = new Map<SubscriptionRef, boolean>();\n\n        if (sentinel_) {\n            sentinel_.sources.forEach(ref => this.addSubscriptionRefs_(ref, map));\n        }\n        return map;\n    }\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nimport { Spy } from \"../spy-interface\";\nimport { SubscriberRef, SubscriptionRef } from \"../subscription-ref\";\nimport { getGraphRef } from \"./graph-plugin\";\nimport { BasePlugin } from \"./plugin\";\n\nexport interface Stats {\n    completes: number;\n    errors: number;\n    flattenedSubscribes: number;\n    leafSubscribes: number;\n    maxDepth: number;\n    nexts: number;\n    rootSubscribes: number;\n    subscribes: number;\n    tick: number;\n    timespan: number;\n    totalDepth: number;\n    unsubscribes: number;\n}\n\nexport class StatsPlugin extends BasePlugin {\n\n    private spy_: Spy;\n    private stats_: Stats;\n    private time_: number;\n\n    constructor(spy: Spy) {\n\n        super(\"stats\");\n\n        this.spy_ = spy;\n        this.stats_ = {\n            completes: 0,\n            errors: 0,\n            flattenedSubscribes: 0,\n            leafSubscribes: 0,\n            maxDepth: 0,\n            nexts: 0,\n            rootSubscribes: 0,\n            subscribes: 0,\n            tick: 0,\n            timespan: 0,\n            totalDepth: 0,\n            unsubscribes: 0\n        };\n        this.time_ = 0;\n    }\n\n    afterSubscribe(ref: SubscriptionRef): void {\n        const { stats_ } = this;\n        const graphRef = getGraphRef(ref);\n        if (graphRef) {\n            const { depth, flattened, flattenings, flatteningsFlushed, rootSink, sources, sourcesFlushed } = graphRef;\n            if (!rootSink) {\n                stats_.rootSubscribes += 1;\n            }\n            if (flattened) {\n                stats_.flattenedSubscribes += 1;\n            }\n            if ((flattenings.length + flatteningsFlushed + sources.length + sourcesFlushed) === 0) {\n                if (stats_.maxDepth < depth) {\n                    stats_.maxDepth = depth;\n                }\n                stats_.leafSubscribes += 1;\n                stats_.totalDepth += depth;\n            }\n        }\n    }\n\n    beforeComplete(ref: SubscriptionRef): void {\n        const { stats_ } = this;\n        ++stats_.completes;\n        this.all_();\n    }\n\n    beforeError(ref: SubscriptionRef, error: any): void {\n        const { stats_ } = this;\n        ++stats_.errors;\n        this.all_();\n    }\n\n    beforeNext(ref: SubscriptionRef, value: any): void {\n        const { stats_ } = this;\n        ++stats_.nexts;\n        this.all_();\n    }\n\n    beforeSubscribe(ref: SubscriberRef): void {\n        const { stats_ } = this;\n        ++stats_.subscribes;\n        this.all_();\n    }\n\n    beforeUnsubscribe(ref: SubscriptionRef): void {\n        const { stats_ } = this;\n        ++stats_.unsubscribes;\n        this.all_();\n    }\n\n    public get stats(): Stats {\n        const { stats_ } = this;\n        return { ...stats_ };\n    }\n\n    private all_(): void {\n        const { spy_, stats_, time_ } = this;\n        if (time_ === 0) {\n            this.time_ = Date.now();\n        } else {\n            stats_.timespan = Date.now() - time_;\n        }\n        stats_.tick = spy_.tick;\n    }\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nexport interface Task {\n    (ignored: number): void;\n}\n\nexport class Auditor {\n\n    private queue_: {\n        ignored: number;\n        source: any;\n        task: Task;\n        timestamp: number;\n    }[] = [];\n    private timeoutId_: any;\n\n    constructor(public readonly duration: number) {}\n\n    audit(source: any, task: Task): void {\n\n        const { duration, queue_ } = this;\n\n        if (duration <= 0) {\n            task(0);\n        } else {\n            const queued = {\n                ignored: 0,\n                source,\n                task,\n                timestamp: Date.now()\n            };\n            const index = queue_.findIndex(q => q.source === source);\n            if (index !== -1) {\n                const { ignored, timestamp } = queue_[index];\n                queued.ignored += ignored + 1;\n                queued.timestamp = timestamp;\n                queue_.splice(index, 1);\n            }\n            queue_.push(queued);\n            this.wait_();\n        }\n    }\n\n    private wait_(): void {\n\n        const { duration, queue_ } = this;\n\n        if ((this.timeoutId_ === undefined) && (queue_.length > 0)) {\n            const queued = queue_[0];\n            this.timeoutId_ = setTimeout(() => {\n\n                const before = Date.now() - duration;\n                while ((queue_.length > 0) && (queue_[0].timestamp <= before)) {\n                    const dequeued = queue_.shift()!;\n                    dequeued.task(dequeued.ignored);\n                }\n                this.timeoutId_ = undefined;\n                this.wait_();\n\n            },  Math.max(0, queued.timestamp + duration - Date.now()));\n        }\n    }\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nimport { Subscription } from \"rxjs\";\n\nimport {\n    Snapshot,\n    SnapshotPlugin,\n    SubscriptionSnapshot\n} from \"./plugin/snapshot-plugin\";\n\nimport { Spy } from \"./spy-interface\";\n\nexport interface Detected {\n    flatteningSubscriptions: SubscriptionSnapshot[];\n    flatteningUnsubscriptions: SubscriptionSnapshot[];\n    subscriptions: SubscriptionSnapshot[];\n    unsubscriptions: SubscriptionSnapshot[];\n}\n\ninterface DetectorRecord {\n    snapshotRecords: SnapshotRecord[];\n}\n\ninterface SnapshotRecord {\n    rootSubscriptions: Map<Subscription, SubscriptionRecord>;\n    snapshot: Snapshot;\n}\n\ninterface SubscriptionRecord {\n    flattenings: Map<Subscription, SubscriptionSnapshot>;\n    subscriptionSnapshot: SubscriptionSnapshot;\n}\n\nexport class Detector {\n\n    private detectorRecords_: Map<string, DetectorRecord>;\n    private snapshotPlugin_: SnapshotPlugin | undefined;\n    private spy_: Spy;\n\n    constructor(spy: Spy) {\n\n        this.detectorRecords_ = new Map<string, DetectorRecord>();\n        this.snapshotPlugin_ = spy.find(SnapshotPlugin);\n        this.spy_ = spy;\n    }\n\n    detect(id: string): Detected | undefined {\n\n        const { detectorRecords_, snapshotPlugin_, spy_ } = this;\n\n        if (!snapshotPlugin_) {\n            spy_.warnOnce(console, \"Snapshotting is not enabled.\");\n            return undefined;\n        }\n\n        let detectorRecord = detectorRecords_.get(id);\n        const snapshotRecord = this.record_(snapshotPlugin_.snapshotAll());\n\n        if (detectorRecord) {\n            detectorRecord.snapshotRecords.push(snapshotRecord);\n        } else {\n            detectorRecord = {\n                snapshotRecords: [snapshotRecord]\n            };\n            detectorRecords_.set(id, detectorRecord);\n        }\n        if (detectorRecord.snapshotRecords.length > 2) {\n            detectorRecord.snapshotRecords.shift();\n        }\n        if (detectorRecord.snapshotRecords.length < 2) {\n            return undefined;\n        }\n\n        const [previous, current] = detectorRecord.snapshotRecords;\n        return this.compare_(id, previous, current);\n    }\n\n    private compare_(id: string, previous: SnapshotRecord, current: SnapshotRecord): Detected | undefined {\n\n        const subscriptions: SubscriptionRecord[] = [];\n        const unsubscriptions: SubscriptionRecord[] = [];\n        const flatteningSubscriptions: SubscriptionSnapshot[] = [];\n        const flatteningUnsubscriptions: SubscriptionSnapshot[] = [];\n\n        const { rootSubscriptions: previousSubscriptions } = previous;\n        const { rootSubscriptions: currentSubscriptions } = current;\n\n        previousSubscriptions.forEach((previous, key) => {\n\n            if (!currentSubscriptions.has(key)) {\n                unsubscriptions.push(previous);\n            }\n        });\n        currentSubscriptions.forEach((current, key) => {\n\n            const previous = previousSubscriptions.get(key);\n            if (previous) {\n\n                const { flattenings: previousFlattenings } = previous;\n                const { flattenings: currentFlattenings } = current;\n\n                previousFlattenings.forEach((flattening, key) => {\n                    if (!currentFlattenings.has(key)) {\n                        flatteningUnsubscriptions.push(flattening);\n                    }\n                });\n                currentFlattenings.forEach((flattening, key) => {\n                    if (!previousFlattenings.has(key)) {\n                        flatteningSubscriptions.push(flattening);\n                    }\n                });\n            } else {\n                subscriptions.push(current);\n            }\n        });\n\n        if (\n            flatteningSubscriptions.length === 0 &&\n            flatteningUnsubscriptions.length === 0 &&\n            subscriptions.length === 0 &&\n            unsubscriptions.length === 0\n        ) {\n            return undefined;\n        }\n\n        return {\n            flatteningSubscriptions,\n            flatteningUnsubscriptions,\n            subscriptions: subscriptions.map((s) => s.subscriptionSnapshot),\n            unsubscriptions: unsubscriptions.map((s) => s.subscriptionSnapshot)\n        };\n    }\n\n    private findFlatteningSubscriptions_(\n        snapshot: Snapshot,\n        subscriptionRecord: SubscriptionRecord\n    ): void {\n\n        const { flattenings, subscriptionSnapshot } = subscriptionRecord;\n\n        snapshot.subscriptions.forEach((s) => {\n            if (s.rootSink === subscriptionSnapshot) {\n                s.flattenings.forEach((f) => {\n                    const { subscription } = f;\n                    if (!subscription.closed) {\n                        flattenings.set(subscription, f);\n                    }\n                });\n            }\n        });\n    }\n\n    private findRootSubscriptions_(\n        snapshot: Snapshot,\n        rootSubscriptions: Map<Subscription, SubscriptionRecord>\n    ): void {\n\n        snapshot.observables.forEach((observableSnapshot) => {\n            observableSnapshot.subscriptions.forEach((subscriptionSnapshot) => {\n                const { complete, error, sink, subscription } = subscriptionSnapshot;\n                if (!complete && !error && !sink && !subscription.closed) {\n                    const subscriptionRecord = {\n                        flattenings: new Map<Subscription, SubscriptionSnapshot>(),\n                        subscriptionSnapshot\n                    };\n                    this.findFlatteningSubscriptions_(snapshot, subscriptionRecord);\n                    rootSubscriptions.set(subscription, subscriptionRecord);\n                }\n            });\n        });\n    }\n\n    private record_(snapshot: Snapshot): SnapshotRecord {\n\n        const rootSubscriptions = new Map<Subscription, SubscriptionRecord>();\n        this.findRootSubscriptions_(snapshot, rootSubscriptions);\n\n        return { rootSubscriptions, snapshot };\n    }\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nimport { Observable } from \"rxjs\";\n\nexport function hidden<T>(observable: Observable<T>): boolean {\n\n    const operator = observable[\"operator\"];\n    return Boolean(operator && operator[\"hide\"]);\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nimport { detect } from \"./detect\";\nimport { defaultLogger, toLogger } from \"./logger\";\nimport { PausePlugin } from \"./plugin\";\nimport { SpyCore } from \"./spy-core\";\nimport { inferPath, inferType } from \"./util\";\n\nexport function wrap(\n    core: SpyCore,\n    deprecation: () => void = () => {}\n): any {\n\n    return {\n\n        deck(call?: number): any {\n\n            deprecation();\n            const pausePlugins = core.findAll(PausePlugin);\n            if (call === undefined) {\n                const logger = toLogger(defaultLogger);\n                logger.group(`${pausePlugins.length} Deck(s)`);\n                pausePlugins.forEach((pausePlugin, index) => logger.log(`${index + 1} pause(${pausePlugin.name})`));\n                logger.groupEnd();\n            } else {\n                const pausePlugin = pausePlugins[call - 1];\n                return pausePlugin ? pausePlugin.deck : undefined;\n            }\n        },\n\n        debug(...args: any[]): void {\n\n            deprecation();\n            core.debug.apply(core, args);\n        },\n\n        detect(id: string = \"\"): void {\n\n            deprecation();\n            detect(id);\n        },\n\n        flush(): void {\n\n            deprecation();\n            core.flush();\n        },\n\n        inferPath,\n        inferType,\n\n        let(...args: any[]): void {\n\n            deprecation();\n            core.let.apply(core, args);\n        },\n\n        log(...args: any[]): void {\n\n            deprecation();\n            core.log.apply(core, args);\n        },\n\n        maxLogged(...args: any[]): void {\n\n            deprecation();\n            core.maxLogged.apply(core, args);\n        },\n\n        pause(...args: any[]): any {\n\n            deprecation();\n            return core.pause.apply(core, args);\n        },\n\n        query(...args: any[]): void {\n\n            deprecation();\n            core.query.apply(core, args);\n        },\n\n        show(...args: any[]): void {\n\n            deprecation();\n            core.show.apply(core, args);\n        },\n\n        stats(): void {\n\n            deprecation();\n            core.stats();\n        },\n\n        undo(...args: any[]): void {\n\n            if (args.length === 0) {\n                const logger = toLogger(defaultLogger);\n                logger.group(`${core.undos.length} undo(s)`);\n                core.undos.forEach((undo, index) => logger.log(`${index + 1} ${undo.name}`));\n                logger.groupEnd();\n            } else {\n                args\n                    .map((at) => core.undos[at - 1])\n                    .filter(Boolean)\n                    .forEach((undo) => core.unplug(undo));\n            }\n        }\n    };\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nimport {\n    BehaviorSubject,\n    Observable,\n    Subject,\n    Subscription\n} from \"rxjs\";\n\nimport { Auditor } from \"./auditor\";\nimport { hook } from \"./detect\";\nimport { Detector } from \"./detector\";\nimport { hidden } from \"./hidden\";\nimport { identify } from \"./identify\";\nimport { defaultLogger, Logger, PartialLogger, toLogger } from \"./logger\";\nimport { Match, matches, toString as matchToString } from \"./match\";\nimport { hide } from \"./operators\";\n\nimport {\n    CyclePlugin,\n    DebugPlugin,\n    Deck,\n    GraphPlugin,\n    LetPlugin,\n    LogPlugin,\n    Notification,\n    ObservableSnapshot,\n    PausePlugin,\n    Plugin,\n    SnapshotPlugin,\n    StackTracePlugin,\n    StatsPlugin,\n    SubscriberSnapshot,\n    SubscriptionSnapshot\n} from \"./plugin\";\n\nimport { wrap } from \"./spy-console\";\nimport { Ctor, Options, Spy, Teardown } from \"./spy-interface\";\nimport { SubscriptionRef } from \"./subscription-ref\";\nimport { toSubscriber } from \"./util\";\n\ndeclare const __RX_SPY_VERSION__: string;\n/*tslint:disable-next-line:deprecation*/\nconst observableSubscribe = Observable.prototype.subscribe;\nconst previousWindow: Record<string, any> = {};\n\nexport class SpyCore implements Spy {\n\n    private static spy_: SpyCore | undefined = undefined;\n\n    private auditor_: Auditor;\n    private defaultLogger_: PartialLogger;\n    private maxLogged_ = 20;\n    private plugins_: Plugin[];\n    private pluginsSubject_: BehaviorSubject<Plugin[]>;\n    private teardown_: Teardown | undefined;\n    private tick_: number;\n    private undos_: Plugin[];\n    private warned_: { [key: string]: boolean };\n\n    constructor(options: {\n        [key: string]: any,\n        audit?: number;\n        defaultLogger?: PartialLogger,\n        defaultPlugins?: boolean,\n        global?: string,\n        plugins?: Plugin[],\n        warning?: boolean\n    } = {}) {\n\n        if (SpyCore.spy_) {\n            throw new Error(\"Already spying on Observable.prototype.subscribe.\");\n        }\n        if (options.warning) {\n            /*tslint:disable-next-line:no-console*/\n            console.warn(\"Spying on Observable.prototype.subscribe.\");\n        }\n\n        SpyCore.spy_ = this;\n        /*tslint:disable-next-line:deprecation*/\n        Observable.prototype.subscribe = SpyCore.coreSubscribe_;\n\n        this.auditor_ = new Auditor(options.audit || 0);\n        this.defaultLogger_ = options.defaultLogger || defaultLogger;\n        if (options.defaultPlugins ===  false) {\n            this.plugins_ = [];\n        } else {\n            this.plugins_ = [\n                new StackTracePlugin(options as Options),\n                new GraphPlugin(options as Options),\n                new SnapshotPlugin(this, options as Options),\n                new CyclePlugin(this, this.defaultLogger_),\n                new StatsPlugin(this)\n            ];\n        }\n        this.pluginsSubject_ = new BehaviorSubject(this.plugins_);\n        this.tick_ = 0;\n        this.undos_ = [];\n        this.warned_ = {};\n\n        const detector = new Detector(this);\n        hook((id) => this.detect_(id, detector));\n\n        if (typeof window !== \"undefined\") {\n            [options.global || \"spy\", \"rxSpy\"].forEach(key => {\n                if (window.hasOwnProperty(key)) {\n                    this.defaultLogger_.log(`Overwriting window.${key}`);\n                    previousWindow[key] = window[key];\n                }\n                window[key] = wrap(this, key === \"rxSpy\" ?\n                    () => this.warnOnce(this.defaultLogger_, `window.${key} is deprecated and has been renamed; use window.spy instead`) :\n                    undefined\n                );\n            });\n        }\n\n        this.teardown_ = () => {\n\n            if (typeof window !== \"undefined\") {\n                [options.global || \"spy\", \"rxSpy\"].forEach(key => {\n                    if (previousWindow.hasOwnProperty(key)) {\n                        this.defaultLogger_.log(`Restoring window.${key}`);\n                        window[key] = previousWindow[key];\n                        delete previousWindow[key];\n                    } else {\n                        delete window[key];\n                    }\n                });\n            }\n\n            hook(undefined);\n            this.plugins_.forEach((plugin) => plugin.teardown());\n            this.plugins_ = [];\n            this.pluginsSubject_.next(this.plugins_);\n            this.undos_ = [];\n\n            SpyCore.spy_ = undefined;\n            /*tslint:disable-next-line:deprecation*/\n            Observable.prototype.subscribe = observableSubscribe;\n        };\n    }\n\n    get auditor(): Auditor {\n\n        return this.auditor_;\n    }\n\n    get tick(): number {\n\n        return this.tick_;\n    }\n\n    get undos(): Plugin[] {\n\n        return [...this.undos_];\n    }\n\n    get version(): string {\n\n        return __RX_SPY_VERSION__;\n    }\n\n    debug(match: Match, ...notifications: Notification[]): Teardown {\n\n        if (notifications.length === 0) {\n            notifications = [\"complete\", \"error\", \"next\", \"subscribe\", \"unsubscribe\"];\n        }\n        return this.plug(new DebugPlugin(match, notifications));\n    }\n\n    find<T extends Plugin>(ctor: Ctor<T>): T | undefined {\n\n        const found = this.plugins_.find((plugin) => plugin instanceof ctor);\n        return found ? found as T : undefined;\n    }\n\n    findAll<T extends Plugin>(ctor: Ctor<T>): T[];\n    findAll(): Plugin[];\n    findAll<T extends Plugin>(ctor?: Ctor<T>): T[] | Plugin[] {\n\n        return ctor ?\n            this.plugins_.filter((plugin) => plugin instanceof ctor) as T[] :\n            this.plugins_;\n    }\n\n    flush(): void {\n\n        this.plugins_.forEach((plugin) => plugin.flush());\n    }\n\n    let(match: Match, select: (source: Observable<any>) => Observable<any>, options?: Options): Teardown {\n\n        return this.plug(new LetPlugin(match, select, options));\n    }\n\n    log(tagMatch: Match, notificationMatch: Match, partialLogger?: PartialLogger): Teardown;\n    log(tagMatch: Match, partialLogger?: PartialLogger): Teardown;\n    log(partialLogger?: PartialLogger): Teardown;\n    log(...args: any[]): Teardown {\n\n        let tagMatch: Match = /.+/;\n        let notificationMatch: Match = /.+/;\n        let partialLogger: PartialLogger = this.defaultLogger_;\n\n        if (args.length === 1) {\n            const [arg] = args;\n            if (typeof arg.log === \"function\") {\n                partialLogger = arg;\n            } else {\n                tagMatch = arg;\n            }\n        } else if (args.length === 2) {\n            let arg: any;\n            [tagMatch, arg] = args;\n            if (typeof arg.log === \"function\") {\n                partialLogger = arg;\n            } else {\n                notificationMatch = arg;\n            }\n        } else if (args.length === 3) {\n            [tagMatch, notificationMatch, partialLogger] = args;\n        }\n\n        return this.plug(new LogPlugin(this, tagMatch, notificationMatch, partialLogger));\n    }\n\n    maxLogged(value: number): void {\n\n        this.maxLogged_ = Math.max(value, 1);\n    }\n\n    pause(match: Match): Deck {\n\n        const pausePlugin = new PausePlugin(match);\n        const teardown = this.plug(pausePlugin);\n\n        const deck = pausePlugin.deck;\n        deck.teardown = teardown;\n        return deck;\n    }\n\n    plug(...plugins: Plugin[]): Teardown {\n\n        this.plugins_.push(...plugins);\n        this.pluginsSubject_.next(this.plugins_);\n\n        this.undos_.push(...plugins);\n        return () => this.unplug(...plugins);\n    }\n\n    query(\n        predicate: (record: {\n            complete: boolean;\n            error: any;\n            incomplete: boolean;\n            path: string;\n            root: boolean;\n            tag: string | undefined;\n            type: string;\n            unsubscribed: boolean;\n        }) => boolean,\n        partialLogger?: PartialLogger\n    ): void {\n\n        const snapshotPlugin = this.find(SnapshotPlugin);\n        if (!snapshotPlugin) {\n            this.warnOnce(console, \"Snapshotting is not enabled.\");\n            return;\n        }\n\n        const snapshot = snapshotPlugin.snapshotAll();\n        const observableSnapshots = Array.from(snapshot.observables.values());\n        const logger = toLogger(partialLogger || this.defaultLogger_);\n\n        snapshot.mapStackTraces(observableSnapshots).subscribe(() => {\n\n            const found: {\n                observable: ObservableSnapshot;\n                subs: {\n                    subscriber: SubscriberSnapshot;\n                    subscription: SubscriptionSnapshot;\n                }[]\n            }[] = [];\n\n            observableSnapshots.forEach(observableSnapshot => {\n\n                let find: typeof found[0] | undefined;\n\n                const { subscriptions } = observableSnapshot;\n                subscriptions.forEach((subscriptionSnapshot) => {\n\n                    const subscriberSnapshot = snapshot.subscribers.get(subscriptionSnapshot.subscriber);\n                    if (subscriberSnapshot) {\n                        if (predicate({\n                            complete: subscriptionSnapshot.complete,\n                            error: subscriptionSnapshot.error,\n                            incomplete: !subscriptionSnapshot.complete && !subscriptionSnapshot.error,\n                            path: observableSnapshot.path,\n                            root: subscriptionSnapshot.sink === subscriptionSnapshot.rootSink,\n                            tag: observableSnapshot.tag,\n                            type: observableSnapshot.type,\n                            unsubscribed: subscriptionSnapshot.unsubscribed\n                        })) {\n                            if (!find) {\n                                find = {\n                                    observable: observableSnapshot,\n                                    subs: []\n                                };\n                            }\n                            find.subs.push({\n                                subscriber: subscriberSnapshot,\n                                subscription: subscriptionSnapshot\n                            });\n                        }\n                    }\n                });\n\n                if (find) {\n                    found.push(find);\n                }\n            });\n\n            const { maxLogged_ } = this;\n            const notLogged = (found.length > maxLogged_) ? found.length - maxLogged_ : 0;\n            if (notLogged) {\n                found.splice(maxLogged_, notLogged);\n            }\n\n            logger.group(`${found.length + notLogged} snapshot(s) found`);\n\n            const observableGroupMethod = (found.length > 3) ? \"groupCollapsed\" : \"group\";\n            found.forEach(find => {\n                const observableSnapshot = find.observable;\n                logger[observableGroupMethod].call(logger, observableSnapshot.tag ?\n                    `Tag = ${observableSnapshot.tag}` :\n                    `Type = ${observableSnapshot.type}`\n                );\n                logger.log(\"Path =\", observableSnapshot.path);\n\n                const { subs } = find;\n                const subscriberGroupMethod = (find.subs.length > 3) ? \"groupCollapsed\" : \"group\";\n                logger.group(`${subs.length} subscriber(s)`);\n                subs.forEach(sub => {\n\n                    const subscriptionSnapshot = sub.subscription;\n                    const subscriberSnapshot = sub.subscriber;\n                    const { values, valuesFlushed } = subscriberSnapshot;\n                    logger[subscriberGroupMethod].call(logger, \"Subscriber\");\n                    logger.log(\"Value count =\", values.length + valuesFlushed);\n                    if (values.length > 0) {\n                        logger.log(\"Last value =\", values[values.length - 1].value);\n                    }\n                    logSubscription(logger, subscriptionSnapshot);\n\n                    const otherSubscriptions = Array\n                        .from(subscriberSnapshot.subscriptions.values())\n                        .filter((otherSubscriptionSnapshot) => otherSubscriptionSnapshot !== subscriptionSnapshot);\n                    otherSubscriptions.forEach((otherSubscriptionSnapshot) => {\n                        logger.groupCollapsed(\"Other subscription\");\n                        logSubscription(logger, otherSubscriptionSnapshot);\n                        logger.groupEnd();\n                    });\n                    logger.groupEnd();\n                });\n                logger.groupEnd();\n                logger.groupEnd();\n            });\n\n            if (notLogged) {\n                logger.log(`... another ${notLogged} snapshot(s) not logged.`);\n            }\n            logger.groupEnd();\n        });\n    }\n\n    show(match: Match, partialLogger?: PartialLogger): void;\n    show(partialLogger?: PartialLogger): void;\n    show(match: any, partialLogger?: PartialLogger): void {\n\n        const anyTagged = /.+/;\n        if (!match) {\n            match = anyTagged;\n        } else if (typeof match.log === \"function\") {\n            partialLogger = match;\n            match = anyTagged;\n        }\n\n        const snapshotPlugin = this.find(SnapshotPlugin);\n        if (!snapshotPlugin) {\n            this.warnOnce(console, \"Snapshotting is not enabled.\");\n            return;\n        }\n\n        const snapshot = snapshotPlugin.snapshotAll();\n        const matched = Array\n            .from(snapshot.observables.values())\n            .filter((observableSnapshot) => matches(observableSnapshot.observable, match));\n        const logger = toLogger(partialLogger || this.defaultLogger_);\n\n        const { maxLogged_ } = this;\n        const notLogged = (matched.length > maxLogged_) ? matched.length - maxLogged_ : 0;\n        if (notLogged) {\n            matched.splice(maxLogged_, notLogged);\n        }\n\n        snapshot.mapStackTraces(matched).subscribe(() => {\n            logger.group(`${matched.length + notLogged} snapshot(s) matching ${matchToString(match)}`);\n\n            const observableGroupMethod = (matched.length > 3) ? \"groupCollapsed\" : \"group\";\n            matched.forEach((observableSnapshot) => {\n\n                logger[observableGroupMethod].call(logger, observableSnapshot.tag ?\n                    `Tag = ${observableSnapshot.tag}` :\n                    `Type = ${observableSnapshot.type}`\n                );\n                logger.log(\"Path =\", observableSnapshot.path);\n\n                const { subscriptions } = observableSnapshot;\n                const subscriberGroupMethod = (subscriptions.size > 3) ? \"groupCollapsed\" : \"group\";\n                logger.group(`${subscriptions.size} subscriber(s)`);\n                subscriptions.forEach((subscriptionSnapshot) => {\n\n                    const subscriberSnapshot = snapshot.subscribers.get(subscriptionSnapshot.subscriber);\n                    if (subscriberSnapshot) {\n\n                        const { values, valuesFlushed } = subscriberSnapshot;\n                        logger[subscriberGroupMethod].call(logger, \"Subscriber\");\n                        logger.log(\"Value count =\", values.length + valuesFlushed);\n                        if (values.length > 0) {\n                            logger.log(\"Last value =\", values[values.length - 1].value);\n                        }\n                        logSubscription(logger, subscriptionSnapshot);\n\n                        const otherSubscriptions = Array\n                            .from(subscriberSnapshot.subscriptions.values())\n                            .filter((otherSubscriptionSnapshot) => otherSubscriptionSnapshot !== subscriptionSnapshot);\n                        otherSubscriptions.forEach((otherSubscriptionSnapshot) => {\n                            logger.groupCollapsed(\"Other subscription\");\n                            logSubscription(logger, otherSubscriptionSnapshot);\n                            logger.groupEnd();\n                        });\n                        logger.groupEnd();\n                    } else {\n                        logger.warn(\"Cannot find subscriber snapshot\");\n                    }\n                });\n                logger.groupEnd();\n                logger.groupEnd();\n            });\n\n            if (notLogged) {\n                logger.log(`... another ${notLogged} snapshot(s) not logged.`);\n            }\n            logger.groupEnd();\n        });\n    }\n\n    stats(partialLogger?: PartialLogger): void {\n\n        const statsPlugin = this.find(StatsPlugin);\n        if (!statsPlugin) {\n            this.warnOnce(console, \"Stats are not enabled.\");\n            return;\n        }\n\n        const stats = statsPlugin.stats;\n        const { leafSubscribes, maxDepth, flattenedSubscribes, rootSubscribes, totalDepth } = stats;\n        const logger = toLogger(partialLogger || this.defaultLogger_);\n        logger.group(\"Stats\");\n        logger.log(\"Subscribes =\", stats.subscribes);\n        if (rootSubscribes > 0) {\n            logger.log(\"Root subscribes =\", rootSubscribes);\n        }\n        if (leafSubscribes > 0) {\n            logger.log(\"Leaf subscribes =\", leafSubscribes);\n        }\n        if (flattenedSubscribes > 0) {\n            logger.log(\"Flattened subscribes =\", flattenedSubscribes);\n        }\n        logger.log(\"Unsubscribes =\", stats.unsubscribes);\n        logger.log(\"Nexts =\", stats.nexts);\n        logger.log(\"Errors =\", stats.errors);\n        logger.log(\"Completes =\", stats.completes);\n        if (maxDepth > 0) {\n            logger.log(\"Max. depth =\", maxDepth);\n            logger.log(\"Avg. depth =\", (totalDepth / leafSubscribes).toFixed(1));\n        }\n        logger.log(\"Tick =\", stats.tick);\n        logger.log(\"Timespan =\", stats.timespan);\n        logger.groupEnd();\n    }\n\n    teardown(): void {\n\n        if (this.teardown_) {\n            this.teardown_();\n            this.teardown_ = undefined;\n        }\n    }\n\n    unplug(...plugins: Plugin[]): void {\n\n        plugins.forEach((plugin) => {\n            plugin.teardown();\n            this.plugins_ = this.plugins_.filter((p) => p !== plugin);\n            this.pluginsSubject_.next(this.plugins_);\n            this.undos_ = this.undos_.filter((u) => u !== plugin);\n        });\n    }\n\n    /** @deprecated Use warnOnce */\n    warn(logger: PartialLogger, message: any, ...args: any[]): void {\n\n        this.warnOnce(logger, message, ...args);\n    }\n\n    warnOnce(logger: PartialLogger, message: any, ...args: any[]): void {\n\n        if (!this.warned_[message]) {\n            toLogger(logger).warn(message, ...args);\n            this.warned_[message] = true;\n        }\n    }\n\n    /*tslint:disable-next-line:member-ordering*/\n    private static coreSubscribe_(this: Observable<any>, ...args: any[]): Subscription {\n\n        /*tslint:disable-next-line:no-invalid-this*/\n        const observable = this;\n\n        const { spy_ } = SpyCore;\n        if (!spy_) {\n            return observableSubscribe.apply(observable, args);\n        }\n        if (hidden(observable)) {\n            SpyCore.spy_ = undefined;\n            try {\n                return observableSubscribe.apply(observable, args);\n            } finally {\n                SpyCore.spy_ = spy_;\n            }\n        }\n        const notify_ = (before: (plugin: Plugin) => void, block: () => void, after: (plugin: Plugin) => void) => {\n            ++spy_.tick_;\n            spy_.plugins_.forEach(before);\n            block();\n            spy_.plugins_.forEach(after);\n        };\n\n        const subscriber = toSubscriber.apply(undefined, args);\n        const ref: SubscriptionRef = {\n            observable,\n            subscriber,\n            subscription: new Subscription(),\n            timestamp: Date.now(),\n            unsubscribed: false\n        };\n\n        identify(observable);\n        identify(subscriber);\n        identify(ref);\n\n        const subscriberUnsubscribe = subscriber.unsubscribe;\n        subscriber.unsubscribe = () => {\n            if (!subscriber.closed) {\n                notify_(\n                    (plugin) => plugin.beforeUnsubscribe(ref),\n                    () => {\n                        ref.subscription.unsubscribe();\n                        ref.unsubscribed = true;\n                        subscriberUnsubscribe.call(subscriber);\n                    },\n                    (plugin) => plugin.afterUnsubscribe(ref)\n                );\n            } else {\n                subscriberUnsubscribe.call(subscriber);\n            }\n        };\n\n        const postSelectObserver = {\n\n            complete(): void {\n                notify_(\n                    (plugin) => plugin.beforeComplete(ref),\n                    () => subscriber.complete(),\n                    (plugin) => plugin.afterComplete(ref)\n                );\n            },\n\n            error(error: any): void {\n                notify_(\n                    (plugin) => plugin.beforeError(ref, error),\n                    () => subscriber.error(error),\n                    (plugin) => plugin.afterError(ref, error)\n                );\n            },\n\n            next(value: any): void {\n                notify_(\n                    (plugin) => plugin.beforeNext(ref, value),\n                    () => subscriber.next(value),\n                    (plugin) => plugin.afterNext(ref, value)\n                );\n            }\n        };\n\n        const preSelectObserver = {\n\n            complete(): void {\n                this.completed = true;\n                if (this.preSelectSubject) {\n                    this.preSelectSubject.complete();\n                } else {\n                    this.postSelectObserver.complete();\n                }\n            },\n\n            completed: false,\n\n            error(error: any): void {\n                this.errored = true;\n                if (this.preSelectSubject) {\n                    this.preSelectSubject.error(error);\n                } else {\n                    this.postSelectObserver.error(error);\n                }\n            },\n\n            errored: false,\n\n            let(plugins: Plugin[]): void {\n                const selectors = plugins.map((plugin) => plugin.select(ref)).filter(Boolean);\n                if (selectors.length > 0) {\n                    if (!this.preSelectSubject) {\n                        this.preSelectSubject = new Subject<any>();\n                    }\n                    if (this.postSelectSubscription) {\n                        this.postSelectSubscription.unsubscribe();\n                    }\n                    let source = this.preSelectSubject.asObservable();\n                    selectors.forEach(selector => source = selector!(source));\n                    this.postSelectSubscription = source.pipe(hide()).subscribe(postSelectObserver);\n                } else if (this.postSelectSubscription) {\n                    this.postSelectSubscription.unsubscribe();\n                    this.postSelectSubscription = undefined;\n                    this.preSelectSubject = undefined;\n                }\n            },\n\n            next(value: any): void {\n                if (this.preSelectSubject) {\n                    this.preSelectSubject.next(value);\n                } else {\n                    this.postSelectObserver.next(value);\n                }\n            },\n\n            postSelectObserver,\n            postSelectSubscription: undefined as Subscription | undefined,\n            preSelectSubject: undefined as Subject<any> | undefined,\n\n            unsubscribe(): void {\n                if (!this.unsubscribed) {\n                    this.unsubscribed = true;\n                    if (!this.completed && !this.errored) {\n                        if (this.postSelectSubscription) {\n                            this.postSelectSubscription.unsubscribe();\n                            this.postSelectSubscription = undefined;\n                        }\n                    }\n                }\n            },\n\n            unsubscribed: false\n        };\n\n        subscriber.add(spy_.pluginsSubject_.pipe(hide()).subscribe({\n            next: (plugins: any) => preSelectObserver.let(plugins)\n        }));\n\n        notify_(\n            (plugin) => plugin.beforeSubscribe(ref),\n            () => {\n                subscriber.add(observableSubscribe.call(observable, preSelectObserver));\n                subscriber.add(() => preSelectObserver.unsubscribe());\n            },\n            (plugin) => plugin.afterSubscribe(ref)\n        );\n        return subscriber;\n    }\n\n    private detect_(id: string, detector: Detector): void {\n\n        const { auditor_, defaultLogger_ } = this;\n\n        auditor_.audit(id, (ignored) => {\n\n            const detected = detector.detect(id);\n            const logger = toLogger(defaultLogger_);\n\n            if (detected) {\n                const audit = (ignored === 0) ? \"\" : `; ignored ${ignored}`;\n                logger.group(`Subscription changes detected; id = '${id}'${audit}`);\n                detected.subscriptions.forEach((s) => {\n                    logSubscription(logger, \"Subscription\", s);\n                });\n                detected.unsubscriptions.forEach((s) => {\n                    logSubscription(logger, \"Unsubscription\", s);\n                });\n                detected.flatteningSubscriptions.forEach((s) => {\n                    logSubscription(logger, \"Flattening subscription\", s);\n                });\n                detected.flatteningUnsubscriptions.forEach((s) => {\n                    logSubscription(logger, \"Flattening unsubscription\", s);\n                });\n                logger.groupEnd();\n            }\n\n            function logSubscription(logger: Logger, name: string, subscription: SubscriptionSnapshot): void {\n\n                logger.group(name);\n                logger.log(\"Root subscribe\", subscription.rootSink ?\n                    subscription.rootSink.stackTrace :\n                    subscription.stackTrace\n                );\n                logger.log(\"Subscribe\", subscription.stackTrace);\n                logger.groupEnd();\n            }\n        });\n    }\n}\n\nfunction logStackTrace(logger: Logger, subscriptionSnapshot: SubscriptionSnapshot): void {\n\n    const { mappedStackTrace, rootSink } = subscriptionSnapshot;\n    const mapped = rootSink ? rootSink.mappedStackTrace : mappedStackTrace;\n    mapped.subscribe(stackTrace => logger.log(\"Root subscribe\", stackTrace));\n}\n\nfunction logSubscription(logger: Logger, subscriptionSnapshot: SubscriptionSnapshot): void {\n\n    const { complete, error, unsubscribed } = subscriptionSnapshot;\n    logger.log(\"State =\", complete ? \"complete\" : error ? \"error\" : \"incomplete\");\n    if (error) {\n        logger.error(\"Error =\", error);\n    }\n    if (unsubscribed) {\n        logger.log(\"Unsubscribed =\", true);\n    }\n    logStackTrace(logger, subscriptionSnapshot);\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nimport { PartialLogger } from \"./logger\";\nimport { SpyCore } from \"./spy-core\";\nimport { Spy } from \"./spy-interface\";\n\nexport function create(options: {\n    [key: string]: any,\n    defaultLogger?: PartialLogger,\n    defaultPlugins?: boolean,\n    global?: string,\n    warning?: boolean\n} = {}): Spy {\n\n    return new SpyCore(options);\n}\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-spy\n */\n\nexport { detect } from \"./detect\";\nexport * from \"./logger\";\nexport { matches } from \"./match\";\nexport * from \"./plugin\";\nexport { create } from \"./spy-factory\";\nexport { inferPath, inferType } from \"./util\";\n\nimport { hide, tag } from \"./operators\";\n\nimport {\n    CyclePlugin,\n    DebugPlugin,\n    GraphPlugin,\n    LetPlugin,\n    LogPlugin,\n    PausePlugin,\n    SnapshotPlugin,\n    StackTracePlugin,\n    StatsPlugin\n} from \"./plugin\";\n\nexport const plugins = {\n    CyclePlugin,\n    DebugPlugin,\n    GraphPlugin,\n    LetPlugin,\n    LogPlugin,\n    PausePlugin,\n    SnapshotPlugin,\n    StackTracePlugin,\n    StatsPlugin\n};\n\nexport const operators = {\n    hide,\n    tag\n};\n"],"names":["noop_","hook_","detect","id","hook","defaultLogger","console","toLogger","partialLogger","error","group","groupCollapsed","groupEnd","warn","spaces","indent","message","args","call","title","Math","max","log","method","padding","repeat","idSymbol","Symbol","lastId","identify","instance","toString","isSubscriptionRef","subscriberRef","inferPath","observable","source","inferType","operator","prototype","Object","getPrototypeOf","constructor","name","charAt","toLowerCase","substring","replace","match","p","isObservable","arg","subscribe","empty","closed","next","value","complete","SubscriberSymbol","toSubscriber","nextOrObserver","Subscriber","matches","subscriber","undefined","subscription","observableId","subscriberId","subscriptionId","tag","read","test","BasePlugin","ref","root","factory","module","this","_isNumber","n","isNaN","parseFloat","isFinite","_capitalize","str","toUpperCase","_getter","booleanProps","numericProps","stringProps","arrayProps","objectProps","props","concat","StackFrame","obj","i","length","getArgs","setArgs","v","TypeError","getEvalOrigin","evalOrigin","setEvalOrigin","fileName","getFileName","lineNumber","getLineNumber","columnNumber","getColumnNumber","functionName","getFunctionName","getIsEval","fromString","StackFrame$$fromString","argsStartIndex","indexOf","argsEndIndex","lastIndexOf","split","locationString","parts","exec","Boolean","j","Number","k","String","require$$0","ErrorStackParser","FIREFOX_SAFARI_STACK_REGEXP","CHROME_IE_STACK_REGEXP","SAFARI_NATIVE_CODE_REGEXP","parse","ErrorStackParser$$parse","stacktrace","parseOpera","stack","parseV8OrIE","parseFFOrSafari","Error","extractLocation","ErrorStackParser$$extractLocation","urlLike","regExp","ErrorStackParser$$parseV8OrIE","filtered","filter","line","map","sanitizedLine","location","tokens","slice","locationParts","pop","join","ErrorStackParser$$parseFFOrSafari","functionNameRegex","ErrorStackParser$$parseOpera","e","parseOpera9","parseOpera10","parseOpera11","ErrorStackParser$$parseOpera9","lineRE","lines","result","len","push","ErrorStackParser$$parseOpera10","ErrorStackParser$$parseOpera11","functionCall","shift","argsRaw","getArg","aArgs","aName","aDefaultValue","arguments","exports","urlRegexp","dataUrlRegexp","urlParse","aUrl","scheme","auth","host","port","path","urlGenerate","aParsedUrl","url","normalize","aPath","isAbsolute","part","up","splice","aRoot","aPathUrl","aRootUrl","joined","relative","level","index","Array","substr","supportsNullProto","create","identity","s","toSetString","aStr","isProtoString","fromSetString","charCodeAt","compareByOriginalPositions","mappingA","mappingB","onlyCompareOriginal","cmp","originalLine","originalColumn","generatedColumn","generatedLine","compareByGeneratedPositionsDeflated","onlyCompareGenerated","strcmp","aStr1","aStr2","compareByGeneratedPositionsInflated","recursiveSearch","aLow","aHigh","aNeedle","aHaystack","aCompare","aBias","mid","floor","LEAST_UPPER_BOUND","search","GREATEST_LOWER_BOUND","has","hasOwnProperty","ArraySet","_array","_set","fromArray","ArraySet_fromArray","aArray","aAllowDuplicates","set","add","size","ArraySet_size","getOwnPropertyNames","ArraySet_add","sStr","util","isDuplicate","idx","ArraySet_has","ArraySet_indexOf","at","ArraySet_at","aIdx","toArray","ArraySet_toArray","intToCharMap","number","charCode","bigA","bigZ","littleA","littleZ","zero","nine","plus","slash","littleOffset","numberOffset","VLQ_BASE_SHIFT","VLQ_BASE","VLQ_BASE_MASK","VLQ_CONTINUATION_BIT","toVLQSigned","aValue","fromVLQSigned","isNegative","shifted","base64VLQ_encode","encoded","digit","vlq","base64","encode","base64VLQ_decode","aIndex","aOutParam","strLen","continuation","decode","rest","swap","ary","x","y","temp","randomIntInRange","low","high","round","random","doQuickSort","comparator","r","pivotIndex","pivot","q","quickSort","require$$1","SourceMapConsumer","aSourceMap","sourceMap","JSON","sections","IndexedSourceMapConsumer","BasicSourceMapConsumer","fromSourceMap","_version","__generatedMappings","defineProperty","get","_parseMappings","_mappings","sourceRoot","__originalMappings","_charIsMappingSeparator","SourceMapConsumer_charIsMappingSeparator","c","SourceMapConsumer_parseMappings","aSourceRoot","GENERATED_ORDER","ORIGINAL_ORDER","eachMapping","SourceMapConsumer_eachMapping","aCallback","aContext","aOrder","context","order","mappings","_generatedMappings","_originalMappings","mapping","_sources","_names","forEach","allGeneratedPositionsFor","SourceMapConsumer_allGeneratedPositionsFor","needle","_findMapping","binarySearch","column","lastColumn","version","sources","names","sourcesContent","file","consumer","SourceMapConsumer_fromSourceMap","smc","_sourceRoot","_generateSourcesContent","_file","generatedMappings","destGeneratedMappings","destOriginalMappings","srcMapping","destMapping","Mapping","previousGeneratedColumn","previousOriginalLine","previousOriginalColumn","previousSource","previousName","cachedSegments","originalMappings","segment","end","base64VLQ","SourceMapConsumer_findMapping","aMappings","aLineName","aColumnName","aComparator","computeColumnSpans","SourceMapConsumer_computeColumnSpans","nextMapping","lastGeneratedColumn","Infinity","originalPositionFor","SourceMapConsumer_originalPositionFor","hasContentsOfAllSources","BasicSourceMapConsumer_hasContentsOfAllSources","some","sc","sourceContentFor","SourceMapConsumer_sourceContentFor","aSource","nullOnMissing","fileUriAbsPath","generatedPositionFor","SourceMapConsumer_generatedPositionFor","lastOffset","_sections","offset","offsetLine","offsetColumn","generatedOffset","IndexedSourceMapConsumer_originalPositionFor","sectionIndex","section","bias","IndexedSourceMapConsumer_hasContentsOfAllSources","every","IndexedSourceMapConsumer_sourceContentFor","content","IndexedSourceMapConsumer_generatedPositionFor","generatedPosition","ret","IndexedSourceMapConsumer_parseMappings","sectionMappings","adjustedMapping","SourceMap","_xdr","Promise","resolve","reject","req","XMLHttpRequest","open","onerror","onreadystatechange","readyState","status","responseText","send","_atob","b64str","window","atob","_parseJson","string","_findFunctionName","syntaxes","code","maxLines","min","commentPos","m","_ensureSupportedEnvironment","_ensureStackFrameIsLegit","stackframe","_findSourceMappingURL","sourceMappingUrlRegExp","lastSourceMappingUrl","matchSourceMappingUrl","_extractLocationInfoFromSourceMapSource","sourceMapConsumer","sourceCache","loc","mappedSource","StackTraceGPS","opts","sourceMapConsumerCache","ajax","_get","isDataUrl","offline","supportedEncodingRegexp","sourceMapStart","encodedSource","xhrPromise","then","bind","_getSourceMapConsumer","sourceMappingURL","defaultSourceRoot","sourceMapConsumerPromise","sourceMapSource","pinpoint","StackTraceGPS$$pinpoint","getMappedLocation","mappedStackFrame","resolveMappedStackFrame","findFunctionName","StackTraceGPS$$findFunctionName","getSourceCallback","guessedFunctionName","StackTraceGPS$$getMappedLocation","hide","hideOperation","lift","HideOperator","tagOperation","TagOperator","stackTraceRefSymbol","getMappedStackTrace","stackTraceRef","getStackTraceRef","mappedStackTrace","of","getStackTrace","stackTrace","setStackTraceRef","StackTracePlugin","sourceMaps","sourceCache_","sourceMaps_","stackFrames","getStackFrames_","protocol","defer","gps","StackTraceGps","all","stackFrame","pipe","shareReplay","core","cycleDetectedSymbol","cycleWarnedSymbol","CyclePlugin","spy","logger_","spy_","nexts_","findIndex","warnOnce","type","DebugPlugin","notifications","matchToString","notifications_","matcher_","notification","graphRefSymbol","getGraphRef","setGraphRef","GraphPlugin","keptDuration","flushIntervalId_","flushQueue_","keptDuration_","sentinel_","depth","flattened","flattenings","flatteningsFlushed","link","rootSink","sentinel","sink","sourcesFlushed","flush_","graphRef","sinkRef","sinkGraphRef","clearInterval","unsubscribed","flush","flatteningIndex","sourceIndex","due","Date","now","setInterval","LetPlugin","select","match_","select_","merge","NEVER","LogPlugin","tagMatch","auditor_","auditor","tagMatch_","defaultMatch","notificationMatch_","log_","param","audit","ignored","matching","description","Deck","Map","stats_","Subject","predicate","states_","state","broadcast_","logger","paused_","tag_","subject_","subscription_","unsubscribe","materialize","asObservable","dematerialize","paused","PausePlugin","deck_","resume","snapshotRefSymbol","getSnapshotRef","mapStackTraces","snapshots","observables","snapshot","subscriptions","mapSubscriptionStackTraces","forkJoin","mapTo","subscriptionSnapshot","setSnapshotRef","SnapshotPlugin","keptValues","keptValues_","snapshotRef","tick","values","timestamp","count","valuesFlushed","since","subscribers","subscriptionRefs","getSubscriptionRefs_","unused","subscriberSnapshot","observableSnapshot","sort","a","b","key","snapshotAll","addSubscriptionRefs_","StatsPlugin","completes","errors","flattenedSubscribes","leafSubscribes","maxDepth","nexts","rootSubscribes","subscribes","timespan","totalDepth","unsubscribes","time_","all_","Auditor","duration","task","queue_","queued","wait_","timeoutId_","setTimeout","before","dequeued","Detector","detectorRecords_","snapshotPlugin_","find","detectorRecord","snapshotRecord","record_","snapshotRecords","previous","current","compare_","unsubscriptions","flatteningSubscriptions","flatteningUnsubscriptions","previousSubscriptions","rootSubscriptions","currentSubscriptions","previousFlattenings","currentFlattenings","flattening","subscriptionRecord","f","findFlatteningSubscriptions_","findRootSubscriptions_","hidden","wrap","deprecation","deck","pausePlugins","findAll","pausePlugin","debug","apply","maxLogged","pause","query","show","stats","undo","undos","unplug","observableSubscribe","Observable","previousWindow","SpyCore","options","warning","coreSubscribe_","defaultLogger_","defaultPlugins","plugins_","pluginsSubject_","BehaviorSubject","tick_","undos_","warned_","detector","detect_","global","teardown_","plugin","teardown","plug","ctor","found","notificationMatch","maxLogged_","plugins","snapshotPlugin","observableSnapshots","from","incomplete","subs","notLogged","observableGroupMethod","subscriberGroupMethod","sub","logSubscription","otherSubscriptions","otherSubscriptionSnapshot","anyTagged","matched","statsPlugin","toFixed","u","detected","__RX_SPY_VERSION__","notify_","block","after","Subscription","subscriberUnsubscribe","beforeUnsubscribe","afterUnsubscribe","postSelectObserver","beforeComplete","afterComplete","beforeError","afterError","beforeNext","afterNext","preSelectObserver","completed","preSelectSubject","errored","selectors","postSelectSubscription","selector","beforeSubscribe","afterSubscribe","logStackTrace","mapped","operators"],"mappings":"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"}