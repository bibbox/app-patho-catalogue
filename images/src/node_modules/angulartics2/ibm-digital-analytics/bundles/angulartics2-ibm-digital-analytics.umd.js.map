{"version":3,"file":"angulartics2-ibm-digital-analytics.umd.js","sources":["../../../../src/lib/providers/ibm-digital-analytics/ibm-digital-analytics.ts","../../../../src/lib/providers/ibm-digital-analytics/angulartics2-ibm-digital-analytics.ts"],"names":["Injectable","Angulartics2"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Angulartics2 } from 'angulartics2';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class Angulartics2IBMDigitalAnalytics {\r\n  constructor(private angulartics2: Angulartics2) {\r\n    if (typeof window['cmCreatePageviewTag'] !== 'function') {\r\n      console.warn(\r\n        'Angulartics 2 IBM Digital Analytics Plugin: eluminate.js is not loaded',\r\n      );\r\n    }\r\n  }\r\n\r\n  startTracking(): void {\r\n    this.angulartics2.pageTrack\r\n      .pipe(this.angulartics2.filterDeveloperMode())\r\n      .subscribe(x => this.pageTrack(x.path));\r\n    this.angulartics2.eventTrack\r\n      .pipe(this.angulartics2.filterDeveloperMode())\r\n      .subscribe(x => this.eventTrack(x.action, x.properties));\r\n  }\r\n\r\n  /**\r\n   * Track Page in IBM Digital Analytics\r\n   *\r\n   * @param path location\r\n   *\r\n   * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_pageviewtag.html\r\n   */\r\n  pageTrack(path: string) {\r\n    const cmCreatePageviewTag = window['cmCreatePageviewTag'];\r\n    cmCreatePageviewTag(path, null, null, null);\r\n  }\r\n\r\n  /**\r\n   * Track an event in IBM Digital Analytics\r\n   *\r\n   * @param action A string corresponding to the type of event that needs to be tracked.\r\n   * @param properties The properties that need to be logged with the event.\r\n   */\r\n  eventTrack(action: string, properties: any = {}) {\r\n    const cmDisplayShops = window['cmDisplayShops'];\r\n    switch (action) {\r\n      /**\r\n       * @description The Product View tag captures information about vdigitalDataiews of product detail pages.\r\n       *  The Product View tag should be called on the lowest level detail page for products, which is typically\r\n       *  the Product Details page. You can view example Product View tags below.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_prodviewtag.html\r\n       */\r\n      case 'cmCreateProductviewTag':\r\n        const cmCreateProductviewTag = window['cmCreateProductviewTag'];\r\n        cmCreateProductviewTag(\r\n          properties.productId,\r\n          properties.productName,\r\n          properties.categoryId,\r\n          properties.attrbute,\r\n          properties.virtualCategory,\r\n        );\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Shop Action 5 tag captures data about selected products and which products are present in a shopping cart,\r\n       *  if any, when the cart is viewed.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_shopact5tag.html\r\n       */\r\n      case 'cmCreateShopAction5Tag':\r\n        const cmCreateShopAction5Tag = window['cmCreateShopAction5Tag'];\r\n        cmCreateShopAction5Tag(\r\n          properties.productId,\r\n          properties.productName,\r\n          properties.quantity,\r\n          properties.unitPrice,\r\n          properties.categoryId,\r\n          properties.attrbute,\r\n          properties.extraFields,\r\n          properties.virtualCategory,\r\n        );\r\n\r\n        cmDisplayShops();\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Shop Action 9 tag captures data about what products were purchased by a customer.\r\n       *  Like the Shop Action 5 tag, one tag should be sent for each product line item purchased. These tags should be sent\r\n       *  on the receipt or other completion page confirming a successful order.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_shopact9tag.html\r\n       */\r\n      case 'cmCreateShopAction9Tag':\r\n        const cmCreateShopAction9Tag = window['cmCreateShopAction9Tag'];\r\n        cmCreateShopAction9Tag(\r\n          properties.productId,\r\n          properties.productName,\r\n          properties.quantity,\r\n          properties.unitPrice,\r\n          properties.registrationId,\r\n          properties.orderId,\r\n          properties.orderSubtotal,\r\n          properties.categoryId,\r\n          properties.attrbute,\r\n          properties.extraFields,\r\n        );\r\n\r\n        cmDisplayShops();\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Order tag captures order header information such as Registration ID, order ID, order subtotal,\r\n       *  and shipping and handling. The Order tag should be sent on the receipt page confirming order completion.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_ordertag.html\r\n       */\r\n      case 'cmCreateOrderTag':\r\n        const cmCreateOrderTag = window['cmCreateOrderTag'];\r\n        cmCreateOrderTag(\r\n          properties.orderId,\r\n          properties.orderSubtotal,\r\n          properties.orderShipping,\r\n          properties.registrationId,\r\n          properties.registrantCity,\r\n          properties.registrantState,\r\n          properties.registrantPostalCode,\r\n          properties.attrbute,\r\n          properties.extraFields,\r\n        );\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Registration tag creates a Lifetime Visitor Experience Profile (LIVE Profile) by associating a single\r\n       *  common Registration ID with the IBM® Digital Analytics permanent cookie set in every browser visiting the tagged site.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_registrationtag.html\r\n       */\r\n      case 'cmCreateRegistrationTag':\r\n        const cmCreateRegistrationTag = window['cmCreateRegistrationTag'];\r\n        cmCreateRegistrationTag(\r\n          properties.registrationId,\r\n          properties.registrantEmail,\r\n          properties.registrantCity,\r\n          properties.registrantState,\r\n          properties.registrantPostalCode,\r\n          properties.registrantCountry,\r\n          properties.attrbute,\r\n        );\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Element tag is used to track intra-page content in IBM® Digital Analytics. Data collected by\r\n       *  the Element tag is used to populate values in the Element Categories and Top Viewed Elements reports.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_elementtag.html\r\n       */\r\n      case 'cmCreateElementTag':\r\n        const cmCreateElementTag = window['cmCreateElementTag'];\r\n        cmCreateElementTag(\r\n          properties.elementId,\r\n          properties.elementCategory,\r\n          properties.attrbute,\r\n        );\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Conversion Event tag is employed for tracking of general non-commerce conversion events.\r\n       * The Conversion Event tag is used to populate values in the Conversion Events Reports and to create Key Segments.\r\n       * This tag and the reports it populates enable analysis of a wide variety of site activities.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_conversioneventtag.html\r\n       */\r\n      case 'cmCreateConversionEventTag':\r\n        const cmCreateConversionEventTag = window['cmCreateConversionEventTag'];\r\n        cmCreateConversionEventTag(\r\n          properties.eventId,\r\n          properties.actionType,\r\n          properties.eventCategoryId,\r\n          properties.points,\r\n          properties.attrbute,\r\n          properties.extraFields,\r\n        );\r\n\r\n        break;\r\n\r\n      default:\r\n        console.warn('Unsupported Event Action');\r\n    }\r\n  }\r\n}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './ibm-digital-analytics';\n"]}