!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("reflect-metadata"),require("rxjs/operators"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("@ng-dynamic-forms/core",["exports","@angular/core","rxjs","reflect-metadata","rxjs/operators","@angular/forms","@angular/common"],e):e(((t=t||self).ngDynamicForms=t.ngDynamicForms||{},t.ngDynamicForms.core={}),t.ng.core,t.rxjs,null,t.rxjs.operators,t.ng.forms,t.ng.common)}(this,(function(t,e,o,n,r,i,a){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};function l(t,e){function o(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}function p(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}Object.create;function c(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}Object.create;function h(t){return"boolean"==typeof t}function f(t){return"function"==typeof t}function m(t){return"number"==typeof t}function g(t){return"object"==typeof t&&null!==t}function v(t){return"string"==typeof t}var _=function(){function t(t,e){this.layoutService=t,this.validationService=e,this._hasFocus=!1}return Object.defineProperty(t.prototype,"control",{get:function(){var t=this.group.get(this.model.id);if(null===t)throw new Error("form group does not contain an abstract control with id "+this.model.id);return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.layoutService.getElementId(this.model)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFocus",{get:function(){return this._hasFocus},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInvalid",{get:function(){return this.control.invalid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){return this.control.valid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorMessages",{get:function(){return this.validationService.createErrorMessages(this.control,this.model)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showErrorMessages",{get:function(){return this.validationService.showErrorMessages(this.control,this.model,this.hasFocus)},enumerable:!1,configurable:!0}),t.prototype.getClass=function(t,e,o){var n;void 0===o&&(o=this.model);var r=o===this.model?this.layout:null!==(n=this.layoutService.findByModel(o,this.formLayout))&&void 0!==n?n:o.layout;return this.layoutService.getClass(r,t,e)},t.prototype.onBlur=function(t){t instanceof Event&&t.stopPropagation(),this._hasFocus=!1,this.blur.emit(t)},t.prototype.onChange=function(t){t instanceof Event&&t.stopPropagation(),this.change.emit(t)},t.prototype.onCustomEvent=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=!1),o?this.customEvent.emit(t):v(e)&&this.customEvent.emit({customEvent:t,customEventType:e})},t.prototype.onFocus=function(t){t instanceof Event&&t.stopPropagation(),this._hasFocus=!0,this.focus.emit(t)},t}(),O=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return l(o,t),Object.defineProperty(o.prototype,"array",{get:function(){return this.control},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"startTemplate",{get:function(){return this.layoutService.getStartTemplate(this.model,this.templates)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"endTemplate",{get:function(){return this.layoutService.getEndTemplate(this.model,this.templates)},enumerable:!1,configurable:!0}),o.prototype.markForCheck=function(){this.components instanceof e.QueryList&&this.components.forEach((function(t){return t.markForCheck()}))},o}(_),E=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return l(o,t),o.prototype.markForCheck=function(){this.components instanceof e.QueryList&&this.components.forEach((function(t){return t.markForCheck()}))},o}(_),A=new e.InjectionToken("DYNAMIC_FORM_CONTROL_MAP_FN"),I=function(){function t(t){this.DYNAMIC_FORM_CONTROL_MAP_FN=t,this.forms=[],this.formControls={},this.DYNAMIC_FORM_CONTROL_MAP_FN=t}return t.prototype.getForms=function(){return this.forms.values()},t.prototype.registerForm=function(t){this.forms.push(t)},t.prototype.unregisterForm=function(t){var e=this.forms.indexOf(t);-1!==e&&this.forms.splice(e,1)},t.prototype.getFormControlRef=function(t,e){var o=this.formControls[t];return m(e)?Array.isArray(o)?o[e]:void 0:o},t.prototype.registerFormControl=function(t,e,o){if(m(o)){var n=this.formControls[t.id]||[];Array.isArray(n)?(n.splice(o,0,e),this.formControls[t.id]=n):console.warn("registerFormControlRef is called with index for a non-array form control: "+t.id)}else this.formControls[t.id]=e},t.prototype.unregisterFormControl=function(t,e){var o=this.formControls[t];m(e)?Array.isArray(o)&&void 0!==o[e]&&o.splice(e,1):void 0!==o&&delete this.formControls[t]},t.prototype.getCustomComponentType=function(t){return f(this.DYNAMIC_FORM_CONTROL_MAP_FN)?this.DYNAMIC_FORM_CONTROL_MAP_FN(t):null},t}();I.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new I(e.ɵɵinject(A,8))},token:I,providedIn:"root"}),I.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],I.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[A]},{type:e.Optional}]}]};var C,L=function(){function t(t,e){this.changeDetectorRef=t,this.componentService=e}return t.prototype.ngOnInit=function(){this.componentService.registerForm(this)},t.prototype.ngOnDestroy=function(){this.componentService.unregisterForm(this)},t.prototype.trackByFn=function(t,e){return e.id},t.prototype.markForCheck=function(){this.changeDetectorRef.markForCheck(),this.components instanceof e.QueryList&&this.components.forEach((function(t){return t.markForCheck()}))},t.prototype.detectChanges=function(){this.changeDetectorRef.detectChanges()},t.prototype.onBlur=function(t){this.blur.emit(t)},t.prototype.onChange=function(t){this.change.emit(t)},t.prototype.onFocus=function(t){this.focus.emit(t)},t.prototype.onCustomEvent=function(t,e){e.emit(t)},t}();function T(t){return g(t)&&t.hasOwnProperty("$event")}L.decorators=[{type:e.Directive}],L.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:I}]},(C=t.DynamicFormControlEventType||(t.DynamicFormControlEventType={})).Blur="blur",C.Change="change",C.Focus="focus";function b(t){return function(e,o){Reflect.defineMetadata("SERIALIZABLE",{key:o,name:t||o},e,o)}}function F(t){var e=[];for(var o in t){var n=Reflect.getMetadata("SERIALIZABLE",t,o);n&&e.push(n)}return e}function R(t,e){return F(e||t).reduce((function(e,o){return e[o.name]=t[o.key],e}),{})}var D=function(){function t(t,e){var n,r,i,a,s,l,p,u=this;void 0===e&&(e=null),this.parent=null,this.asyncValidators=null!==(n=t.asyncValidators)&&void 0!==n?n:null,this.errorMessages=null!==(r=t.errorMessages)&&void 0!==r?r:null,this.hidden=!!h(t.hidden)&&t.hidden,this.id=t.id,this.label=null!==(i=t.label)&&void 0!==i?i:null,this.labelTooltip=null!==(a=t.labelTooltip)&&void 0!==a?a:null,this.controlTooltip=null!==(s=t.controlTooltip)&&void 0!==s?s:null,this.layout=e,this.name=null!==(l=t.name)&&void 0!==l?l:t.id,this.relations=Array.isArray(t.relations)?t.relations:[],this.updateOn=v(t.updateOn)?t.updateOn:null,this.validators=null!==(p=t.validators)&&void 0!==p?p:null,this.disabled$=new o.BehaviorSubject(!!h(t.disabled)&&t.disabled),this.disabled$.subscribe((function(t){return u._disabled=t})),this.disabledChanges=this.disabled$.asObservable()}return Object.defineProperty(t.prototype,"disabled",{get:function(){return this.disabled$.getValue()},set:function(t){this.disabled$.next(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasErrorMessages",{get:function(){return g(this.errorMessages)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return R(this)},t}();p([b(),u("design:type",Object)],D.prototype,"asyncValidators",void 0),p([b("disabled"),u("design:type",Boolean)],D.prototype,"_disabled",void 0),p([b(),u("design:type",Object)],D.prototype,"errorMessages",void 0),p([b(),u("design:type",Boolean)],D.prototype,"hidden",void 0),p([b(),u("design:type",String)],D.prototype,"id",void 0),p([b(),u("design:type",String)],D.prototype,"label",void 0),p([b(),u("design:type",String)],D.prototype,"labelTooltip",void 0),p([b(),u("design:type",String)],D.prototype,"controlTooltip",void 0),p([b(),u("design:type",Object)],D.prototype,"layout",void 0),p([b(),u("design:type",String)],D.prototype,"name",void 0),p([b(),u("design:type",Array)],D.prototype,"relations",void 0),p([b(),u("design:type",String)],D.prototype,"updateOn",void 0),p([b(),u("design:type",Object)],D.prototype,"validators",void 0);var N=function(t){function e(e,n){var r,i,a,s=this;return(s=t.call(this,e,n)||this).additional=g(e.additional)?e.additional:null,s.hint=null!==(r=e.hint)&&void 0!==r?r:null,s.required=!!h(e.required)&&e.required,s.tabIndex=null!==(i=e.tabIndex)&&void 0!==i?i:null,s.value$=new o.BehaviorSubject(null!==(a=e.value)&&void 0!==a?a:null),s.value$.subscribe((function(t){return s._value=t})),s.valueChanges=s.value$.asObservable(),s}return l(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.value$.getValue()},set:function(t){this.value$.next(t)},enumerable:!1,configurable:!0}),e.prototype.getAdditional=function(t,e){return null!==this.additional&&this.additional.hasOwnProperty(t)?this.additional[t]:e},e}(D);p([b(),u("design:type",Object)],N.prototype,"additional",void 0),p([b(),u("design:type",String)],N.prototype,"hint",void 0),p([b(),u("design:type",Boolean)],N.prototype,"required",void 0),p([b(),u("design:type",Number)],N.prototype,"tabIndex",void 0),p([b("value"),u("design:type",Object)],N.prototype,"_value",void 0);var S=function(){function t(t,e,o){void 0===e&&(e=[]),void 0===o&&(o=-1),this.$implicit=this,this.context=t,this.group=e,this.index=o}return Object.defineProperty(t.prototype,"parent",{get:function(){return this.context},enumerable:!1,configurable:!0}),t.prototype.get=function(t){return this.group[t]},t.prototype.toJSON=function(){return R(this)},t}();p([b(),u("design:type",Array)],S.prototype,"group",void 0),p([b(),u("design:type",Number)],S.prototype,"index",void 0);var M=function(t){function e(e,o){var n,r,i=this;if((i=t.call(this,e,o)||this).groups=[],i.type="ARRAY",!f(e.groupFactory))throw new Error("group factory function must be specified for DynamicFormArrayModel");if(i.groupFactory=e.groupFactory,i.groupAsyncValidators=null!==(n=e.groupAsyncValidators)&&void 0!==n?n:null,i.groupPrototype=i.groupFactory(),i.groupValidators=null!==(r=e.groupValidators)&&void 0!==r?r:null,i.initialCount=m(e.initialCount)?e.initialCount:1,Array.isArray(e.groups))e.groups.forEach((function(t,e){var o;i.groups.push(new S(i,t.group,null!==(o=t.index)&&void 0!==o?o:e))}));else for(var a=0;a<i.initialCount;a++)i.addGroup();return i}return l(e,t),e.prototype.updateGroupIndex=function(){this.groups.forEach((function(t,e){return t.index=e}))},Object.defineProperty(e.prototype,"size",{get:function(){return this.groups.length},enumerable:!1,configurable:!0}),e.prototype.get=function(t){return this.groups[t]},e.prototype.addGroup=function(){return this.insertGroup(this.groups.length)},e.prototype.insertGroup=function(t){var e=new S(this,this.groupFactory());return this.groups.splice(t,0,e),this.updateGroupIndex(),e},e.prototype.moveGroup=function(t,e){var o;(o=this.groups).splice.apply(o,y([t+e,0],this.groups.splice(t,1))),this.updateGroupIndex()},e.prototype.removeGroup=function(t){this.groups.splice(t,1),this.updateGroupIndex()},e.prototype.clear=function(){this.groups.splice(0),this.updateGroupIndex()},e}(D);p([b(),u("design:type",Object)],M.prototype,"groupAsyncValidators",void 0),p([b(),u("design:type",Object)],M.prototype,"groupValidators",void 0),p([b(),u("design:type",Array)],M.prototype,"groups",void 0),p([b(),u("design:type",Number)],M.prototype,"initialCount",void 0),p([b(),u("design:type",Array)],M.prototype,"groupPrototype",void 0),p([b(),u("design:type",String)],M.prototype,"type",void 0);var P=function(t){function e(e,o){var n,r=this;return(r=t.call(this,e,o)||this).labelPosition=null!==(n=e.labelPosition)&&void 0!==n?n:null,r.checked=!!h(r.value)&&r.value,r}return l(e,t),Object.defineProperty(e.prototype,"checked",{get:function(){return this.value},set:function(t){this.value=t},enumerable:!1,configurable:!0}),e.prototype.toggle=function(){this.checked=!this.checked},e}(N);p([b(),u("design:type",String)],P.prototype,"labelPosition",void 0);var U=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.type="CHECKBOX",n.indeterminate=!!h(e.indeterminate)&&e.indeterminate,n}return l(e,t),e}(P);p([b(),u("design:type",Boolean)],U.prototype,"indeterminate",void 0),p([b(),u("design:type",String)],U.prototype,"type",void 0);var x=function(t){function e(e,o){var n,r,i,a,s=this;return(s=t.call(this,e,o)||this).autoComplete=null!==(n=e.autoComplete)&&void 0!==n?n:"on",s.autoFocus=!!h(e.autoFocus)&&e.autoFocus,s.maxLength=m(e.maxLength)?e.maxLength:null,s.minLength=m(e.minLength)?e.minLength:null,s.placeholder=null!==(r=e.placeholder)&&void 0!==r?r:"",s.prefix=null!==(i=e.prefix)&&void 0!==i?i:null,s.readOnly=!!h(e.readOnly)&&e.readOnly,s.spellCheck=!!h(e.spellCheck)&&e.spellCheck,s.suffix=null!==(a=e.suffix)&&void 0!==a?a:null,s}return l(e,t),e}(N);function Y(t){return v(t)?t:t instanceof RegExp?t.toString():Array.isArray(t)?t.map((function(t){return Y(t)})):null}function j(t){return v(t)?t.startsWith("/")&&t.endsWith("/")?new RegExp(t.slice(1,t.length-1)):t:Array.isArray(t)?t.map((function(t){return j(t)})):null}function w(t,e){return v(e)&&/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*))(?:Z|([+\-])([\d|:]*))?$/.test(e)?new Date(e):e}p([b(),u("design:type",String)],x.prototype,"autoComplete",void 0),p([b(),u("design:type",Boolean)],x.prototype,"autoFocus",void 0),p([b(),u("design:type",Number)],x.prototype,"maxLength",void 0),p([b(),u("design:type",Number)],x.prototype,"minLength",void 0),p([b(),u("design:type",String)],x.prototype,"placeholder",void 0),p([b(),u("design:type",String)],x.prototype,"prefix",void 0),p([b(),u("design:type",Boolean)],x.prototype,"readOnly",void 0),p([b(),u("design:type",Boolean)],x.prototype,"spellCheck",void 0),p([b(),u("design:type",String)],x.prototype,"suffix",void 0);var k,V=function(t){function e(e,o){var n,r,i,a,s=this;return(s=t.call(this,e,o)||this).files=null,s.list$=null,s._list=null,s._listId=null,s.type="INPUT",s.accept=null!==(n=e.accept)&&void 0!==n?n:null,s.inputType=null!==(r=e.inputType)&&void 0!==r?r:"text",s.mask=null!==(i=e.mask)&&void 0!==i?i:null,s.max=void 0!==e.max?e.max:null,s.min=void 0!==e.min?e.min:null,s.multiple=h(e.multiple)?e.multiple:null,s.pattern=null!==(a=e.pattern)&&void 0!==a?a:null,s.step=m(e.step)?e.step:null,void 0!==e.list&&(s.list=e.list,s._listId=s.id+"List"),s}return l(e,t),Object.defineProperty(e.prototype,"listId",{get:function(){return this._listId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasList",{get:function(){return o.isObservable(this.list$)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"list",{set:function(t){var e=this;Array.isArray(t)?(this._list=t,this.list$=o.of(this._list)):o.isObservable(t)?this.list$=t.pipe(r.tap((function(t){return e._list=t}))):(this._list=null,this.list$=null)},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return null!==this.mask&&(e.mask=f(this.mask)?this.mask:Y(this.mask)),e},e}(x);p([b(),u("design:type",String)],V.prototype,"accept",void 0),p([b(),u("design:type",String)],V.prototype,"inputType",void 0),p([b(),u("design:type",Object)],V.prototype,"mask",void 0),p([b(),u("design:type",Object)],V.prototype,"max",void 0),p([b(),u("design:type",Object)],V.prototype,"min",void 0),p([b(),u("design:type",Boolean)],V.prototype,"multiple",void 0),p([b(),u("design:type",String)],V.prototype,"pattern",void 0),p([b(),u("design:type",Number)],V.prototype,"step",void 0),p([b("list"),u("design:type",Array)],V.prototype,"_list",void 0),p([b(),u("design:type",String)],V.prototype,"type",void 0),(k=t.DYNAMIC_TEMPLATE_DIRECTIVE_ALIGNMENT||(t.DYNAMIC_TEMPLATE_DIRECTIVE_ALIGNMENT={})).Start="START",k.End="END";var G=function(e){this.templateRef=e,this.align=t.DYNAMIC_TEMPLATE_DIRECTIVE_ALIGNMENT.End,this.as=null};G.decorators=[{type:e.Directive,args:[{selector:"ng-template[modelId],ng-template[modelType]"}]}],G.ctorParameters=function(){return[{type:e.TemplateRef}]},G.propDecorators={align:[{type:e.Input}],as:[{type:e.Input}],index:[{type:e.Input}],modelId:[{type:e.Input}],modelType:[{type:e.Input}]};var B,H=function(){function o(){}return o.prototype.findById=function(t,e){var o,n;if(g(e))try{for(var r=c(Object.keys(e)),i=r.next();!i.done;i=r.next()){var a=i.value;if(a===t)return e[a]}}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return null},o.prototype.findByModel=function(t,e){var o,n,r=null;if(g(e)){var i=function(o){o.split(",").forEach((function(n){var i=n.trim();i!==t.id&&i!==t.type||(r=e[o])}))};try{for(var a=c(Object.keys(e)),s=a.next();!s.done;s=a.next()){i(s.value)}}catch(t){o={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}}return r},o.prototype.filterTemplatesByModel=function(t,o){var n=function(e){return e.modelId===t.id||e.modelType===t.type};return o instanceof e.QueryList||Array.isArray(o)?o.filter(n):[]},o.prototype.getAlignedTemplate=function(t,e,o){return this.filterTemplatesByModel(t,e).find((function(t){return null===t.as&&t.align===o}))},o.prototype.getStartTemplate=function(e,o){return this.getAlignedTemplate(e,o,t.DYNAMIC_TEMPLATE_DIRECTIVE_ALIGNMENT.Start)},o.prototype.getEndTemplate=function(e,o){return this.getAlignedTemplate(e,o,t.DYNAMIC_TEMPLATE_DIRECTIVE_ALIGNMENT.End)},o.prototype.getClass=function(t,e,o){if(g(t)&&t.hasOwnProperty(e)){var n=t[e];if(n.hasOwnProperty(o))return n[o]}return""},o.prototype.getHostClass=function(t){var e="";return g(t)&&["element","grid"].forEach((function(o){g(t[o])&&v(t[o].host)&&(e=e+" "+t[o].host)})),e},o.prototype.getElementId=function(t){for(var e=t.id,o=t.parent;null!==o;){if(o instanceof S){e=o.context.id+"-"+o.index+"-"+t.id;break}o=o.parent}return e},o}();H.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new H},token:H,providedIn:"root"}),H.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],(B=t.DynamicFormHook||(t.DynamicFormHook={})).Blur="blur",B.Change="change",B.Submit="submit";var K=new e.InjectionToken("DYNAMIC_VALIDATORS"),X=function(t,e,o){return t.touched&&!o},$=new e.InjectionToken("DYNAMIC_ERROR_MESSAGES_MATCHER"),z=function(){function e(t,e,o,n){this._NG_VALIDATORS=t,this._NG_ASYNC_VALIDATORS=e,this._DYNAMIC_VALIDATORS=o,this._DYNAMIC_ERROR_MESSAGES_MATCHER=n}return e.prototype.getValidatorFn=function(t,e,o){var n;if(void 0===e&&(e=null),void 0===o&&(o=this._NG_VALIDATORS),i.Validators.hasOwnProperty(t)?n=i.Validators[t]:this._DYNAMIC_VALIDATORS&&this._DYNAMIC_VALIDATORS.has(t)?n=this._DYNAMIC_VALIDATORS.get(t):o&&(n=o.find((function(e){return e.name===t}))),void 0===n)throw new Error('validator "'+t+'" is not provided via NG_VALIDATORS, NG_ASYNC_VALIDATORS or DYNAMIC_FORM_VALIDATORS');return null!==e?n(e):n},e.prototype.getValidatorFns=function(t,e){var o=this;void 0===e&&(e=this._NG_VALIDATORS);var n=[];return g(t)&&(n=Object.keys(t).map((function(n){var r=t[n];if(o.isValidatorDescriptor(r)){var i=r;return o.getValidatorFn(i.name,i.args,e)}return o.getValidatorFn(n,r,e)}))),n},e.prototype.getValidator=function(t,e){return void 0===e&&(e=null),this.getValidatorFn(t,e)},e.prototype.getAsyncValidator=function(t,e){return void 0===e&&(e=null),this.getValidatorFn(t,e,this._NG_ASYNC_VALIDATORS)},e.prototype.getValidators=function(t){return this.getValidatorFns(t)},e.prototype.getAsyncValidators=function(t){return this.getValidatorFns(t,this._NG_ASYNC_VALIDATORS)},e.prototype.updateValidators=function(t,e,o){o.validators=t,null===t?e.clearValidators():e.setValidators(this.getValidators(t)),e.updateValueAndValidity()},e.prototype.updateAsyncValidators=function(t,e,o){o.asyncValidators=t,null===t?e.clearAsyncValidators():e.setAsyncValidators(this.getAsyncValidators(t)),e.updateValueAndValidity()},e.prototype.showErrorMessages=function(t,e,o){var n=t.invalid&&e.hasErrorMessages,r=this._DYNAMIC_ERROR_MESSAGES_MATCHER?this._DYNAMIC_ERROR_MESSAGES_MATCHER(t,e,o):X(t,0,o);return n&&r},e.prototype.parseErrorMessageConfig=function(t,e,o){return void 0===o&&(o=null),t.replace(/{{\s*(.+?)\s*}}/gm,(function(t,n){var r=e,i=n;return n.indexOf("validator.")>=0&&o&&(r=o,i=n.replace("validator.","")),null!==r[i]&&void 0!==r[i]?r[i]:null}))},e.prototype.createErrorMessages=function(t,e){var o=this,n=[];if(e.hasErrorMessages){var r=e.errorMessages;Object.keys(t.errors||{}).forEach((function(i){var a=i;if("minlength"!==i&&"maxlength"!==i||(a=a.replace("length","Length")),r.hasOwnProperty(a)){var s=t.getError(i),l=r[a];n.push(o.parseErrorMessageConfig(l,e,s))}}))}return n},e.prototype.isFormHook=function(e){return v(e)&&Object.values(t.DynamicFormHook).includes(e)},e.prototype.isValidatorDescriptor=function(t){return!!g(t)&&(t.hasOwnProperty("name")&&t.hasOwnProperty("args"))},e}();z.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new z(e.ɵɵinject(i.NG_VALIDATORS,8),e.ɵɵinject(i.NG_ASYNC_VALIDATORS,8),e.ɵɵinject(K,8),e.ɵɵinject($,8))},token:z,providedIn:"root"}),z.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],z.ctorParameters=function(){return[{type:Array,decorators:[{type:e.Optional},{type:e.Inject,args:[i.NG_VALIDATORS]}]},{type:Array,decorators:[{type:e.Optional},{type:e.Inject,args:[i.NG_ASYNC_VALIDATORS]}]},{type:Map,decorators:[{type:e.Optional},{type:e.Inject,args:[K]}]},{type:void 0,decorators:[{type:e.Optional},{type:e.Inject,args:[$]}]}]};var W=function(t){function e(e,o){var n,r=this;return(r=t.call(this,e,o)||this).group=[],r.type="GROUP",r.group=Array.isArray(e.group)?e.group:[],r.legend=null!==(n=e.legend)&&void 0!==n?n:null,r}return l(e,t),e.prototype.get=function(t){return this.group[t]},e.prototype.set=function(t,e){this.group[t]=e},e.prototype.add=function(t){this.group.push(t)},e.prototype.insert=function(t,e){this.group.splice(t,0,e)},e.prototype.move=function(t,e){var o;(o=this.group).splice.apply(o,y([t+e,0],this.group.splice(t,1)))},e.prototype.remove=function(t){this.group.splice(t,1)},e.prototype.size=function(){return this.group.length},e}(D);p([b(),u("design:type",Array)],W.prototype,"group",void 0),p([b(),u("design:type",String)],W.prototype,"legend",void 0),p([b(),u("design:type",String)],W.prototype,"type",void 0);var q=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.type="CHECKBOX_GROUP",n}return l(e,t),e.prototype.check=function(){for(var t=this,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];e.forEach((function(e){return t.group[e].checked=!0}))},e.prototype.uncheck=function(){for(var t=this,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];e.forEach((function(e){return t.group[e].checked=!1}))},e.prototype.checkAll=function(){this.group.forEach((function(t){return t.checked=!0}))},e.prototype.uncheckAll=function(){this.group.forEach((function(t){return t.checked=!1}))},e}(W);p([b(),u("design:type",Array)],q.prototype,"group",void 0),p([b(),u("design:type",String)],q.prototype,"type",void 0);var J=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.type="COLORPICKER",n.format=v(e.format)?e.format:null,n.inline=!!h(e.inline)&&e.inline,n}return l(e,t),e}(N);p([b(),u("design:type",String)],J.prototype,"format",void 0),p([b(),u("design:type",Boolean)],J.prototype,"inline",void 0),p([b(),u("design:type",String)],J.prototype,"type",void 0);var Q=function(t){function e(e,o){var n,r,i,a,s=this;return(s=t.call(this,e,o)||this).format=null!==(n=e.format)&&void 0!==n?n:null,s.max=null!==(r=e.max)&&void 0!==r?r:null,s.min=null!==(i=e.min)&&void 0!==i?i:null,s.placeholder=null!==(a=e.placeholder)&&void 0!==a?a:null,s}return l(e,t),e}(N);p([b(),u("design:type",String)],Q.prototype,"format",void 0),p([b(),u("design:type",Object)],Q.prototype,"max",void 0),p([b(),u("design:type",Object)],Q.prototype,"min",void 0),p([b(),u("design:type",String)],Q.prototype,"placeholder",void 0);var Z=function(t){function e(e,o){var n,r,i,a=this;return(a=t.call(this,e,o)||this).type="DATEPICKER",a.autoFocus=!!h(e.autoFocus)&&e.autoFocus,a.focusedDate=null!==(n=e.focusedDate)&&void 0!==n?n:null,a.inline=!!h(e.inline)&&e.inline,a.prefix=null!==(r=e.prefix)&&void 0!==r?r:null,a.readOnly=!!h(e.readOnly)&&e.readOnly,a.toggleIcon=v(e.toggleIcon)?e.toggleIcon:null,a.toggleLabel=v(e.toggleLabel)?e.toggleLabel:null,a.suffix=null!==(i=e.suffix)&&void 0!==i?i:null,a}return l(e,t),e}(Q);p([b(),u("design:type",Boolean)],Z.prototype,"autoFocus",void 0),p([b(),u("design:type",Object)],Z.prototype,"focusedDate",void 0),p([b(),u("design:type",Boolean)],Z.prototype,"inline",void 0),p([b(),u("design:type",String)],Z.prototype,"prefix",void 0),p([b(),u("design:type",Boolean)],Z.prototype,"readOnly",void 0),p([b(),u("design:type",String)],Z.prototype,"suffix",void 0),p([b(),u("design:type",String)],Z.prototype,"toggleIcon",void 0),p([b(),u("design:type",String)],Z.prototype,"toggleLabel",void 0),p([b(),u("design:type",String)],Z.prototype,"type",void 0);var tt=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.type="EDITOR",n}return l(e,t),e}(x);p([b(),u("design:type",String)],tt.prototype,"type",void 0);var et=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.multiple=!!h(e.multiple)&&e.multiple,n}return l(e,t),e}(N);p([b(),u("design:type",Boolean)],et.prototype,"multiple",void 0);var ot=function(t){function e(e,o){var n,r,i=this;return(i=t.call(this,e,o)||this).type="FILE_UPLOAD",i.accept=Array.isArray(e.accept)?e.accept:null,i.autoUpload=!h(e.autoUpload)||e.autoUpload,i.maxSize=m(e.maxSize)?e.maxSize:null,i.minSize=m(e.minSize)?e.minSize:null,i.removeUrl=null!==(n=e.removeUrl)&&void 0!==n?n:null,i.showFileList=!h(e.showFileList)||e.showFileList,i.url=null!==(r=e.url)&&void 0!==r?r:null,i}return l(e,t),e}(et);p([b(),u("design:type",Array)],ot.prototype,"accept",void 0),p([b(),u("design:type",Boolean)],ot.prototype,"autoUpload",void 0),p([b(),u("design:type",Number)],ot.prototype,"maxSize",void 0),p([b(),u("design:type",Number)],ot.prototype,"minSize",void 0),p([b(),u("design:type",String)],ot.prototype,"removeUrl",void 0),p([b(),u("design:type",Boolean)],ot.prototype,"showFileList",void 0),p([b(),u("design:type",String)],ot.prototype,"url",void 0),p([b(),u("design:type",String)],ot.prototype,"type",void 0);var nt=function(){function t(t){var e;this.disabled=!!h(t.disabled)&&t.disabled,this.label=null!==(e=t.label)&&void 0!==e?e:null,this.value=t.value}return Object.defineProperty(t.prototype,"text",{get:function(){return this.label},set:function(t){this.label=t},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return R(this)},t}();p([b(),u("design:type",Boolean)],nt.prototype,"disabled",void 0),p([b(),u("design:type",String)],nt.prototype,"label",void 0),p([b(),u("design:type",Object)],nt.prototype,"value",void 0);var rt=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n._options=[],n.options=e.options,n}return l(e,t),e.prototype.updateOptions$=function(){this.options$=o.of(this.options)},Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(t){var e=this;Array.isArray(t)?(this._options=t.map((function(t){return new nt(t)})),this.updateOptions$()):o.isObservable(t)?this.options$=t.pipe(r.map((function(t){return e._options=t.map((function(t){return new nt(t)})),e._options}))):this.updateOptions$()},enumerable:!1,configurable:!0}),e.prototype.add=function(t){return this.insert(this.options.length,t)},e.prototype.get=function(t){return this.options[t]},e.prototype.insert=function(t,e){var o=new nt(e);return this.options.splice(t,0,o),this.updateOptions$(),o},e.prototype.remove=function(){for(var t=this,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];e.forEach((function(e){return t.options.splice(e,1)})),this.updateOptions$()},e}(N);p([b("options"),u("design:type",Array)],rt.prototype,"_options",void 0);var it=function(t){function e(e,o){var n,r=this;return(r=t.call(this,e,o)||this).type="RADIO_GROUP",r.legend=null!==(n=e.legend)&&void 0!==n?n:null,r}return l(e,t),e.prototype.select=function(t){this.value=this.get(t).value},e}(rt);p([b(),u("design:type",String)],it.prototype,"legend",void 0),p([b(),u("design:type",String)],it.prototype,"type",void 0);var at=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.type="RATING",n.max=m(e.max)?e.max:10,n}return l(e,t),e}(N);p([b(),u("design:type",Number)],at.prototype,"max",void 0),p([b(),u("design:type",String)],at.prototype,"type",void 0);var st=function(t){function e(e,o){var n,r,i,a=this;return(a=t.call(this,e,o)||this).type="SELECT",a.compareWithFn=f(e.compareWithFn)?e.compareWithFn:Object.is,a.filterable=!!h(e.filterable)&&e.filterable,a.multiple=!!h(e.multiple)&&e.multiple,a.placeholder=null!==(n=e.placeholder)&&void 0!==n?n:"",a.prefix=null!==(r=e.prefix)&&void 0!==r?r:null,a.suffix=null!==(i=e.suffix)&&void 0!==i?i:null,a}return l(e,t),e.prototype.select=function(){for(var t=this,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];this.value=this.multiple?e.map((function(e){return t.get(e).value})):this.get(e[0]).value},e}(rt);p([b(),u("design:type",Boolean)],st.prototype,"filterable",void 0),p([b(),u("design:type",Boolean)],st.prototype,"multiple",void 0),p([b(),u("design:type",String)],st.prototype,"placeholder",void 0),p([b(),u("design:type",String)],st.prototype,"prefix",void 0),p([b(),u("design:type",String)],st.prototype,"suffix",void 0),p([b(),u("design:type",String)],st.prototype,"type",void 0);var lt=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.type="SLIDER",n.max=m(e.max)?e.max:10,n.min=m(e.min)?e.min:0,n.step=m(e.step)?e.step:1,n.vertical=!!h(e.vertical)&&e.vertical,n}return l(e,t),e}(N);p([b(),u("design:type",Number)],lt.prototype,"max",void 0),p([b(),u("design:type",Number)],lt.prototype,"min",void 0),p([b(),u("design:type",Number)],lt.prototype,"step",void 0),p([b(),u("design:type",Boolean)],lt.prototype,"vertical",void 0),p([b(),u("design:type",String)],lt.prototype,"type",void 0);var pt=function(t){function e(e,o){var n,r,i=this;return(i=t.call(this,e,o)||this).type="SWITCH",i.offLabel=null!==(n=e.offLabel)&&void 0!==n?n:null,i.onLabel=null!==(r=e.onLabel)&&void 0!==r?r:null,i}return l(e,t),e}(P);p([b(),u("design:type",String)],pt.prototype,"offLabel",void 0),p([b(),u("design:type",String)],pt.prototype,"onLabel",void 0),p([b(),u("design:type",String)],pt.prototype,"type",void 0);var ut=function(t){function e(e,o){var n,r=this;return(r=t.call(this,e,o)||this).type="TEXTAREA",r.cols=m(e.cols)?e.cols:20,r.rows=m(e.rows)?e.rows:2,r.wrap=null!==(n=e.wrap)&&void 0!==n?n:"soft",r}return l(e,t),e}(x);p([b(),u("design:type",Number)],ut.prototype,"cols",void 0),p([b(),u("design:type",Number)],ut.prototype,"rows",void 0),p([b(),u("design:type",String)],ut.prototype,"wrap",void 0),p([b(),u("design:type",String)],ut.prototype,"type",void 0);var ct=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.type="TIMEPICKER",n.meridian=!!h(e.meridian)&&e.meridian,n.showSeconds=!!h(e.showSeconds)&&e.showSeconds,n}return l(e,t),e}(Q);p([b(),u("design:type",Boolean)],ct.prototype,"meridian",void 0),p([b(),u("design:type",Boolean)],ct.prototype,"showSeconds",void 0),p([b(),u("design:type",String)],ct.prototype,"type",void 0);var dt=function(){function e(t,e){this.componentService=t,this.validationService=e}return e.prototype.createAbstractControlOptions=function(e,o,n){return void 0===e&&(e=null),void 0===o&&(o=null),void 0===n&&(n=null),{asyncValidators:null!==o?this.validationService.getAsyncValidators(o):null,validators:null!==e?this.validationService.getValidators(e):null,updateOn:null!==n&&this.validationService.isFormHook(n)?n:t.DynamicFormHook.Change}},e.prototype.createFormArray=function(t){for(var e=[],o=this.createAbstractControlOptions(t.validators,t.asyncValidators,t.updateOn),n=0;n<t.size;n++){var r=t.get(n),a=this.createAbstractControlOptions(t.groupValidators,t.groupAsyncValidators,t.updateOn);e.push(this.createFormGroup(r.group,a,r))}return new i.FormArray(e,o)},e.prototype.createFormGroup=function(t,e,o){var n=this;void 0===e&&(e=null),void 0===o&&(o=null);var r={};return t.forEach((function(t){switch(t.parent=o,t.type){case"ARRAY":r[t.id]=n.createFormArray(t);break;case"GROUP":case"CHECKBOX_GROUP":var e=t,a=n.createAbstractControlOptions(e.validators,e.asyncValidators,e.updateOn);r[t.id]=n.createFormGroup(e.group,a,e);break;default:var s=t,l={value:s.value,disabled:s.disabled},p=n.createAbstractControlOptions(s.validators,s.asyncValidators,s.updateOn);r[t.id]=new i.FormControl(l,p)}})),new i.FormGroup(r,e)},e.prototype.getPathSegment=function(t){return t instanceof S?t.index.toString():t.id},e.prototype.getPath=function(t,e){void 0===e&&(e=!1);for(var o=[this.getPathSegment(t)],n=t.parent;n;)o.unshift(this.getPathSegment(n)),n=n.parent;return e?o.join("."):o},e.prototype.addFormGroupControl=function(t,e){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];if(e instanceof W)this.insertFormGroupControl.apply(this,y([e.size(),t,e],o));else{var r=e;this.insertFormGroupControl.apply(this,y([r.length,t,r],o))}},e.prototype.moveFormGroupControl=function(t,e,o){if(o instanceof W)o.move(t,e);else{var n=o;n.splice.apply(n,y([t+e,0],n.splice(t,1)))}},e.prototype.insertFormGroupControl=function(t,e,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];var i=o instanceof W?o:null,a=this.createFormGroup(n,null,i).controls;Object.keys(a).forEach((function(r,i){var s=n[i];o instanceof W?o.insert(t,s):o.splice(t,0,s),e.addControl(r,a[r])}))},e.prototype.removeFormGroupControl=function(t,e,o){o instanceof W?(e.removeControl(o.get(t).id),o.remove(t)):(e.removeControl(o[t].id),o.splice(t,1))},e.prototype.addFormArrayGroup=function(t,e){var o=e.addGroup();t.push(this.createFormGroup(o.group,null,o))},e.prototype.insertFormArrayGroup=function(t,e,o){var n=o.insertGroup(t);e.insert(t,this.createFormGroup(n.group,null,n))},e.prototype.moveFormArrayGroup=function(t,e,o,n){var r=t+e,i=e>=0;if(!(t>=0&&t<n.size&&r>=0&&r<n.size))throw new Error("form array group cannot be moved due to index or new index being out of bounds");for(var a=[],s=i?t:r;s<=(i?r:t);s++)a.push(o.at(s));a.forEach((function(e,n){var s;s=i?0===n?r:t+n-1:n===a.length-1?r:r+n+1,o.setControl(s,e)})),n.moveGroup(t,e)},e.prototype.removeFormArrayGroup=function(t,e,o){e.removeAt(t),o.removeGroup(t)},e.prototype.clearFormArray=function(t,e){t.clear(),e.clear()},e.prototype.findById=function(t,e){var o=null,n=function(t,e){var r,i;try{for(var a=c(e),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.id===t){o=l;break}l instanceof W&&n(t,l.group)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}};return n(t,e),o},e.prototype.findModelById=function(t,e){return this.findById(t,e)},e.prototype.findControlByModel=function(t,e){return e.root.get(this.getPath(t,!0))},e.prototype.detectChanges=function(t){var e,o;if(t instanceof L)t.markForCheck(),t.detectChanges();else try{for(var n=c(this.componentService.getForms()),r=n.next();!r.done;r=n.next()){var i=r.value;i.markForCheck(),i.detectChanges()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(e)throw e.error}}},e.prototype.fromJSON=function(t){var e=this,o=v(t)?JSON.parse(t,w):t,n=[];return o.forEach((function(t){var o,r=null!==(o=t.layout)&&void 0!==o?o:null;switch(t.type){case"ARRAY":var i=t;Array.isArray(i.groups)&&i.groups.forEach((function(t){t.group=e.fromJSON(t.group)})),i.groupFactory=function(){return e.fromJSON(i.groupPrototype)},n.push(new M(t,r));break;case"CHECKBOX":n.push(new U(t,r));break;case"CHECKBOX_GROUP":t.group=e.fromJSON(t.group),n.push(new q(t,r));break;case"COLORPICKER":n.push(new J(t,r));break;case"DATEPICKER":n.push(new Z(t,r));break;case"EDITOR":n.push(new tt(t,r));break;case"FILE_UPLOAD":t.value=null,n.push(new ot(t,r));break;case"GROUP":t.group=e.fromJSON(t.group),n.push(new W(t,r));break;case"INPUT":var a=t;null!==a.mask&&(a.mask instanceof Function||(a.mask=j(a.mask))),n.push(new V(t,r));break;case"RADIO_GROUP":n.push(new it(t,r));break;case"RATING":n.push(new at(t,r));break;case"SELECT":n.push(new st(t,r));break;case"SLIDER":n.push(new lt(t,r));break;case"SWITCH":n.push(new pt(t,r));break;case"TEXTAREA":n.push(new ut(t,r));break;case"TIMEPICKER":n.push(new ct(t,r));break;default:throw new Error('unknown form control model type defined on JSON object with id "'+t.id+'"')}})),n},e}();dt.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new dt(e.ɵɵinject(I),e.ɵɵinject(z))},token:dt,providedIn:"root"}),dt.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],dt.ctorParameters=function(){return[{type:I},{type:z}]};var yt=new e.InjectionToken("DYNAMIC_MATCHERS"),ht={match:"DISABLED",opposingMatch:"ENABLED",onChange:function(t,e){e.disabled=t}},ft={match:"HIDDEN",opposingMatch:"VISIBLE",onChange:function(t,e){e.hidden=t}},mt={match:"REQUIRED",opposingMatch:"OPTIONAL",onChange:function(t,e,o,n){var r=null;t?r=g(e.validators)?Object.assign(Object.assign({},e.validators),{required:null}):{required:null}:g(e.validators)&&(delete e.validators.required,r=Object.assign({},e.validators)),n.get(z).updateValidators(r,o,e),n.get(dt).detectChanges()}},gt={provide:yt,useValue:ht,multi:!0},vt={provide:yt,useValue:ft,multi:!0},_t={provide:yt,useValue:mt,multi:!0},Ot=[gt,vt,_t],Et=function(){function t(t,e){this.MATCHERS=t,this.injector=e}return t.prototype.getRelatedFormControls=function(t,e){var o=function(t,o){var n,r=null!==(n=o.rootPath)&&void 0!==n?n:o.id;if(!t.hasOwnProperty(r)){var a=o.rootPath?e.root.get(o.rootPath):e.get(o.id);a instanceof i.FormControl?t[r]=a:console.warn("No related form control with id "+o.id+" could be found")}return t};return t.relations.reduce((function(t,e){return e.when.reduce(o,t)}),{})},t.prototype.findRelationByMatcher=function(t,e){return t.find((function(t){return[e.match,e.opposingMatch].includes(t.match)}))},t.prototype.matchesCondition=function(t,e,o){var n,r=null!==(n=t.operator)&&void 0!==n?n:"OR";return t.when.reduce((function(n,i,a){var s,l,p,u,y=null!==(p=i.rootPath)&&void 0!==p?p:i.id;try{for(var h=c(Object.entries(e)),f=h.next();!f.done;f=h.next()){var m=d(f.value,2),g=m[0],v=m[1];if(g===y){u=v;break}}}catch(t){s={error:t}}finally{try{f&&!f.done&&(l=h.return)&&l.call(h)}finally{if(s)throw s.error}}return u&&t.match===o.match?!(a>0&&"AND"===r&&!n)&&(!!(a>0&&"OR"===r&&n)||(i.value===u.value||i.status===u.status)):!(!u||t.match!==o.opposingMatch)&&(!!(a>0&&"AND"===r&&n)||!(a>0&&"OR"===r&&!n)&&!(i.value===u.value||i.status===u.status))}),!1)},t.prototype.subscribeRelations=function(t,e,n){var i=this,a=this.getRelatedFormControls(t,e),s=[];return Object.values(a).forEach((function(e){var l=e.valueChanges.pipe(r.startWith(e.value)),p=e.statusChanges.pipe(r.startWith(e.status));s.push(o.merge(l,p).subscribe((function(){i.MATCHERS.forEach((function(e){var o=i.findRelationByMatcher(t.relations,e);if(void 0!==o){var r=i.matchesCondition(o,a,e);e.onChange(r,t,n,i.injector)}}))})))})),s},t}();Et.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new Et(e.ɵɵinject(yt,8),e.ɵɵinject(e.INJECTOR))},token:Et,providedIn:"root"}),Et.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],Et.ctorParameters=function(){return[{type:Array,decorators:[{type:e.Optional},{type:e.Inject,args:[yt]}]},{type:e.Injector}]};var At=function(){function e(t,e,o,n,r,i){this.changeDetectorRef=t,this.componentFactoryResolver=e,this.layoutService=o,this.validationService=n,this.componentService=r,this.relationService=i,this._hasFocus=!1,this.context=null,this.componentSubscriptions=[],this.subscriptions=[]}return e.prototype.ngOnChanges=function(t){var e=t.group,o=t.layout,n=t.model;(o||n)&&this.onLayoutOrModelChange(),n&&this.onModelChange(),(e||n)&&this.onGroupOrModelChange()},e.prototype.ngOnDestroy=function(){this.destroyFormControlComponent(),this.unsubscribe()},Object.defineProperty(e.prototype,"id",{get:function(){return this.layoutService.getElementId(this.model)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasFocus",{get:function(){return this._hasFocus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInvalid",{get:function(){return this.control.invalid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isValid",{get:function(){return this.control.valid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorMessages",{get:function(){return this.validationService.createErrorMessages(this.control,this.model)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showErrorMessages",{get:function(){return this.validationService.showErrorMessages(this.control,this.model,this.hasFocus)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasLabel",{get:function(){return v(this.model.label)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasHint",{get:function(){return v(this.model.hint)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hint",{get:function(){var t;return null!==(t=this.model.hint)&&void 0!==t?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCheckbox",{get:function(){return"CHECKBOX"===this.model.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templates",{get:function(){return void 0!==this.inputTemplateList?this.inputTemplateList:this.contentTemplateList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startTemplate",{get:function(){return"ARRAY"!==this.model.type?this.layoutService.getStartTemplate(this.model,this.templates):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endTemplate",{get:function(){return"ARRAY"!==this.model.type?this.layoutService.getEndTemplate(this.model,this.templates):void 0},enumerable:!1,configurable:!0}),e.prototype.getClass=function(t,e){return this.layoutService.getClass(this.controlLayout,t,e)},e.prototype.markForCheck=function(){this.changeDetectorRef.markForCheck();var t=this.componentRef&&this.componentRef.instance;t&&(t instanceof E||t instanceof O)&&t.markForCheck()},e.prototype.createFormControlComponent=function(){var t=this,e=this.componentType;if(null!==e){var o=this.componentFactoryResolver.resolveComponentFactory(e);this.componentViewContainerRef.clear(),this.componentRef=this.componentViewContainerRef.createComponent(o);var n=this.componentRef.instance;n.formLayout=this.layout,n.group=this.group,n.layout=this.controlLayout,n.model=this.model,this.templates&&(n.templates=this.templates),this.componentSubscriptions.push(n.blur.subscribe((function(e){return t.onBlur(e)}))),this.componentSubscriptions.push(n.change.subscribe((function(e){return t.onChange(e)}))),this.componentSubscriptions.push(n.focus.subscribe((function(e){return t.onFocus(e)}))),void 0!==n.customEvent&&this.componentSubscriptions.push(n.customEvent.subscribe((function(e){return t.onCustomEvent(e)}))),this.registerFormControlComponentRef(this.componentRef)}},e.prototype.destroyFormControlComponent=function(){this.componentRef&&(this.componentSubscriptions.forEach((function(t){return t.unsubscribe()})),this.componentSubscriptions=[],this.unregisterFormControlComponentRef(),this.componentRef.destroy())},e.prototype.createDynamicFormControlEvent=function(t,e){return{$event:t,context:this.context,control:this.control,group:this.group,model:this.model,type:e}},e.prototype.unsubscribe=function(){this.subscriptions.forEach((function(t){return t.unsubscribe()})),this.subscriptions=[]},e.prototype.onControlValueChanges=function(t){this.model instanceof N&&this.model.value!==t&&(this.model.value=t)},e.prototype.onModelValueUpdates=function(t){this.control.value!==t&&this.control.setValue(t)},e.prototype.onModelDisabledUpdates=function(t){t?this.control.disable():this.control.enable()},e.prototype.onLayoutOrModelChange=function(){var t;this.controlLayout=null!==(t=this.layoutService.findByModel(this.model,this.layout))&&void 0!==t?t:this.model.layout,this.klass=(Array.isArray(this.hostClass)?this.hostClass.join(" "):"")+" "+this.layoutService.getHostClass(this.controlLayout)},e.prototype.onModelChange=function(){this.destroyFormControlComponent(),this.createFormControlComponent()},e.prototype.onGroupOrModelChange=function(){var t,e=this;if(this.model){if(this.unsubscribe(),this.group&&(this.control=this.group.get(this.model.id),this.subscriptions.push(this.control.valueChanges.subscribe((function(t){return e.onControlValueChanges(t)})))),this.subscriptions.push(this.model.disabledChanges.subscribe((function(t){return e.onModelDisabledUpdates(t)}))),this.model instanceof N){var o=this.model;this.subscriptions.push(o.valueChanges.subscribe((function(t){return e.onModelValueUpdates(t)})))}this.model.relations.length>0&&(t=this.subscriptions).push.apply(t,y(this.relationService.subscribeRelations(this.model,this.group,this.control)))}},e.prototype.onChange=function(e){var o;if(e instanceof Event){if("INPUT"===this.model.type){var n=this.model;if("file"===n.inputType){var r=null!==(o=e.target)&&void 0!==o?o:e.srcElement;n.files=r.files}}this.change.emit(this.createDynamicFormControlEvent(e,t.DynamicFormControlEventType.Change))}else T(e)?this.change.emit(e):this.change.emit(this.createDynamicFormControlEvent(e,t.DynamicFormControlEventType.Change))},e.prototype.onBlur=function(e){T(e)?this.blur.emit(e):(this._hasFocus=!1,this.blur.emit(this.createDynamicFormControlEvent(e,t.DynamicFormControlEventType.Blur)))},e.prototype.onFocus=function(e){T(e)?this.focus.emit(e):(this._hasFocus=!0,this.focus.emit(this.createDynamicFormControlEvent(e,t.DynamicFormControlEventType.Focus)))},e.prototype.onCustomEvent=function(t){var e=this.customEvent;T(t)?e.emit(t):e.emit(this.createDynamicFormControlEvent(t.customEvent,t.customEventType))},e.prototype.registerFormControlComponentRef=function(t){this.context instanceof S?this.componentService.registerFormControl(this.model,t,this.context.index):this.componentService.registerFormControl(this.model,t)},e.prototype.unregisterFormControlComponentRef=function(){this.context instanceof S?this.componentService.unregisterFormControl(this.model.id,this.context.index):this.componentService.unregisterFormControl(this.model.id)},e}();At.decorators=[{type:e.Directive}],At.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:e.ComponentFactoryResolver},{type:H},{type:z},{type:I},{type:Et}]};var It=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.layoutService=e,n.validationService=o,n}return l(e,t),e.prototype.ngAfterViewInit=function(){var t=this;this.layoutService.filterTemplatesByModel(this.model,this.templates).forEach((function(e){return t.bindTemplate(e)}))},e.prototype.bindTemplate=function(t){if(v(t.as)&&this.templateDirectives.has(t.as)){var e=this.templateDirectives.get(t.as);this.viewChild[e]=this.mapTemplate(t)}},e}(_);It.decorators=[{type:e.Directive}],It.ctorParameters=function(){return[{type:H},{type:z}]};var Ct=function(){function t(t,e){this.elementRef=t,this.renderer=e}return t.prototype.ngAfterViewInit=function(){v(this.listId)&&this.renderer.setAttribute(this.elementRef.nativeElement,"list",this.listId)},t}();Ct.decorators=[{type:e.Directive,args:[{selector:"[dynamicList]"}]}],Ct.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer2}]},Ct.propDecorators={listId:[{type:e.Input,args:["dynamicList"]}]};var Lt=["billing","shipping"],Tt=["fax","home","mobile","pager","work"],bt=["street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","name","honorific-prefix","given-name","additional-name","family-name","honorific-suffix","nickname","username","new-password","current-password","organization-title","organization","country","country-name","postal-code","cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type","transaction-currency","transaction-amount","language","bday","bday-day","bday-month","bday-year","sex","url","photo"],Ft=["tel","tel-country-code","tel-national","tel-area-code","tel-local","tel-local-prefix","tel-local-suffix","tel-extension","email","impp"];var Rt=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[dt,H,z,I,Et]}},t}();Rt.decorators=[{type:e.NgModule,args:[{imports:[a.CommonModule,i.ReactiveFormsModule],declarations:[Ct,G],exports:[Ct,G]}]}],t.AND_OPERATOR="AND",t.AUTOCOMPLETE_OFF="off",t.AUTOCOMPLETE_ON="on",t.AUTOFILL_FIELDS=bt,t.AUTOFILL_FIELDS_CONTACT=Ft,t.AUTOFILL_FIELD_ADDITIONAL_NAME="additional-name",t.AUTOFILL_FIELD_ADDRESS_LEVEL_1="address-level1",t.AUTOFILL_FIELD_ADDRESS_LEVEL_2="address-level2",t.AUTOFILL_FIELD_ADDRESS_LEVEL_3="address-level3",t.AUTOFILL_FIELD_ADDRESS_LEVEL_4="address-level4",t.AUTOFILL_FIELD_ADDRESS_LINE_1="address-line1",t.AUTOFILL_FIELD_ADDRESS_LINE_2="address-line2",t.AUTOFILL_FIELD_ADDRESS_LINE_3="address-line3",t.AUTOFILL_FIELD_BDAY="bday",t.AUTOFILL_FIELD_BDAY_DAY="bday-day",t.AUTOFILL_FIELD_BDAY_MONTH="bday-month",t.AUTOFILL_FIELD_BDAY_YEAR="bday-year",t.AUTOFILL_FIELD_CC_ADDITIONAL_NAME="cc-additional-name",t.AUTOFILL_FIELD_CC_CSC="cc-csc",t.AUTOFILL_FIELD_CC_EXP="cc-exp",t.AUTOFILL_FIELD_CC_EXP_MONTH="cc-exp-month",t.AUTOFILL_FIELD_CC_EXP_YEAR="cc-exp-year",t.AUTOFILL_FIELD_CC_FAMILY_NAME="cc-family-name",t.AUTOFILL_FIELD_CC_GIVEN_NAME="cc-given-name",t.AUTOFILL_FIELD_CC_NAME="cc-name",t.AUTOFILL_FIELD_CC_NUMBER="cc-number",t.AUTOFILL_FIELD_CC_TYPE="cc-type",t.AUTOFILL_FIELD_COUNTRY="country",t.AUTOFILL_FIELD_COUNTRY_NAME="country-name",t.AUTOFILL_FIELD_CURRENT_PASSWORD="current-password",t.AUTOFILL_FIELD_EMAIL="email",t.AUTOFILL_FIELD_FAMILY_NAME="family-name",t.AUTOFILL_FIELD_GIVEN_NAME="given-name",t.AUTOFILL_FIELD_HONORIFIC_PREFIX="honorific-prefix",t.AUTOFILL_FIELD_HONORIFIC_SUFFIX="honorific-suffix",t.AUTOFILL_FIELD_IMPP="impp",t.AUTOFILL_FIELD_LANGUAGE="language",t.AUTOFILL_FIELD_NAME="name",t.AUTOFILL_FIELD_NEW_PASSWORD="new-password",t.AUTOFILL_FIELD_NICKNAME="nickname",t.AUTOFILL_FIELD_ORGANIZATION="organization",t.AUTOFILL_FIELD_ORGANIZATION_TITLE="organization-title",t.AUTOFILL_FIELD_PHOTO="photo",t.AUTOFILL_FIELD_POSTAL_CODE="postal-code",t.AUTOFILL_FIELD_SEX="sex",t.AUTOFILL_FIELD_STREET_ADDRESS="street-address",t.AUTOFILL_FIELD_TEL="tel",t.AUTOFILL_FIELD_TEL_AREA_CODE="tel-area-code",t.AUTOFILL_FIELD_TEL_COUNTRY_CODE="tel-country-code",t.AUTOFILL_FIELD_TEL_LOCAL="tel-local",t.AUTOFILL_FIELD_TEL_LOCAL_EXTENSION="tel-extension",t.AUTOFILL_FIELD_TEL_LOCAL_PREFIX="tel-local-prefix",t.AUTOFILL_FIELD_TEL_LOCAL_SUFFIX="tel-local-suffix",t.AUTOFILL_FIELD_TEL_NATIONAL="tel-national",t.AUTOFILL_FIELD_TRANSACTION_AMOUNT="transaction-amount",t.AUTOFILL_FIELD_TRANSACTION_CURRENCY="transaction-currency",t.AUTOFILL_FIELD_URL="url",t.AUTOFILL_FIELD_USERNAME="username",t.AUTOFILL_TOKENS_ADDRESS=Lt,t.AUTOFILL_TOKENS_CONTACT=Tt,t.AUTOFILL_TOKEN_BILLING="billing",t.AUTOFILL_TOKEN_FAX="fax",t.AUTOFILL_TOKEN_HOME="home",t.AUTOFILL_TOKEN_MOBILE="mobile",t.AUTOFILL_TOKEN_PAGER="pager",t.AUTOFILL_TOKEN_SHIPPING="shipping",t.AUTOFILL_TOKEN_WORK="work",t.CHANGE_ERROR_STATE_MATCHER=function(e,o,n){return o.updateOn===t.DynamicFormHook.Change||null===o.updateOn?e.dirty:e.touched&&!n},t.DEFAULT_ERROR_STATE_MATCHER=X,t.DISABLED_MATCHER=ht,t.DISABLED_MATCHER_PROVIDER=gt,t.DYNAMIC_ERROR_MESSAGES_MATCHER=$,t.DYNAMIC_FORM_CONTROL_INPUT_TYPE_COLOR="color",t.DYNAMIC_FORM_CONTROL_INPUT_TYPE_DATE="date",t.DYNAMIC_FORM_CONTROL_INPUT_TYPE_DATETIME_LOCAL="datetime-local",t.DYNAMIC_FORM_CONTROL_INPUT_TYPE_EMAIL="email",t.DYNAMIC_FORM_CONTROL_INPUT_TYPE_FILE="file",t.DYNAMIC_FORM_CONTROL_INPUT_TYPE_MONTH="month",t.DYNAMIC_FORM_CONTROL_INPUT_TYPE_NUMBER="number",t.DYNAMIC_FORM_CONTROL_INPUT_TYPE_PASSWORD="password",t.DYNAMIC_FORM_CONTROL_INPUT_TYPE_RANGE="range",t.DYNAMIC_FORM_CONTROL_INPUT_TYPE_SEARCH="search",t.DYNAMIC_FORM_CONTROL_INPUT_TYPE_TEL="tel",t.DYNAMIC_FORM_CONTROL_INPUT_TYPE_TEXT="text",t.DYNAMIC_FORM_CONTROL_INPUT_TYPE_TIME="time",t.DYNAMIC_FORM_CONTROL_INPUT_TYPE_URL="url",t.DYNAMIC_FORM_CONTROL_INPUT_TYPE_WEEK="week",t.DYNAMIC_FORM_CONTROL_MAP_FN=A,t.DYNAMIC_FORM_CONTROL_TYPE_ARRAY="ARRAY",t.DYNAMIC_FORM_CONTROL_TYPE_CHECKBOX="CHECKBOX",t.DYNAMIC_FORM_CONTROL_TYPE_CHECKBOX_GROUP="CHECKBOX_GROUP",t.DYNAMIC_FORM_CONTROL_TYPE_COLORPICKER="COLORPICKER",t.DYNAMIC_FORM_CONTROL_TYPE_DATEPICKER="DATEPICKER",t.DYNAMIC_FORM_CONTROL_TYPE_EDITOR="EDITOR",t.DYNAMIC_FORM_CONTROL_TYPE_FILE_UPLOAD="FILE_UPLOAD",t.DYNAMIC_FORM_CONTROL_TYPE_GROUP="GROUP",t.DYNAMIC_FORM_CONTROL_TYPE_INPUT="INPUT",t.DYNAMIC_FORM_CONTROL_TYPE_RADIO_GROUP="RADIO_GROUP",t.DYNAMIC_FORM_CONTROL_TYPE_RATING="RATING",t.DYNAMIC_FORM_CONTROL_TYPE_SELECT="SELECT",t.DYNAMIC_FORM_CONTROL_TYPE_SLIDER="SLIDER",t.DYNAMIC_FORM_CONTROL_TYPE_SWITCH="SWITCH",t.DYNAMIC_FORM_CONTROL_TYPE_TEXTAREA="TEXTAREA",t.DYNAMIC_FORM_CONTROL_TYPE_TIMEPICKER="TIMEPICKER",t.DYNAMIC_FORM_TEXTAREA_WRAP_HARD="hard",t.DYNAMIC_FORM_TEXTAREA_WRAP_SOFT="soft",t.DYNAMIC_MATCHERS=yt,t.DYNAMIC_MATCHER_PROVIDERS=Ot,t.DYNAMIC_VALIDATORS=K,t.DynamicCheckControlModel=P,t.DynamicCheckboxGroupModel=q,t.DynamicCheckboxModel=U,t.DynamicColorPickerModel=J,t.DynamicDateControlModel=Q,t.DynamicDatePickerModel=Z,t.DynamicEditorModel=tt,t.DynamicFileControlModel=et,t.DynamicFileUploadModel=ot,t.DynamicFormArrayComponent=O,t.DynamicFormArrayGroupModel=S,t.DynamicFormArrayModel=M,t.DynamicFormComponent=L,t.DynamicFormComponentService=I,t.DynamicFormControlComponent=_,t.DynamicFormControlContainerComponent=At,t.DynamicFormControlModel=D,t.DynamicFormControlWithTemplateComponent=It,t.DynamicFormGroupComponent=E,t.DynamicFormGroupModel=W,t.DynamicFormLayoutService=H,t.DynamicFormOption=nt,t.DynamicFormRelationService=Et,t.DynamicFormService=dt,t.DynamicFormValidationService=z,t.DynamicFormValueControlModel=N,t.DynamicFormsCoreModule=Rt,t.DynamicInputControlModel=x,t.DynamicInputModel=V,t.DynamicListDirective=Ct,t.DynamicOptionControlModel=rt,t.DynamicRadioGroupModel=it,t.DynamicRatingModel=at,t.DynamicSelectModel=st,t.DynamicSliderModel=lt,t.DynamicSwitchModel=pt,t.DynamicTemplateDirective=G,t.DynamicTextAreaModel=ut,t.DynamicTimePickerModel=ct,t.HIDDEN_MATCHER=ft,t.HIDDEN_MATCHER_PROVIDER=vt,t.MATCH_DISABLED="DISABLED",t.MATCH_ENABLED="ENABLED",t.MATCH_HIDDEN="HIDDEN",t.MATCH_OPTIONAL="OPTIONAL",t.MATCH_REQUIRED="REQUIRED",t.MATCH_VISIBLE="VISIBLE",t.METADATA_KEY_SERIALIZABLE="SERIALIZABLE",t.OR_OPERATOR="OR",t.REQUIRED_MATCHER=mt,t.REQUIRED_MATCHER_PROVIDER=_t,t.getSerializables=F,t.isAddressToken=function(t){return Lt.indexOf(t)>-1},t.isBoolean=h,t.isContactField=function(t){return Ft.indexOf(t)>-1},t.isContactToken=function(t){return Tt.indexOf(t)>-1},t.isDynamicFormControlEvent=T,t.isField=function(t){return bt.indexOf(t)>-1},t.isFunction=f,t.isNumber=m,t.isObject=g,t.isSectionToken=function(t){return t.startsWith("section-")},t.isString=v,t.maskFromString=j,t.maskToString=Y,t.parseReviver=w,t.serializable=b,t.serialize=R,t.validate=function(t){var e=function(t,e){return t+"|"+e},o=Lt.reduce(e),n=Tt.reduce(e),r=bt.reduce(e),i=Ft.reduce(e);return new RegExp("^(section-\\w+\\s{1})?(("+o+"){1}\\s)?(("+r+"){1}|(("+n+"){1}\\s{1}("+i+")))$").test(t)},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=core.umd.min.js.map