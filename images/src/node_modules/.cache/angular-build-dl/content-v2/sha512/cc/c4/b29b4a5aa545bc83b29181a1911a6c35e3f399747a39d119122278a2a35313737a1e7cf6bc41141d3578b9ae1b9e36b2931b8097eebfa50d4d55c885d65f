(window.webpackJsonp=window.webpackJsonp||[]).push([[6,35],{A0IO:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("J3qs"),r=n("q5u1"),a=n("8Y7J"),s=n("tv3Y");let o=(()=>{class e{constructor(e){this.breadcrumbService=e}resolve(e,t){const n=e.data.breadcrumbKey;if(Object(i.a)(n))throw new Error('You provided an i18nBreadcrumbResolver for url "'+e.url+"\" but no breadcrumbKey in the route's data");const a=Object(r.b)(e);return{provider:this.breadcrumbService,key:n,url:a}}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](s.a))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},esCw:function(e,t,n){"use strict";n.r(t),n.d(t,"AccessControlModule",(function(){return pt}));var i=n("SVse"),r=n("iInd"),a=n("PCNd"),s=n("2Vo4"),o=n("itXk"),l=n("eIep"),c=n("lJxs"),p=n("IzEk"),u=n("f+Ev"),d=n("J3qs"),m=n("7DXY");class g{}var h=n("FU+A"),f=n("1QIV"),b=n("Q8wr"),x=n("oBfO"),S=n("8Y7J"),v=n("wLgS"),y=n("TSSN"),E=n("lI3o"),I=n("1mcE"),P=n("s7LF"),O=n("G0yt"),j=n("MFUF"),B=n("X/78"),w=n("QOHy"),C=n("LRne"),G=n("Anbb"),D=n("YIpg"),F=n("Q5/L"),k=n("Vurf"),$=n("hqmO"),A=n("Exvd");function L(e,t){1&e&&S["\u0275\u0275element"](0,"div")}function N(e,t){if(1&e&&(S["\u0275\u0275text"](0,"\n  "),S["\u0275\u0275elementStart"](1,"h4"),S["\u0275\u0275text"](2),S["\u0275\u0275pipe"](3,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](4,"\n")),2&e){const e=S["\u0275\u0275nextContext"]();S["\u0275\u0275advance"](2),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](3,1,e.messagePrefix+".create"))}}function q(e,t){if(1&e&&(S["\u0275\u0275text"](0,"\n  "),S["\u0275\u0275elementStart"](1,"h4"),S["\u0275\u0275text"](2),S["\u0275\u0275pipe"](3,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](4,"\n")),2&e){const e=S["\u0275\u0275nextContext"]();S["\u0275\u0275advance"](2),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](3,1,e.messagePrefix+".edit"))}}const R=function(e){return{"d-none":e}};function M(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"button",16),S["\u0275\u0275listener"]("click",(function(){return S["\u0275\u0275restoreView"](e),S["\u0275\u0275nextContext"]().impersonate()})),S["\u0275\u0275pipe"](1,"async"),S["\u0275\u0275text"](2,"\n      "),S["\u0275\u0275element"](3,"i",17),S["\u0275\u0275text"](4),S["\u0275\u0275pipe"](5,"translate"),S["\u0275\u0275elementEnd"]()}if(2&e){const e=S["\u0275\u0275nextContext"]();S["\u0275\u0275property"]("ngClass",S["\u0275\u0275pureFunction1"](6,R,!S["\u0275\u0275pipeBind1"](1,2,e.canImpersonate$))),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate1"](" ",S["\u0275\u0275pipeBind1"](5,4,"admin.access-control.epeople.actions.impersonate"),"\n    ")}}function V(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"button",18),S["\u0275\u0275listener"]("click",(function(){return S["\u0275\u0275restoreView"](e),S["\u0275\u0275nextContext"]().stopImpersonating()})),S["\u0275\u0275text"](1,"\n      "),S["\u0275\u0275element"](2,"i",17),S["\u0275\u0275text"](3),S["\u0275\u0275pipe"](4,"translate"),S["\u0275\u0275elementEnd"]()}2&e&&(S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate1"](" ",S["\u0275\u0275pipeBind1"](4,1,"admin.access-control.epeople.actions.stop-impersonating"),"\n    "))}const z=function(e){return[e]};function _(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"tr"),S["\u0275\u0275text"](1,"\n          "),S["\u0275\u0275elementStart"](2,"td"),S["\u0275\u0275text"](3),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](4,"\n          "),S["\u0275\u0275elementStart"](5,"td"),S["\u0275\u0275elementStart"](6,"a",26),S["\u0275\u0275listener"]("click",(function(){S["\u0275\u0275restoreView"](e);const n=t.$implicit;return S["\u0275\u0275nextContext"](3).groupsDataService.startEditingNewGroup(n)})),S["\u0275\u0275text"](7),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](8,"\n        "),S["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=S["\u0275\u0275nextContext"](3);S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"](e.id),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("routerLink",S["\u0275\u0275pureFunction1"](3,z,n.groupsDataService.getGroupEditPageRouterLink(e))),S["\u0275\u0275advance"](1),S["\u0275\u0275textInterpolate"](e.name)}}function T(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"ds-pagination",21),S["\u0275\u0275listener"]("pageChange",(function(t){return S["\u0275\u0275restoreView"](e),S["\u0275\u0275nextContext"](2).onPageChange(t)})),S["\u0275\u0275pipe"](1,"async"),S["\u0275\u0275pipe"](2,"async"),S["\u0275\u0275text"](3,"\n\n    "),S["\u0275\u0275elementStart"](4,"div",22),S["\u0275\u0275text"](5,"\n      "),S["\u0275\u0275elementStart"](6,"table",23),S["\u0275\u0275text"](7,"\n        "),S["\u0275\u0275elementStart"](8,"thead"),S["\u0275\u0275text"](9,"\n        "),S["\u0275\u0275elementStart"](10,"tr"),S["\u0275\u0275text"](11,"\n          "),S["\u0275\u0275elementStart"](12,"th",24),S["\u0275\u0275text"](13),S["\u0275\u0275pipe"](14,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](15,"\n          "),S["\u0275\u0275elementStart"](16,"th",24),S["\u0275\u0275text"](17),S["\u0275\u0275pipe"](18,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](19,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](20,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](21,"\n        "),S["\u0275\u0275elementStart"](22,"tbody"),S["\u0275\u0275text"](23,"\n        "),S["\u0275\u0275template"](24,_,9,5,"tr",25),S["\u0275\u0275pipe"](25,"async"),S["\u0275\u0275text"](26,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](27,"\n      "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](28,"\n    "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](29,"\n\n  "),S["\u0275\u0275elementEnd"]()}if(2&e){const e=S["\u0275\u0275nextContext"](2);var n,i,r;S["\u0275\u0275property"]("paginationOptions",e.config)("pageInfoState",null==(n=S["\u0275\u0275pipeBind1"](1,8,e.groups))?null:n.payload)("collectionSize",null==(i=S["\u0275\u0275pipeBind1"](2,10,e.groups))||null==i.payload?null:i.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),S["\u0275\u0275advance"](13),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](14,12,e.messagePrefix+".table.id")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](18,14,e.messagePrefix+".table.name")),S["\u0275\u0275advance"](7),S["\u0275\u0275property"]("ngForOf",null==(r=S["\u0275\u0275pipeBind1"](25,16,e.groups))||null==r.payload?null:r.payload.page)}}function H(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"div",27),S["\u0275\u0275text"](1,"\n    "),S["\u0275\u0275elementStart"](2,"div"),S["\u0275\u0275text"](3),S["\u0275\u0275pipe"](4,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](5,"\n    "),S["\u0275\u0275elementStart"](6,"div"),S["\u0275\u0275text"](7,"\n      "),S["\u0275\u0275elementStart"](8,"button",28),S["\u0275\u0275text"](9),S["\u0275\u0275pipe"](10,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](11,"\n    "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](12,"\n  "),S["\u0275\u0275elementEnd"]()),2&e){const e=S["\u0275\u0275nextContext"](2);S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](4,3,e.messagePrefix+".memberOfNoGroups")),S["\u0275\u0275advance"](5),S["\u0275\u0275property"]("routerLink",S["\u0275\u0275pureFunction1"](7,z,e.groupsDataService.getGroupRegistryRouterLink())),S["\u0275\u0275advance"](1),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](10,5,e.messagePrefix+".goToGroups"))}}function Q(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"div"),S["\u0275\u0275text"](1,"\n  "),S["\u0275\u0275elementStart"](2,"h5"),S["\u0275\u0275text"](3),S["\u0275\u0275pipe"](4,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](5,"\n\n  "),S["\u0275\u0275template"](6,T,30,18,"ds-pagination",19),S["\u0275\u0275pipe"](7,"async"),S["\u0275\u0275text"](8,"\n\n  "),S["\u0275\u0275template"](9,H,13,9,"div",20),S["\u0275\u0275pipe"](10,"async"),S["\u0275\u0275text"](11,"\n"),S["\u0275\u0275elementEnd"]()),2&e){const e=S["\u0275\u0275nextContext"]();var n,i;S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](4,3,e.messagePrefix+".groupsEPersonIsMemberOf")),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("ngIf",(null==(n=S["\u0275\u0275pipeBind1"](7,5,e.groups))||null==n.payload?null:n.payload.totalElements)>0),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("ngIf",0==(null==(i=S["\u0275\u0275pipeBind1"](10,7,e.groups))||null==i.payload?null:i.payload.totalElements))}}let W=(()=>{class e{constructor(e,t,n,i,r,a,s,o,l,c){this.epersonService=e,this.groupsDataService=t,this.formBuilderService=n,this.translateService=i,this.notificationsService=r,this.authService=a,this.authorizationService=s,this.modalService=o,this.paginationService=l,this.requestService=c,this.labelPrefix="admin.access-control.epeople.form.",this.formId="eperson-form",this.messagePrefix="admin.access-control.epeople.form",this.formLayout={firstName:{grid:{host:"row"}},lastName:{grid:{host:"row"}},email:{grid:{host:"row"}},canLogIn:{grid:{host:"col col-sm-6 d-inline-block"}},requireCertificate:{grid:{host:"col col-sm-6 d-inline-block"}}},this.submitForm=new S.EventEmitter,this.cancelForm=new S.EventEmitter,this.canReset$=Object(C.a)(!1),this.subs=[],this.config=Object.assign(new m.a,{id:"gem",pageSize:5,currentPage:1}),this.isImpersonated=!1,this.subs.push(this.epersonService.getActiveEPerson().subscribe(e=>{this.epersonInitial=e,Object(d.b)(e)&&(this.isImpersonated=this.authService.isImpersonatingUser(e.id))}))}ngOnInit(){this.initialisePage()}initialisePage(){Object(o.a)(this.translateService.get(`${this.messagePrefix}.firstName`),this.translateService.get(`${this.messagePrefix}.lastName`),this.translateService.get(`${this.messagePrefix}.email`),this.translateService.get(`${this.messagePrefix}.canLogIn`),this.translateService.get(`${this.messagePrefix}.requireCertificate`),this.translateService.get(`${this.messagePrefix}.emailHint`)).subscribe(([e,t,n,i,r,a])=>{this.firstName=new w.I({id:"firstName",label:e,name:"firstName",validators:{required:null},required:!0}),this.lastName=new w.I({id:"lastName",label:t,name:"lastName",validators:{required:null},required:!0}),this.email=new w.I({id:"email",label:n,name:"email",validators:{required:null,pattern:"^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"},required:!0,hint:a}),this.canLogIn=new w.q({id:"canLogIn",label:i,name:"canLogIn",value:null==this.epersonInitial||this.epersonInitial.canLogIn}),this.requireCertificate=new w.q({id:"requireCertificate",label:r,name:"requireCertificate",value:null!=this.epersonInitial&&this.epersonInitial.requireCertificate}),this.formModel=[this.firstName,this.lastName,this.email,this.canLogIn,this.requireCertificate],this.formGroup=this.formBuilderService.createFormGroup(this.formModel),this.subs.push(this.epersonService.getActiveEPerson().subscribe(e=>{null!=e&&(this.groups=this.groupsDataService.findAllByHref(e._links.groups.href,{currentPage:1,elementsPerPage:this.config.pageSize})),this.formGroup.patchValue({firstName:null!=e?e.firstMetadataValue("eperson.firstname"):"",lastName:null!=e?e.firstMetadataValue("eperson.lastname"):"",email:null!=e?e.email:"",canLogIn:null==e||e.canLogIn,requireCertificate:null!=e&&e.requireCertificate})}));const s=this.epersonService.getActiveEPerson();this.groups=s.pipe(Object(l.a)(e=>Object(o.a)([Object(C.a)(e),this.paginationService.getFindListOptions(this.config.id,{currentPage:1,elementsPerPage:this.config.pageSize})])),Object(l.a)(([e,t])=>null!=e?this.groupsDataService.findAllByHref(e._links.groups.href,t):Object(C.a)(void 0))),this.canImpersonate$=s.pipe(Object(l.a)(e=>this.authorizationService.isAuthorized(h.a.LoginOnBehalfOf,Object(d.b)(e)?e.self:void 0))),this.canDelete$=s.pipe(Object(l.a)(e=>this.authorizationService.isAuthorized(h.a.CanDelete,Object(d.b)(e)?e.self:void 0)))})}onCancel(){this.epersonService.cancelEditEPerson(),this.cancelForm.emit()}onSubmit(){this.epersonService.getActiveEPerson().pipe(Object(p.a)(1)).subscribe(e=>{const t={metadata:{"eperson.firstname":[{value:this.firstName.value}],"eperson.lastname":[{value:this.lastName.value}]},email:this.email.value,canLogIn:this.canLogIn.value,requireCertificate:this.requireCertificate.value};null==e?this.createNewEPerson(t):this.editEPerson(e,t)})}createNewEPerson(e){const t=Object.assign(new G.a,e);this.epersonService.create(t).pipe(Object(f.g)()).subscribe(e=>{e.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.labelPrefix+"notification.created.success",{name:t.name})),this.submitForm.emit(t)):(this.notificationsService.error(this.translateService.get(this.labelPrefix+"notification.created.failure",{name:t.name})),this.cancelForm.emit())}),this.showNotificationIfEmailInUse(t,"created")}editEPerson(e,t){const n=Object.assign(new G.a,{id:e.id,metadata:{"eperson.firstname":[{value:this.firstName.value?this.firstName.value:e.firstMetadataValue("eperson.firstname")}],"eperson.lastname":[{value:this.lastName.value?this.lastName.value:e.firstMetadataValue("eperson.lastname")}]},email:Object(d.b)(t.email)?t.email:e.email,canLogIn:Object(d.b)(t.canLogIn)?t.canLogIn:e.canLogIn,requireCertificate:Object(d.b)(t.requireCertificate)?t.requireCertificate:e.requireCertificate,_links:e._links});this.epersonService.updateEPerson(n).pipe(Object(f.g)()).subscribe(e=>{e.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.labelPrefix+"notification.edited.success",{name:n.name})),this.submitForm.emit(n)):(this.notificationsService.error(this.translateService.get(this.labelPrefix+"notification.edited.failure",{name:n.name})),this.cancelForm.emit())}),null!=t.email&&t.email!==e.email&&this.showNotificationIfEmailInUse(n,"edited")}showNotificationIfEmailInUse(e,t){this.subs.push(this.epersonService.searchByScope("email",e.email,{currentPage:1,elementsPerPage:0}).pipe(Object(f.i)(),Object(f.o)()).subscribe(n=>{n.totalElements>0&&this.notificationsService.error(this.translateService.get(this.labelPrefix+"notification."+t+".failure.emailInUse",{name:e.name,email:e.email}))}))}onPageChange(e){this.updateGroups({currentPage:e,elementsPerPage:this.config.pageSize})}updateGroups(e){this.subs.push(this.epersonService.getActiveEPerson().subscribe(t=>{this.groups=this.groupsDataService.findAllByHref(t._links.groups.href,e)}))}impersonate(){this.authService.impersonate(this.epersonInitial.id),this.isImpersonated=!0}delete(){this.epersonService.getActiveEPerson().pipe(Object(p.a)(1)).subscribe(e=>{const t=this.modalService.open(b.a);t.componentInstance.dso=e,t.componentInstance.headerLabel="confirmation-modal.delete-eperson.header",t.componentInstance.infoLabel="confirmation-modal.delete-eperson.info",t.componentInstance.cancelLabel="confirmation-modal.delete-eperson.cancel",t.componentInstance.confirmLabel="confirmation-modal.delete-eperson.confirm",t.componentInstance.brandColor="danger",t.componentInstance.confirmIcon="fas fa-trash",t.componentInstance.response.pipe(Object(p.a)(1)).subscribe(t=>{t&&Object(d.b)(e.id)&&this.epersonService.deleteEPerson(e).pipe(Object(f.g)()).subscribe(t=>{t.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.labelPrefix+"notification.deleted.success",{name:e.name})),this.submitForm.emit()):this.notificationsService.error("Error occured when trying to delete EPerson with id: "+e.id+" with code: "+t.statusCode+" and message: "+t.errorMessage),this.cancelForm.emit()})})})}stopImpersonating(){this.authService.stopImpersonatingAndRefresh(),this.isImpersonated=!1}ngOnDestroy(){this.onCancel(),this.subs.filter(e=>Object(d.b)(e)).forEach(e=>e.unsubscribe()),this.paginationService.clearPagination(this.config.id)}reset(){this.epersonService.getActiveEPerson().pipe(Object(p.a)(1)).subscribe(e=>{this.requestService.removeByHrefSubstring(e.self)}),this.initialisePage()}}return e.\u0275fac=function(t){return new(t||e)(S["\u0275\u0275directiveInject"](v.a),S["\u0275\u0275directiveInject"](D.a),S["\u0275\u0275directiveInject"](F.a),S["\u0275\u0275directiveInject"](y.f),S["\u0275\u0275directiveInject"](E.a),S["\u0275\u0275directiveInject"](k.a),S["\u0275\u0275directiveInject"](I.a),S["\u0275\u0275directiveInject"](O.u),S["\u0275\u0275directiveInject"](j.a),S["\u0275\u0275directiveInject"](B.a))},e.\u0275cmp=S["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-eperson-form"]],outputs:{submitForm:"submitForm",cancelForm:"cancelForm"},decls:47,vars:30,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["createHeader",""],["editheader",""],[3,"formId","formModel","formGroup","formLayout","displayCancel","submitForm"],["before","",1,"btn-group"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left"],["between","",1,"btn-group"],[1,"btn","btn-primary",3,"disabled"],[1,"fa","fa-key"],["between","",1,"btn-group","ml-1"],["class","btn btn-primary",3,"ngClass","click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],["after","",1,"btn","btn-danger","delete-button",3,"disabled","click"],[1,"fas","fa-trash"],[4,"ngIf"],[1,"btn","btn-primary",3,"ngClass","click"],[1,"fa","fa-user-secret"],[1,"btn","btn-primary",3,"click"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage","pageChange",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage","pageChange"],[1,"table-responsive"],["id","groups",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[3,"routerLink","click"],["role","alert",1,"alert","alert-info","w-100","mb-2"],[1,"btn","btn-primary",3,"routerLink"]],template:function(e,t){if(1&e&&(S["\u0275\u0275template"](0,L,1,0,"div",0),S["\u0275\u0275pipe"](1,"async"),S["\u0275\u0275text"](2,"\n\n"),S["\u0275\u0275template"](3,N,5,3,"ng-template",null,1,S["\u0275\u0275templateRefExtractor"]),S["\u0275\u0275text"](5,"\n\n"),S["\u0275\u0275template"](6,q,5,3,"ng-template",null,2,S["\u0275\u0275templateRefExtractor"]),S["\u0275\u0275text"](8,"\n\n"),S["\u0275\u0275elementStart"](9,"ds-form",3),S["\u0275\u0275listener"]("submitForm",(function(){return t.onSubmit()})),S["\u0275\u0275text"](10,"\n  "),S["\u0275\u0275elementStart"](11,"div",4),S["\u0275\u0275text"](12,"\n    "),S["\u0275\u0275elementStart"](13,"button",5),S["\u0275\u0275listener"]("click",(function(){return t.onCancel()})),S["\u0275\u0275element"](14,"i",6),S["\u0275\u0275text"](15),S["\u0275\u0275pipe"](16,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](17,"\n  "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](18,"\n  "),S["\u0275\u0275elementStart"](19,"div",7),S["\u0275\u0275text"](20,"\n    "),S["\u0275\u0275elementStart"](21,"button",8),S["\u0275\u0275pipe"](22,"async"),S["\u0275\u0275text"](23,"\n      "),S["\u0275\u0275element"](24,"i",9),S["\u0275\u0275text"](25),S["\u0275\u0275pipe"](26,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](27,"\n  "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](28,"\n  "),S["\u0275\u0275elementStart"](29,"div",10),S["\u0275\u0275text"](30,"\n    "),S["\u0275\u0275template"](31,M,6,8,"button",11),S["\u0275\u0275text"](32,"\n    "),S["\u0275\u0275template"](33,V,5,3,"button",12),S["\u0275\u0275text"](34,"\n  "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](35,"\n  "),S["\u0275\u0275elementStart"](36,"button",13),S["\u0275\u0275listener"]("click",(function(){return t.delete()})),S["\u0275\u0275pipe"](37,"async"),S["\u0275\u0275text"](38,"\n    "),S["\u0275\u0275element"](39,"i",14),S["\u0275\u0275text"](40),S["\u0275\u0275pipe"](41,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](42,"\n"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](43,"\n\n"),S["\u0275\u0275template"](44,Q,12,9,"div",15),S["\u0275\u0275pipe"](45,"async"),S["\u0275\u0275text"](46,"\n")),2&e){const e=S["\u0275\u0275reference"](4),n=S["\u0275\u0275reference"](7);S["\u0275\u0275property"]("ngIf",S["\u0275\u0275pipeBind1"](1,16,t.epersonService.getActiveEPerson()))("ngIfThen",n)("ngIfElse",e),S["\u0275\u0275advance"](9),S["\u0275\u0275property"]("formId",t.formId)("formModel",t.formModel)("formGroup",t.formGroup)("formLayout",t.formLayout)("displayCancel",!1),S["\u0275\u0275advance"](6),S["\u0275\u0275textInterpolate1"](" ",S["\u0275\u0275pipeBind1"](16,18,t.messagePrefix+".return"),""),S["\u0275\u0275advance"](6),S["\u0275\u0275property"]("disabled",!S["\u0275\u0275pipeBind1"](22,20,t.canReset$)),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate1"](" ",S["\u0275\u0275pipeBind1"](26,22,"admin.access-control.epeople.actions.reset"),"\n    "),S["\u0275\u0275advance"](6),S["\u0275\u0275property"]("ngIf",!t.isImpersonated),S["\u0275\u0275advance"](2),S["\u0275\u0275property"]("ngIf",t.isImpersonated),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("disabled",!S["\u0275\u0275pipeBind1"](37,24,t.canDelete$)),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate1"](" ",S["\u0275\u0275pipeBind1"](41,26,"admin.access-control.epeople.actions.delete"),"\n  "),S["\u0275\u0275advance"](4),S["\u0275\u0275property"]("ngIf",S["\u0275\u0275pipeBind1"](45,28,t.epersonService.getActiveEPerson()))}},directives:[i.u,$.a,P.NgControlStatusGroup,P.FormGroupDirective,i.r,A.a,i.t,r.j,r.h],pipes:[i.b,y.e],encapsulation:2}),e})();var U=n("Frqi");function Y(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"div"),S["\u0275\u0275text"](1,"\n          "),S["\u0275\u0275elementStart"](2,"button",7),S["\u0275\u0275listener"]("click",(function(){return S["\u0275\u0275restoreView"](e),S["\u0275\u0275nextContext"]().isEPersonFormShown=!0})),S["\u0275\u0275text"](3,"\n            "),S["\u0275\u0275element"](4,"i",8),S["\u0275\u0275text"](5,"\n            "),S["\u0275\u0275elementStart"](6,"span",9),S["\u0275\u0275text"](7),S["\u0275\u0275pipe"](8,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](9,"\n          "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](10,"\n        "),S["\u0275\u0275elementEnd"]()}if(2&e){const e=S["\u0275\u0275nextContext"]();S["\u0275\u0275advance"](7),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](8,1,e.labelPrefix+"button.add"))}}function J(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"ds-eperson-form",10),S["\u0275\u0275listener"]("submitForm",(function(){return S["\u0275\u0275restoreView"](e),S["\u0275\u0275nextContext"]().reset()}))("cancelForm",(function(){return S["\u0275\u0275restoreView"](e),S["\u0275\u0275nextContext"]().isEPersonFormShown=!1})),S["\u0275\u0275elementEnd"]()}}function K(e,t){1&e&&S["\u0275\u0275element"](0,"ds-loading")}const Z=function(e){return{"table-primary":e}},X=function(e){return{name:e}};function ee(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"tr",30),S["\u0275\u0275pipe"](1,"async"),S["\u0275\u0275text"](2,"\n                "),S["\u0275\u0275elementStart"](3,"td"),S["\u0275\u0275text"](4),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](5,"\n                "),S["\u0275\u0275elementStart"](6,"td"),S["\u0275\u0275text"](7),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](8,"\n                "),S["\u0275\u0275elementStart"](9,"td"),S["\u0275\u0275text"](10),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](11,"\n                "),S["\u0275\u0275elementStart"](12,"td"),S["\u0275\u0275text"](13,"\n                  "),S["\u0275\u0275elementStart"](14,"div",31),S["\u0275\u0275text"](15,"\n                    "),S["\u0275\u0275elementStart"](16,"button",32),S["\u0275\u0275listener"]("click",(function(){S["\u0275\u0275restoreView"](e);const n=t.$implicit;return S["\u0275\u0275nextContext"](3).toggleEditEPerson(n.eperson)})),S["\u0275\u0275pipe"](17,"translate"),S["\u0275\u0275text"](18,"\n                      "),S["\u0275\u0275element"](19,"i",33),S["\u0275\u0275text"](20,"\n                    "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](21,"\n                    "),S["\u0275\u0275elementStart"](22,"button",34),S["\u0275\u0275listener"]("click",(function(){S["\u0275\u0275restoreView"](e);const n=t.$implicit;return S["\u0275\u0275nextContext"](3).deleteEPerson(n.eperson)})),S["\u0275\u0275pipe"](23,"translate"),S["\u0275\u0275text"](24,"\n                      "),S["\u0275\u0275element"](25,"i",35),S["\u0275\u0275text"](26,"\n                    "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](27,"\n                  "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](28,"\n                "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](29,"\n              "),S["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=S["\u0275\u0275nextContext"](3);S["\u0275\u0275property"]("ngClass",S["\u0275\u0275pureFunction1"](15,Z,S["\u0275\u0275pipeBind1"](1,7,n.isActive(e.eperson)))),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](e.eperson.id),S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"](e.eperson.name),S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"](e.eperson.email),S["\u0275\u0275advance"](6),S["\u0275\u0275propertyInterpolate"]("title",S["\u0275\u0275pipeBind2"](17,9,n.labelPrefix+"table.edit.buttons.edit",S["\u0275\u0275pureFunction1"](17,X,e.eperson.name))),S["\u0275\u0275advance"](6),S["\u0275\u0275propertyInterpolate"]("title",S["\u0275\u0275pipeBind2"](23,12,n.labelPrefix+"table.edit.buttons.remove",S["\u0275\u0275pureFunction1"](19,X,e.eperson.name))),S["\u0275\u0275property"]("disabled",!e.ableToDelete)}}function te(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"ds-pagination",25),S["\u0275\u0275pipe"](1,"async"),S["\u0275\u0275text"](2,"\n\n          "),S["\u0275\u0275elementStart"](3,"div",26),S["\u0275\u0275text"](4,"\n            "),S["\u0275\u0275elementStart"](5,"table",27),S["\u0275\u0275text"](6,"\n              "),S["\u0275\u0275elementStart"](7,"thead"),S["\u0275\u0275text"](8,"\n              "),S["\u0275\u0275elementStart"](9,"tr"),S["\u0275\u0275text"](10,"\n                "),S["\u0275\u0275elementStart"](11,"th",28),S["\u0275\u0275text"](12),S["\u0275\u0275pipe"](13,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](14,"\n                "),S["\u0275\u0275elementStart"](15,"th",28),S["\u0275\u0275text"](16),S["\u0275\u0275pipe"](17,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](18,"\n                "),S["\u0275\u0275elementStart"](19,"th",28),S["\u0275\u0275text"](20),S["\u0275\u0275pipe"](21,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](22,"\n                "),S["\u0275\u0275elementStart"](23,"th"),S["\u0275\u0275text"](24),S["\u0275\u0275pipe"](25,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](26,"\n              "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](27,"\n              "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](28,"\n              "),S["\u0275\u0275elementStart"](29,"tbody"),S["\u0275\u0275text"](30,"\n              "),S["\u0275\u0275template"](31,ee,30,21,"tr",29),S["\u0275\u0275pipe"](32,"async"),S["\u0275\u0275text"](33,"\n              "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](34,"\n            "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](35,"\n          "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](36,"\n\n        "),S["\u0275\u0275elementEnd"]()),2&e){const e=S["\u0275\u0275nextContext"](2);var n,i;S["\u0275\u0275property"]("paginationOptions",e.config)("pageInfoState",e.pageInfoState$)("collectionSize",null==(n=S["\u0275\u0275pipeBind1"](1,10,e.pageInfoState$))?null:n.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),S["\u0275\u0275advance"](12),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](13,12,e.labelPrefix+"table.id")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](17,14,e.labelPrefix+"table.name")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](21,16,e.labelPrefix+"table.email")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](25,18,e.labelPrefix+"table.edit")),S["\u0275\u0275advance"](7),S["\u0275\u0275property"]("ngForOf",null==(i=S["\u0275\u0275pipeBind1"](32,20,e.ePeopleDto$))?null:i.page)}}function ne(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"div",36),S["\u0275\u0275text"](1),S["\u0275\u0275pipe"](2,"translate"),S["\u0275\u0275elementEnd"]()),2&e){const e=S["\u0275\u0275nextContext"](2);S["\u0275\u0275advance"](1),S["\u0275\u0275textInterpolate1"]("\n          ",S["\u0275\u0275pipeBind1"](2,1,e.labelPrefix+"no-items"),"\n        ")}}function ie(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"div"),S["\u0275\u0275text"](1,"\n        "),S["\u0275\u0275elementStart"](2,"h3",11),S["\u0275\u0275text"](3),S["\u0275\u0275pipe"](4,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](5,"\n        "),S["\u0275\u0275elementStart"](6,"form",12),S["\u0275\u0275listener"]("ngSubmit",(function(){S["\u0275\u0275restoreView"](e);const t=S["\u0275\u0275nextContext"]();return t.search(t.searchForm.value)})),S["\u0275\u0275text"](7,"\n          "),S["\u0275\u0275elementStart"](8,"div"),S["\u0275\u0275text"](9,"\n            "),S["\u0275\u0275elementStart"](10,"select",13),S["\u0275\u0275text"](11,"\n              "),S["\u0275\u0275elementStart"](12,"option",14),S["\u0275\u0275text"](13),S["\u0275\u0275pipe"](14,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](15,"\n              "),S["\u0275\u0275elementStart"](16,"option",15),S["\u0275\u0275text"](17),S["\u0275\u0275pipe"](18,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](19,"\n            "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](20,"\n          "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](21,"\n          "),S["\u0275\u0275elementStart"](22,"div",16),S["\u0275\u0275text"](23,"\n            "),S["\u0275\u0275elementStart"](24,"div",17),S["\u0275\u0275text"](25,"\n              "),S["\u0275\u0275element"](26,"input",18),S["\u0275\u0275pipe"](27,"translate"),S["\u0275\u0275pipe"](28,"translate"),S["\u0275\u0275text"](29,"\n              "),S["\u0275\u0275elementStart"](30,"span",19),S["\u0275\u0275text"](31,"\n                "),S["\u0275\u0275elementStart"](32,"button",20),S["\u0275\u0275text"](33,"\n                  "),S["\u0275\u0275element"](34,"i",21),S["\u0275\u0275text"](35),S["\u0275\u0275pipe"](36,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](37,"\n              "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](38,"\n            "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](39,"\n          "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](40,"\n          "),S["\u0275\u0275elementStart"](41,"div"),S["\u0275\u0275text"](42,"\n            "),S["\u0275\u0275elementStart"](43,"button",22),S["\u0275\u0275listener"]("click",(function(){return S["\u0275\u0275restoreView"](e),S["\u0275\u0275nextContext"]().clearFormAndResetResult()})),S["\u0275\u0275text"](44),S["\u0275\u0275pipe"](45,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](46,"\n          "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](47,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](48,"\n\n        "),S["\u0275\u0275template"](49,K,1,0,"ds-loading",5),S["\u0275\u0275pipe"](50,"async"),S["\u0275\u0275text"](51,"\n        "),S["\u0275\u0275template"](52,te,37,22,"ds-pagination",23),S["\u0275\u0275pipe"](53,"async"),S["\u0275\u0275pipe"](54,"async"),S["\u0275\u0275text"](55,"\n\n        "),S["\u0275\u0275template"](56,ne,3,3,"div",24),S["\u0275\u0275pipe"](57,"async"),S["\u0275\u0275text"](58,"\n      "),S["\u0275\u0275elementEnd"]()}if(2&e){const e=S["\u0275\u0275nextContext"]();var n,i;S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate1"]("",S["\u0275\u0275pipeBind1"](4,11,e.labelPrefix+"search.head"),"\n\n        "),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("formGroup",e.searchForm),S["\u0275\u0275advance"](7),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](14,13,e.labelPrefix+"search.scope.metadata")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](18,15,e.labelPrefix+"search.scope.email")),S["\u0275\u0275advance"](9),S["\u0275\u0275property"]("placeholder",S["\u0275\u0275pipeBind1"](28,19,e.labelPrefix+"search.placeholder")),S["\u0275\u0275attribute"]("aria-label",S["\u0275\u0275pipeBind1"](27,17,e.labelPrefix+"search.placeholder")),S["\u0275\u0275advance"](9),S["\u0275\u0275textInterpolate1"](" ",S["\u0275\u0275pipeBind1"](36,21,e.labelPrefix+"search.button"),"\n                "),S["\u0275\u0275advance"](9),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](45,23,e.labelPrefix+"button.see-all")),S["\u0275\u0275advance"](5),S["\u0275\u0275property"]("ngIf",S["\u0275\u0275pipeBind1"](50,25,e.searching$)),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("ngIf",(null==(n=S["\u0275\u0275pipeBind1"](53,27,e.pageInfoState$))?null:n.totalElements)>0&&!S["\u0275\u0275pipeBind1"](54,29,e.searching$)),S["\u0275\u0275advance"](4),S["\u0275\u0275property"]("ngIf",0==(null==(i=S["\u0275\u0275pipeBind1"](57,31,e.pageInfoState$))?null:i.totalElements))}}let re=(()=>{class e{constructor(e,t,n,i,r,a,o,l,c){this.epersonService=e,this.translateService=t,this.notificationsService=n,this.authorizationService=i,this.formBuilder=r,this.router=a,this.modalService=o,this.paginationService=l,this.requestService=c,this.labelPrefix="admin.access-control.epeople.",this.ePeople$=new s.a(Object(u.b)(new x.a,[])),this.ePeopleDto$=new s.a({}),this.pageInfoState$=new s.a(void 0),this.searching$=new s.a(!1),this.config=Object.assign(new m.a,{id:"elp",pageSize:5,currentPage:1}),this.subs=[],this.currentSearchQuery="",this.currentSearchScope="metadata",this.searchForm=this.formBuilder.group({scope:"metadata",query:""})}ngOnInit(){this.initialisePage()}initialisePage(){this.searching$.next(!0),this.isEPersonFormShown=!1,this.search({scope:this.currentSearchScope,query:this.currentSearchQuery}),this.subs.push(this.epersonService.getActiveEPerson().subscribe(e=>{null!=e&&e.id&&(this.isEPersonFormShown=!0)})),this.subs.push(this.ePeople$.pipe(Object(l.a)(e=>e.pageInfo.totalElements>0?Object(o.a)(...e.page.map(e=>this.authorizationService.isAuthorized(h.a.CanDelete,Object(d.b)(e)?e.self:void 0).pipe(Object(c.a)(t=>{const n=new g;return n.ableToDelete=t,n.eperson=e,n})))).pipe(Object(c.a)(t=>Object(u.b)(e.pageInfo,t))):[e])).subscribe(e=>{this.searching$.next(!1),this.ePeopleDto$.next(e),this.pageInfoState$.next(e.pageInfo)}))}search(e){this.searching$.next(!0),Object(d.b)(this.findListOptionsSub)&&this.findListOptionsSub.unsubscribe(),this.findListOptionsSub=this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(l.a)(t=>{const n=e.query,i=e.scope;return null!=n&&this.currentSearchQuery!==n&&(this.router.navigate([this.epersonService.getEPeoplePageRouterLink()],{queryParamsHandling:"merge"}),this.currentSearchQuery=n,this.paginationService.resetPage(this.config.id)),null!=i&&this.currentSearchScope!==i&&(this.router.navigate([this.epersonService.getEPeoplePageRouterLink()],{queryParamsHandling:"merge"}),this.currentSearchScope=i,this.paginationService.resetPage(this.config.id)),this.epersonService.searchByScope(this.currentSearchScope,this.currentSearchQuery,{currentPage:t.currentPage,elementsPerPage:t.pageSize})}),Object(f.c)()).subscribe(e=>{this.ePeople$.next(e.payload),this.pageInfoState$.next(e.payload.pageInfo)})}isActive(e){return this.getActiveEPerson().pipe(Object(c.a)(t=>e===t))}getActiveEPerson(){return this.epersonService.getActiveEPerson()}toggleEditEPerson(e){this.getActiveEPerson().pipe(Object(p.a)(1)).subscribe(t=>{e===t?(this.epersonService.cancelEditEPerson(),this.isEPersonFormShown=!1):(this.epersonService.editEPerson(e),this.isEPersonFormShown=!0)}),this.scrollToTop()}deleteEPerson(e){if(Object(d.b)(e.id)){const t=this.modalService.open(b.a);t.componentInstance.dso=e,t.componentInstance.headerLabel="confirmation-modal.delete-eperson.header",t.componentInstance.infoLabel="confirmation-modal.delete-eperson.info",t.componentInstance.cancelLabel="confirmation-modal.delete-eperson.cancel",t.componentInstance.confirmLabel="confirmation-modal.delete-eperson.confirm",t.componentInstance.brandColor="danger",t.componentInstance.confirmIcon="fas fa-trash",t.componentInstance.response.pipe(Object(p.a)(1)).subscribe(t=>{t&&Object(d.b)(e.id)&&this.epersonService.deleteEPerson(e).pipe(Object(f.g)()).subscribe(t=>{t.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.labelPrefix+"notification.deleted.success",{name:e.name})),this.reset()):this.notificationsService.error("Error occured when trying to delete EPerson with id: "+e.id+" with code: "+t.statusCode+" and message: "+t.errorMessage)})})}}ngOnDestroy(){this.cleanupSubscribes(),this.paginationService.clearPagination(this.config.id)}cleanupSubscribes(){this.subs.filter(e=>Object(d.b)(e)).forEach(e=>e.unsubscribe())}scrollToTop(){!function e(){const t=document.documentElement.scrollTop||document.body.scrollTop;t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/8))}()}clearFormAndResetResult(){this.searchForm.patchValue({query:""}),this.search({query:""})}reset(){this.epersonService.getBrowseEndpoint().pipe(Object(p.a)(1)).subscribe(e=>{this.requestService.setStaleByHrefSubstring(e).pipe(Object(p.a)(1)).subscribe(()=>{this.epersonService.cancelEditEPerson(),this.isEPersonFormShown=!1})})}}return e.\u0275fac=function(t){return new(t||e)(S["\u0275\u0275directiveInject"](v.a),S["\u0275\u0275directiveInject"](y.f),S["\u0275\u0275directiveInject"](E.a),S["\u0275\u0275directiveInject"](I.a),S["\u0275\u0275directiveInject"](P.FormBuilder),S["\u0275\u0275directiveInject"](r.g),S["\u0275\u0275directiveInject"](O.u),S["\u0275\u0275directiveInject"](j.a),S["\u0275\u0275directiveInject"](B.a))},e.\u0275cmp=S["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-epeople-registry"]],decls:22,vars:6,consts:[[1,"container"],[1,"epeople-registry","row"],[1,"col-12"],[1,"d-flex","justify-content-between","border-bottom","mb-3"],["id","header",1,"pb-2"],[4,"ngIf"],[3,"submitForm","cancelForm",4,"ngIf"],[1,"mr-auto","btn","btn-success","addEPerson-button",3,"click"],[1,"fas","fa-plus"],[1,"d-none","d-sm-inline"],[3,"submitForm","cancelForm"],["id","search",1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],["name","scope","id","scope","formControlName","scope","aria-label","Search scope",1,"form-control"],["value","metadata"],["value","email"],[1,"flex-grow-1","mr-3","ml-3"],[1,"form-group","input-group"],["type","text","name","query","id","query","formControlName","query",1,"form-control",3,"placeholder"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],[1,"search-button","btn","btn-secondary",3,"click"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","epeople",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm","access-control-editEPersonButton",3,"title","click"],[1,"fas","fa-edit","fa-fw"],[1,"btn","btn-outline-danger","btn-sm","access-control-deleteEPersonButton",3,"disabled","title","click"],[1,"fas","fa-trash-alt","fa-fw"],["role","alert",1,"alert","alert-info","w-100","mb-2"]],template:function(e,t){1&e&&(S["\u0275\u0275elementStart"](0,"div",0),S["\u0275\u0275text"](1,"\n  "),S["\u0275\u0275elementStart"](2,"div",1),S["\u0275\u0275text"](3,"\n    "),S["\u0275\u0275elementStart"](4,"div",2),S["\u0275\u0275text"](5,"\n      "),S["\u0275\u0275elementStart"](6,"div",3),S["\u0275\u0275text"](7,"\n        "),S["\u0275\u0275elementStart"](8,"h2",4),S["\u0275\u0275text"](9),S["\u0275\u0275pipe"](10,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](11,"\n\n        "),S["\u0275\u0275template"](12,Y,11,3,"div",5),S["\u0275\u0275text"](13,"\n      "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](14,"\n\n      "),S["\u0275\u0275template"](15,J,1,0,"ds-eperson-form",6),S["\u0275\u0275text"](16,"\n\n      "),S["\u0275\u0275template"](17,ie,59,33,"div",5),S["\u0275\u0275text"](18,"\n    "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](19,"\n  "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](20,"\n"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](21,"\n")),2&e&&(S["\u0275\u0275advance"](9),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](10,4,t.labelPrefix+"head")),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("ngIf",!t.isEPersonFormShown),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("ngIf",t.isEPersonFormShown),S["\u0275\u0275advance"](2),S["\u0275\u0275property"]("ngIf",!t.isEPersonFormShown))},directives:[i.u,W,P["\u0275angular_packages_forms_forms_y"],P.NgControlStatusGroup,P.FormGroupDirective,P.SelectControlValueAccessor,P.NgControlStatus,P.FormControlName,P.NgSelectOption,P["\u0275angular_packages_forms_forms_x"],P.DefaultValueAccessor,U.a,A.a,i.t,i.r],pipes:[y.e,i.b],encapsulation:2}),e})();var ae=n("JIr8"),se=n("HaPv"),oe=n("KIxa"),le=n("ArZ3"),ce=n("ye/0"),pe=n("YLTE"),ue=n("ac5F"),de=n("84Zn"),me=n("/O7Z"),ge=n("VYMa"),he=n("5+tZ");const fe=function(e){return{name:e}};function be(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"button",24),S["\u0275\u0275listener"]("click",(function(){S["\u0275\u0275restoreView"](e);const t=S["\u0275\u0275nextContext"]().$implicit;return S["\u0275\u0275nextContext"](2).deleteMemberFromGroup(t)})),S["\u0275\u0275pipe"](1,"translate"),S["\u0275\u0275text"](2,"\n                "),S["\u0275\u0275element"](3,"i",25),S["\u0275\u0275text"](4,"\n              "),S["\u0275\u0275elementEnd"]()}if(2&e){const e=S["\u0275\u0275nextContext"]().$implicit,t=S["\u0275\u0275nextContext"](2);S["\u0275\u0275propertyInterpolate"]("title",S["\u0275\u0275pipeBind2"](1,1,t.messagePrefix+".table.edit.buttons.remove",S["\u0275\u0275pureFunction1"](4,fe,e.eperson.name)))}}function xe(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"button",26),S["\u0275\u0275listener"]("click",(function(){S["\u0275\u0275restoreView"](e);const t=S["\u0275\u0275nextContext"]().$implicit;return S["\u0275\u0275nextContext"](2).addMemberToGroup(t)})),S["\u0275\u0275pipe"](1,"translate"),S["\u0275\u0275text"](2,"\n                "),S["\u0275\u0275element"](3,"i",27),S["\u0275\u0275text"](4,"\n              "),S["\u0275\u0275elementEnd"]()}if(2&e){const e=S["\u0275\u0275nextContext"]().$implicit,t=S["\u0275\u0275nextContext"](2);S["\u0275\u0275propertyInterpolate"]("title",S["\u0275\u0275pipeBind2"](1,1,t.messagePrefix+".table.edit.buttons.add",S["\u0275\u0275pureFunction1"](4,fe,e.eperson.name)))}}const Se=function(e){return[e]};function ve(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"tr"),S["\u0275\u0275text"](1,"\n          "),S["\u0275\u0275elementStart"](2,"td"),S["\u0275\u0275text"](3),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](4,"\n          "),S["\u0275\u0275elementStart"](5,"td"),S["\u0275\u0275elementStart"](6,"a",20),S["\u0275\u0275listener"]("click",(function(){S["\u0275\u0275restoreView"](e);const n=t.$implicit;return S["\u0275\u0275nextContext"](2).ePersonDataService.startEditingNewEPerson(n.eperson)})),S["\u0275\u0275text"](7),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](8,"\n          "),S["\u0275\u0275elementStart"](9,"td"),S["\u0275\u0275text"](10,"\n            "),S["\u0275\u0275elementStart"](11,"div",21),S["\u0275\u0275text"](12,"\n              "),S["\u0275\u0275template"](13,be,5,6,"button",22),S["\u0275\u0275text"](14,"\n\n              "),S["\u0275\u0275template"](15,xe,5,6,"button",23),S["\u0275\u0275text"](16,"\n            "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](17,"\n          "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](18,"\n        "),S["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=S["\u0275\u0275nextContext"](2);S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"](e.eperson.id),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("routerLink",S["\u0275\u0275pureFunction1"](5,Se,n.ePersonDataService.getEPeoplePageRouterLink())),S["\u0275\u0275advance"](1),S["\u0275\u0275textInterpolate"](e.eperson.name),S["\u0275\u0275advance"](6),S["\u0275\u0275property"]("ngIf",e.memberOfGroup),S["\u0275\u0275advance"](2),S["\u0275\u0275property"]("ngIf",!e.memberOfGroup)}}function ye(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"ds-pagination",15),S["\u0275\u0275pipe"](1,"async"),S["\u0275\u0275pipe"](2,"async"),S["\u0275\u0275text"](3,"\n\n    "),S["\u0275\u0275elementStart"](4,"div",16),S["\u0275\u0275text"](5,"\n      "),S["\u0275\u0275elementStart"](6,"table",17),S["\u0275\u0275text"](7,"\n        "),S["\u0275\u0275elementStart"](8,"thead"),S["\u0275\u0275text"](9,"\n        "),S["\u0275\u0275elementStart"](10,"tr"),S["\u0275\u0275text"](11,"\n          "),S["\u0275\u0275elementStart"](12,"th",18),S["\u0275\u0275text"](13),S["\u0275\u0275pipe"](14,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](15,"\n          "),S["\u0275\u0275elementStart"](16,"th",18),S["\u0275\u0275text"](17),S["\u0275\u0275pipe"](18,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](19,"\n          "),S["\u0275\u0275elementStart"](20,"th"),S["\u0275\u0275text"](21),S["\u0275\u0275pipe"](22,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](23,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](24,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](25,"\n        "),S["\u0275\u0275elementStart"](26,"tbody"),S["\u0275\u0275text"](27,"\n        "),S["\u0275\u0275template"](28,ve,19,7,"tr",19),S["\u0275\u0275pipe"](29,"async"),S["\u0275\u0275text"](30,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](31,"\n      "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](32,"\n    "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](33,"\n\n  "),S["\u0275\u0275elementEnd"]()),2&e){const e=S["\u0275\u0275nextContext"]();var n,i;S["\u0275\u0275property"]("paginationOptions",e.configSearch)("pageInfoState",S["\u0275\u0275pipeBind1"](1,9,e.ePeopleSearchDtos))("collectionSize",null==(n=S["\u0275\u0275pipeBind1"](2,11,e.ePeopleSearchDtos))?null:n.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),S["\u0275\u0275advance"](13),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](14,13,e.messagePrefix+".table.id")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](18,15,e.messagePrefix+".table.name")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](22,17,e.messagePrefix+".table.edit")),S["\u0275\u0275advance"](7),S["\u0275\u0275property"]("ngForOf",null==(i=S["\u0275\u0275pipeBind1"](29,19,e.ePeopleSearchDtos))?null:i.page)}}function Ee(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"div",28),S["\u0275\u0275text"](1),S["\u0275\u0275pipe"](2,"translate"),S["\u0275\u0275elementEnd"]()),2&e){const e=S["\u0275\u0275nextContext"]();S["\u0275\u0275advance"](1),S["\u0275\u0275textInterpolate1"]("\n    ",S["\u0275\u0275pipeBind1"](2,1,e.messagePrefix+".no-items"),"\n  ")}}function Ie(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"tr"),S["\u0275\u0275text"](1,"\n          "),S["\u0275\u0275elementStart"](2,"td"),S["\u0275\u0275text"](3),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](4,"\n          "),S["\u0275\u0275elementStart"](5,"td"),S["\u0275\u0275elementStart"](6,"a",20),S["\u0275\u0275listener"]("click",(function(){S["\u0275\u0275restoreView"](e);const n=t.$implicit;return S["\u0275\u0275nextContext"](2).ePersonDataService.startEditingNewEPerson(n.eperson)})),S["\u0275\u0275text"](7),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](8,"\n          "),S["\u0275\u0275elementStart"](9,"td"),S["\u0275\u0275text"](10,"\n            "),S["\u0275\u0275elementStart"](11,"div",21),S["\u0275\u0275text"](12,"\n              "),S["\u0275\u0275elementStart"](13,"button",24),S["\u0275\u0275listener"]("click",(function(){S["\u0275\u0275restoreView"](e);const n=t.$implicit;return S["\u0275\u0275nextContext"](2).deleteMemberFromGroup(n)})),S["\u0275\u0275pipe"](14,"translate"),S["\u0275\u0275text"](15,"\n                "),S["\u0275\u0275element"](16,"i",25),S["\u0275\u0275text"](17,"\n              "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](18,"\n            "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](19,"\n          "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](20,"\n        "),S["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=S["\u0275\u0275nextContext"](2);S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"](e.eperson.id),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("routerLink",S["\u0275\u0275pureFunction1"](7,Se,n.ePersonDataService.getEPeoplePageRouterLink())),S["\u0275\u0275advance"](1),S["\u0275\u0275textInterpolate"](e.eperson.name),S["\u0275\u0275advance"](6),S["\u0275\u0275propertyInterpolate"]("title",S["\u0275\u0275pipeBind2"](14,4,n.messagePrefix+".table.edit.buttons.remove",S["\u0275\u0275pureFunction1"](9,fe,e.eperson.name)))}}function Pe(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"ds-pagination",15),S["\u0275\u0275pipe"](1,"async"),S["\u0275\u0275pipe"](2,"async"),S["\u0275\u0275text"](3,"\n\n    "),S["\u0275\u0275elementStart"](4,"div",16),S["\u0275\u0275text"](5,"\n      "),S["\u0275\u0275elementStart"](6,"table",29),S["\u0275\u0275text"](7,"\n        "),S["\u0275\u0275elementStart"](8,"thead"),S["\u0275\u0275text"](9,"\n        "),S["\u0275\u0275elementStart"](10,"tr"),S["\u0275\u0275text"](11,"\n          "),S["\u0275\u0275elementStart"](12,"th",18),S["\u0275\u0275text"](13),S["\u0275\u0275pipe"](14,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](15,"\n          "),S["\u0275\u0275elementStart"](16,"th",18),S["\u0275\u0275text"](17),S["\u0275\u0275pipe"](18,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](19,"\n          "),S["\u0275\u0275elementStart"](20,"th"),S["\u0275\u0275text"](21),S["\u0275\u0275pipe"](22,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](23,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](24,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](25,"\n        "),S["\u0275\u0275elementStart"](26,"tbody"),S["\u0275\u0275text"](27,"\n        "),S["\u0275\u0275template"](28,Ie,21,11,"tr",19),S["\u0275\u0275pipe"](29,"async"),S["\u0275\u0275text"](30,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](31,"\n      "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](32,"\n    "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](33,"\n\n  "),S["\u0275\u0275elementEnd"]()),2&e){const e=S["\u0275\u0275nextContext"]();var n,i;S["\u0275\u0275property"]("paginationOptions",e.config)("pageInfoState",S["\u0275\u0275pipeBind1"](1,9,e.ePeopleMembersOfGroupDtos))("collectionSize",null==(n=S["\u0275\u0275pipeBind1"](2,11,e.ePeopleMembersOfGroupDtos))?null:n.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),S["\u0275\u0275advance"](13),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](14,13,e.messagePrefix+".table.id")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](18,15,e.messagePrefix+".table.name")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](22,17,e.messagePrefix+".table.edit")),S["\u0275\u0275advance"](7),S["\u0275\u0275property"]("ngForOf",null==(i=S["\u0275\u0275pipeBind1"](29,19,e.ePeopleMembersOfGroupDtos))?null:i.page)}}function Oe(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"div",28),S["\u0275\u0275text"](1),S["\u0275\u0275pipe"](2,"translate"),S["\u0275\u0275elementEnd"]()),2&e){const e=S["\u0275\u0275nextContext"]();S["\u0275\u0275advance"](1),S["\u0275\u0275textInterpolate1"]("\n    ",S["\u0275\u0275pipeBind1"](2,1,e.messagePrefix+".no-members-yet"),"\n  ")}}var je=function(e){return e[e.ActiveGroup=0]="ActiveGroup",e[e.MembersDTO=1]="MembersDTO",e[e.SearchResultsDTO=2]="SearchResultsDTO",e}({});let Be=(()=>{class e{constructor(e,t,n,i,r,a,o){this.groupDataService=e,this.ePersonDataService=t,this.translateService=n,this.notificationsService=i,this.formBuilder=r,this.paginationService=a,this.router=o,this.ePeopleSearchDtos=new s.a(void 0),this.ePeopleMembersOfGroupDtos=new s.a(void 0),this.configSearch=Object.assign(new m.a,{id:"sml",pageSize:5,currentPage:1}),this.config=Object.assign(new m.a,{id:"ml",pageSize:5,currentPage:1}),this.subs=new Map,this.currentSearchQuery="",this.currentSearchScope="metadata"}ngOnInit(){this.searchForm=this.formBuilder.group({scope:"metadata",query:""}),this.subs.set(je.ActiveGroup,this.groupDataService.getActiveGroup().subscribe(e=>{null!=e&&(this.groupBeingEdited=e,this.retrieveMembers(this.config.currentPage))}))}retrieveMembers(e){this.unsubFrom(je.MembersDTO),this.subs.set(je.MembersDTO,this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(l.a)(e=>this.ePersonDataService.findAllByHref(this.groupBeingEdited._links.epersons.href,{currentPage:e.currentPage,elementsPerPage:e.pageSize})),Object(f.b)(),Object(c.a)(e=>{if(!e.hasFailed)return e;this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure",{cause:e.errorMessage}))}),Object(l.a)(e=>Object(o.a)(...e.payload.page.map(e=>Object(o.a)(this.isMemberOfGroup(e),t=>{const n=new g;return n.eperson=e,n.memberOfGroup=t,n}))).pipe(Object(c.a)(t=>Object(u.b)(e.payload.pageInfo,t))))).subscribe(e=>{this.ePeopleMembersOfGroupDtos.next(e)}))}isMemberOfGroup(e){return this.groupDataService.getActiveGroup().pipe(Object(p.a)(1),Object(he.a)(t=>null!=t?this.ePersonDataService.findAllByHref(t._links.epersons.href,{currentPage:1,elementsPerPage:9999},!1).pipe(Object(f.i)(),Object(f.o)(),Object(c.a)(t=>t.page.filter(t=>t.id===e.id)),Object(c.a)(e=>e.length>0)):Object(C.a)(!1)))}unsubFrom(e){this.subs.has(e)&&(this.subs.get(e).unsubscribe(),this.subs.delete(e))}deleteMemberFromGroup(e){this.groupDataService.getActiveGroup().pipe(Object(p.a)(1)).subscribe(t=>{if(null!=t){const n=this.groupDataService.deleteMemberFromGroup(t,e.eperson);this.showNotifications("deleteMember",n,e.eperson.name,t),this.search({scope:this.currentSearchScope,query:this.currentSearchQuery})}else this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure.noActiveGroup"))})}addMemberToGroup(e){e.memberOfGroup=!0,this.groupDataService.getActiveGroup().pipe(Object(p.a)(1)).subscribe(t=>{if(null!=t){const n=this.groupDataService.addMemberToGroup(t,e.eperson);this.showNotifications("addMember",n,e.eperson.name,t)}else this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure.noActiveGroup"))})}search(e){this.unsubFrom(je.SearchResultsDTO),this.subs.set(je.SearchResultsDTO,this.paginationService.getCurrentPagination(this.configSearch.id,this.configSearch).pipe(Object(l.a)(t=>{const n=e.query,i=e.scope;return null!=n&&this.currentSearchQuery!==n&&this.groupBeingEdited&&(this.router.navigate([],{queryParamsHandling:"merge"}),this.currentSearchQuery=n,this.paginationService.resetPage(this.configSearch.id)),null!=i&&this.currentSearchScope!==i&&this.groupBeingEdited&&(this.router.navigate([],{queryParamsHandling:"merge"}),this.currentSearchScope=i,this.paginationService.resetPage(this.configSearch.id)),this.searchDone=!0,this.ePersonDataService.searchByScope(this.currentSearchScope,this.currentSearchQuery,{currentPage:t.currentPage,elementsPerPage:t.pageSize})}),Object(f.b)(),Object(c.a)(e=>{if(!e.hasFailed)return e;this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure",{cause:e.errorMessage}))}),Object(l.a)(e=>Object(o.a)(...e.payload.page.map(e=>Object(o.a)(this.isMemberOfGroup(e),t=>{const n=new g;return n.eperson=e,n.memberOfGroup=t,n}))).pipe(Object(c.a)(t=>Object(u.b)(e.payload.pageInfo,t))))).subscribe(e=>{this.ePeopleSearchDtos.next(e)}))}ngOnDestroy(){for(const e of this.subs.keys())this.unsubFrom(e);this.paginationService.clearPagination(this.config.id),this.paginationService.clearPagination(this.configSearch.id)}showNotifications(e,t,n,i){t.pipe(Object(f.g)()).subscribe(t=>{t.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.messagePrefix+".notification.success."+e,{name:n})),this.ePersonDataService.clearLinkRequests(i._links.epersons.href)):this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure."+e,{name:n}))})}clearFormAndResetResult(){this.searchForm.patchValue({query:""}),this.search({query:""})}}return e.\u0275fac=function(t){return new(t||e)(S["\u0275\u0275directiveInject"](D.a),S["\u0275\u0275directiveInject"](v.a),S["\u0275\u0275directiveInject"](y.f),S["\u0275\u0275directiveInject"](E.a),S["\u0275\u0275directiveInject"](P.FormBuilder),S["\u0275\u0275directiveInject"](j.a),S["\u0275\u0275directiveInject"](r.g))},e.\u0275cmp=S["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-members-list"]],inputs:{messagePrefix:"messagePrefix"},decls:69,vars:36,consts:[[1,"border-bottom","pb-2"],["id","search",1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],["name","scope","id","scope","formControlName","scope","aria-label","Search scope",1,"form-control"],["value","metadata"],["value","email"],[1,"flex-grow-1","mr-3","ml-3"],[1,"form-group","input-group"],["type","text","name","query","id","query","formControlName","query","aria-label","Search input",1,"form-control"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],[1,"btn","btn-secondary",3,"click"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","epersonsSearch",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[3,"routerLink","click"],[1,"btn-group","edit-field"],["class","btn btn-outline-danger btn-sm",3,"title","click",4,"ngIf"],["class","btn btn-outline-primary btn-sm",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm",3,"title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-primary","btn-sm",3,"title","click"],[1,"fas","fa-plus","fa-fw"],["role","alert",1,"alert","alert-info","w-100","mb-2"],["id","ePeopleMembersOfGroup",1,"table","table-striped","table-hover","table-bordered"]],template:function(e,t){if(1&e&&(S["\u0275\u0275elementContainerStart"](0),S["\u0275\u0275text"](1,"\n  "),S["\u0275\u0275elementStart"](2,"h3",0),S["\u0275\u0275text"](3),S["\u0275\u0275pipe"](4,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](5,"\n\n  "),S["\u0275\u0275elementStart"](6,"h4",1),S["\u0275\u0275text"](7),S["\u0275\u0275pipe"](8,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](9,"\n  "),S["\u0275\u0275elementStart"](10,"form",2),S["\u0275\u0275listener"]("ngSubmit",(function(){return t.search(t.searchForm.value)})),S["\u0275\u0275text"](11,"\n    "),S["\u0275\u0275elementStart"](12,"div"),S["\u0275\u0275text"](13,"\n      "),S["\u0275\u0275elementStart"](14,"select",3),S["\u0275\u0275text"](15,"\n        "),S["\u0275\u0275elementStart"](16,"option",4),S["\u0275\u0275text"](17),S["\u0275\u0275pipe"](18,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](19,"\n        "),S["\u0275\u0275elementStart"](20,"option",5),S["\u0275\u0275text"](21),S["\u0275\u0275pipe"](22,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](23,"\n      "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](24,"\n    "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](25,"\n    "),S["\u0275\u0275elementStart"](26,"div",6),S["\u0275\u0275text"](27,"\n      "),S["\u0275\u0275elementStart"](28,"div",7),S["\u0275\u0275text"](29,"\n        "),S["\u0275\u0275element"](30,"input",8),S["\u0275\u0275text"](31,"\n        "),S["\u0275\u0275elementStart"](32,"span",9),S["\u0275\u0275text"](33,"\n            "),S["\u0275\u0275elementStart"](34,"button",10),S["\u0275\u0275text"](35,"\n              "),S["\u0275\u0275element"](36,"i",11),S["\u0275\u0275text"](37),S["\u0275\u0275pipe"](38,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](39,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](40,"\n      "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](41,"\n    "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](42,"\n    "),S["\u0275\u0275elementStart"](43,"div"),S["\u0275\u0275text"](44,"\n      "),S["\u0275\u0275elementStart"](45,"button",12),S["\u0275\u0275listener"]("click",(function(){return t.clearFormAndResetResult()})),S["\u0275\u0275text"](46),S["\u0275\u0275pipe"](47,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](48,"\n    "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](49,"\n  "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](50,"\n\n  "),S["\u0275\u0275template"](51,ye,34,21,"ds-pagination",13),S["\u0275\u0275pipe"](52,"async"),S["\u0275\u0275text"](53,"\n\n  "),S["\u0275\u0275template"](54,Ee,3,3,"div",14),S["\u0275\u0275pipe"](55,"async"),S["\u0275\u0275text"](56,"\n\n  "),S["\u0275\u0275elementStart"](57,"h4"),S["\u0275\u0275text"](58),S["\u0275\u0275pipe"](59,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](60,"\n\n  "),S["\u0275\u0275template"](61,Pe,34,21,"ds-pagination",13),S["\u0275\u0275pipe"](62,"async"),S["\u0275\u0275text"](63,"\n\n  "),S["\u0275\u0275template"](64,Oe,3,3,"div",14),S["\u0275\u0275pipe"](65,"async"),S["\u0275\u0275pipe"](66,"async"),S["\u0275\u0275text"](67,"\n\n"),S["\u0275\u0275elementContainerEnd"](),S["\u0275\u0275text"](68,"\n")),2&e){var n,i,r,a=null;S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](4,12,t.messagePrefix+".head")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate1"]("",S["\u0275\u0275pipeBind1"](8,14,t.messagePrefix+".search.head"),"\n\n  "),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("formGroup",t.searchForm),S["\u0275\u0275advance"](7),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](18,16,t.messagePrefix+".search.scope.metadata")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](22,18,t.messagePrefix+".search.scope.email")),S["\u0275\u0275advance"](16),S["\u0275\u0275textInterpolate1"](" ",S["\u0275\u0275pipeBind1"](38,20,t.messagePrefix+".search.button"),""),S["\u0275\u0275advance"](9),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](47,22,t.messagePrefix+".button.see-all")),S["\u0275\u0275advance"](5),S["\u0275\u0275property"]("ngIf",(null==(n=S["\u0275\u0275pipeBind1"](52,24,t.ePeopleSearchDtos))?null:n.totalElements)>0),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("ngIf",0==(null==(i=S["\u0275\u0275pipeBind1"](55,26,t.ePeopleSearchDtos))?null:i.totalElements)&&t.searchDone),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](59,28,t.messagePrefix+".headMembers")),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("ngIf",(null==(r=S["\u0275\u0275pipeBind1"](62,30,t.ePeopleMembersOfGroupDtos))?null:r.totalElements)>0),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("ngIf",null==S["\u0275\u0275pipeBind1"](65,32,t.ePeopleMembersOfGroupDtos)||0==(null==(a=S["\u0275\u0275pipeBind1"](66,34,t.ePeopleMembersOfGroupDtos))?null:a.totalElements))}},directives:[P["\u0275angular_packages_forms_forms_y"],P.NgControlStatusGroup,P.FormGroupDirective,P.SelectControlValueAccessor,P.NgControlStatus,P.FormControlName,P.NgSelectOption,P["\u0275angular_packages_forms_forms_x"],P.DefaultValueAccessor,i.u,A.a,i.t,r.j],pipes:[y.e,i.b],encapsulation:2}),e})();const we=function(e){return{name:e}};function Ce(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"button",22),S["\u0275\u0275listener"]("click",(function(){S["\u0275\u0275restoreView"](e);const t=S["\u0275\u0275nextContext"]().$implicit;return S["\u0275\u0275nextContext"](2).deleteSubgroupFromGroup(t)})),S["\u0275\u0275pipe"](1,"translate"),S["\u0275\u0275text"](2,"\n                "),S["\u0275\u0275element"](3,"i",23),S["\u0275\u0275text"](4,"\n              "),S["\u0275\u0275elementEnd"]()}if(2&e){const e=S["\u0275\u0275nextContext"]().$implicit,t=S["\u0275\u0275nextContext"](2);S["\u0275\u0275propertyInterpolate"]("title",S["\u0275\u0275pipeBind2"](1,1,t.messagePrefix+".table.edit.buttons.remove",S["\u0275\u0275pureFunction1"](4,we,e.name)))}}function Ge(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"p"),S["\u0275\u0275text"](1),S["\u0275\u0275pipe"](2,"translate"),S["\u0275\u0275elementEnd"]()),2&e){const e=S["\u0275\u0275nextContext"](3);S["\u0275\u0275advance"](1),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](2,1,e.messagePrefix+".table.edit.currentGroup"))}}function De(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"button",24),S["\u0275\u0275listener"]("click",(function(){S["\u0275\u0275restoreView"](e);const t=S["\u0275\u0275nextContext"]().$implicit;return S["\u0275\u0275nextContext"](2).addSubgroupToGroup(t)})),S["\u0275\u0275pipe"](1,"translate"),S["\u0275\u0275text"](2,"\n                "),S["\u0275\u0275element"](3,"i",25),S["\u0275\u0275text"](4,"\n              "),S["\u0275\u0275elementEnd"]()}if(2&e){const e=S["\u0275\u0275nextContext"]().$implicit,t=S["\u0275\u0275nextContext"](2);S["\u0275\u0275propertyInterpolate"]("title",S["\u0275\u0275pipeBind2"](1,1,t.messagePrefix+".table.edit.buttons.add",S["\u0275\u0275pureFunction1"](4,we,e.name)))}}const Fe=function(e){return[e]};function ke(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"tr"),S["\u0275\u0275text"](1,"\n          "),S["\u0275\u0275elementStart"](2,"td"),S["\u0275\u0275text"](3),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](4,"\n          "),S["\u0275\u0275elementStart"](5,"td"),S["\u0275\u0275elementStart"](6,"a",17),S["\u0275\u0275listener"]("click",(function(){S["\u0275\u0275restoreView"](e);const n=t.$implicit;return S["\u0275\u0275nextContext"](2).groupDataService.startEditingNewGroup(n)})),S["\u0275\u0275text"](7),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](8,"\n          "),S["\u0275\u0275elementStart"](9,"td"),S["\u0275\u0275text"](10,"\n            "),S["\u0275\u0275elementStart"](11,"div",18),S["\u0275\u0275text"](12,"\n              "),S["\u0275\u0275template"](13,Ce,5,6,"button",19),S["\u0275\u0275pipe"](14,"async"),S["\u0275\u0275pipe"](15,"async"),S["\u0275\u0275text"](16,"\n\n              "),S["\u0275\u0275template"](17,Ge,3,3,"p",20),S["\u0275\u0275pipe"](18,"async"),S["\u0275\u0275text"](19,"\n\n              "),S["\u0275\u0275template"](20,De,5,6,"button",21),S["\u0275\u0275pipe"](21,"async"),S["\u0275\u0275pipe"](22,"async"),S["\u0275\u0275text"](23,"\n            "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](24,"\n          "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](25,"\n        "),S["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=S["\u0275\u0275nextContext"](2);S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"](e.id),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("routerLink",S["\u0275\u0275pureFunction1"](16,Fe,n.groupDataService.getGroupEditPageRouterLink(e))),S["\u0275\u0275advance"](1),S["\u0275\u0275textInterpolate"](e.name),S["\u0275\u0275advance"](6),S["\u0275\u0275property"]("ngIf",S["\u0275\u0275pipeBind1"](14,6,n.isSubgroupOfGroup(e))&&!S["\u0275\u0275pipeBind1"](15,8,n.isActiveGroup(e))),S["\u0275\u0275advance"](4),S["\u0275\u0275property"]("ngIf",S["\u0275\u0275pipeBind1"](18,10,n.isActiveGroup(e))),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("ngIf",!S["\u0275\u0275pipeBind1"](21,12,n.isSubgroupOfGroup(e))&&!S["\u0275\u0275pipeBind1"](22,14,n.isActiveGroup(e)))}}function $e(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"ds-pagination",12),S["\u0275\u0275pipe"](1,"async"),S["\u0275\u0275pipe"](2,"async"),S["\u0275\u0275text"](3,"\n\n    "),S["\u0275\u0275elementStart"](4,"div",13),S["\u0275\u0275text"](5,"\n      "),S["\u0275\u0275elementStart"](6,"table",14),S["\u0275\u0275text"](7,"\n        "),S["\u0275\u0275elementStart"](8,"thead"),S["\u0275\u0275text"](9,"\n        "),S["\u0275\u0275elementStart"](10,"tr"),S["\u0275\u0275text"](11,"\n          "),S["\u0275\u0275elementStart"](12,"th",15),S["\u0275\u0275text"](13),S["\u0275\u0275pipe"](14,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](15,"\n          "),S["\u0275\u0275elementStart"](16,"th",15),S["\u0275\u0275text"](17),S["\u0275\u0275pipe"](18,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](19,"\n          "),S["\u0275\u0275elementStart"](20,"th"),S["\u0275\u0275text"](21),S["\u0275\u0275pipe"](22,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](23,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](24,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](25,"\n        "),S["\u0275\u0275elementStart"](26,"tbody"),S["\u0275\u0275text"](27,"\n        "),S["\u0275\u0275template"](28,ke,26,18,"tr",16),S["\u0275\u0275pipe"](29,"async"),S["\u0275\u0275text"](30,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](31,"\n      "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](32,"\n    "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](33,"\n  "),S["\u0275\u0275elementEnd"]()),2&e){const e=S["\u0275\u0275nextContext"]();var n,i,r;S["\u0275\u0275property"]("paginationOptions",e.configSearch)("pageInfoState",null==(n=S["\u0275\u0275pipeBind1"](1,9,e.searchResults$))?null:n.payload)("collectionSize",null==(i=S["\u0275\u0275pipeBind1"](2,11,e.searchResults$))||null==i.payload?null:i.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),S["\u0275\u0275advance"](13),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](14,13,e.messagePrefix+".table.id")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](18,15,e.messagePrefix+".table.name")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](22,17,e.messagePrefix+".table.edit")),S["\u0275\u0275advance"](7),S["\u0275\u0275property"]("ngForOf",null==(r=S["\u0275\u0275pipeBind1"](29,19,e.searchResults$))||null==r.payload?null:r.payload.page)}}function Ae(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"div",26),S["\u0275\u0275text"](1),S["\u0275\u0275pipe"](2,"translate"),S["\u0275\u0275elementEnd"]()),2&e){const e=S["\u0275\u0275nextContext"]();S["\u0275\u0275advance"](1),S["\u0275\u0275textInterpolate1"]("\n    ",S["\u0275\u0275pipeBind1"](2,1,e.messagePrefix+".no-items"),"\n  ")}}function Le(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"tr"),S["\u0275\u0275text"](1,"\n          "),S["\u0275\u0275elementStart"](2,"td"),S["\u0275\u0275text"](3),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](4,"\n          "),S["\u0275\u0275elementStart"](5,"td"),S["\u0275\u0275elementStart"](6,"a",17),S["\u0275\u0275listener"]("click",(function(){S["\u0275\u0275restoreView"](e);const n=t.$implicit;return S["\u0275\u0275nextContext"](2).groupDataService.startEditingNewGroup(n)})),S["\u0275\u0275text"](7),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](8,"\n          "),S["\u0275\u0275elementStart"](9,"td"),S["\u0275\u0275text"](10,"\n            "),S["\u0275\u0275elementStart"](11,"div",18),S["\u0275\u0275text"](12,"\n              "),S["\u0275\u0275elementStart"](13,"button",22),S["\u0275\u0275listener"]("click",(function(){S["\u0275\u0275restoreView"](e);const n=t.$implicit;return S["\u0275\u0275nextContext"](2).deleteSubgroupFromGroup(n)})),S["\u0275\u0275pipe"](14,"translate"),S["\u0275\u0275text"](15,"\n                "),S["\u0275\u0275element"](16,"i",23),S["\u0275\u0275text"](17,"\n              "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](18,"\n            "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](19,"\n          "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](20,"\n        "),S["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=S["\u0275\u0275nextContext"](2);S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"](e.id),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("routerLink",S["\u0275\u0275pureFunction1"](7,Fe,n.groupDataService.getGroupEditPageRouterLink(e))),S["\u0275\u0275advance"](1),S["\u0275\u0275textInterpolate"](e.name),S["\u0275\u0275advance"](6),S["\u0275\u0275propertyInterpolate"]("title",S["\u0275\u0275pipeBind2"](14,4,n.messagePrefix+".table.edit.buttons.remove",S["\u0275\u0275pureFunction1"](9,we,e.name)))}}function Ne(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"ds-pagination",12),S["\u0275\u0275pipe"](1,"async"),S["\u0275\u0275pipe"](2,"async"),S["\u0275\u0275text"](3,"\n\n    "),S["\u0275\u0275elementStart"](4,"div",13),S["\u0275\u0275text"](5,"\n      "),S["\u0275\u0275elementStart"](6,"table",27),S["\u0275\u0275text"](7,"\n        "),S["\u0275\u0275elementStart"](8,"thead"),S["\u0275\u0275text"](9,"\n        "),S["\u0275\u0275elementStart"](10,"tr"),S["\u0275\u0275text"](11,"\n          "),S["\u0275\u0275elementStart"](12,"th",15),S["\u0275\u0275text"](13),S["\u0275\u0275pipe"](14,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](15,"\n          "),S["\u0275\u0275elementStart"](16,"th",15),S["\u0275\u0275text"](17),S["\u0275\u0275pipe"](18,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](19,"\n          "),S["\u0275\u0275elementStart"](20,"th"),S["\u0275\u0275text"](21),S["\u0275\u0275pipe"](22,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](23,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](24,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](25,"\n        "),S["\u0275\u0275elementStart"](26,"tbody"),S["\u0275\u0275text"](27,"\n        "),S["\u0275\u0275template"](28,Le,21,11,"tr",16),S["\u0275\u0275pipe"](29,"async"),S["\u0275\u0275text"](30,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](31,"\n      "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](32,"\n    "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](33,"\n  "),S["\u0275\u0275elementEnd"]()),2&e){const e=S["\u0275\u0275nextContext"]();var n,i,r;S["\u0275\u0275property"]("paginationOptions",e.config)("pageInfoState",null==(n=S["\u0275\u0275pipeBind1"](1,9,e.subGroups$))?null:n.payload)("collectionSize",null==(i=S["\u0275\u0275pipeBind1"](2,11,e.subGroups$))||null==i.payload?null:i.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),S["\u0275\u0275advance"](13),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](14,13,e.messagePrefix+".table.id")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](18,15,e.messagePrefix+".table.name")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](22,17,e.messagePrefix+".table.edit")),S["\u0275\u0275advance"](7),S["\u0275\u0275property"]("ngForOf",null==(r=S["\u0275\u0275pipeBind1"](29,19,e.subGroups$))||null==r.payload?null:r.payload.page)}}function qe(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"div",26),S["\u0275\u0275text"](1),S["\u0275\u0275pipe"](2,"translate"),S["\u0275\u0275elementEnd"]()),2&e){const e=S["\u0275\u0275nextContext"]();S["\u0275\u0275advance"](1),S["\u0275\u0275textInterpolate1"]("\n    ",S["\u0275\u0275pipeBind1"](2,1,e.messagePrefix+".no-subgroups-yet"),"\n  ")}}var Re=function(e){return e[e.Members=0]="Members",e[e.ActiveGroup=1]="ActiveGroup",e[e.SearchResults=2]="SearchResults",e}({});let Me=(()=>{class e{constructor(e,t,n,i,r,a){this.groupDataService=e,this.translateService=t,this.notificationsService=n,this.formBuilder=i,this.paginationService=r,this.router=a,this.searchResults$=new s.a(void 0),this.subGroups$=new s.a(void 0),this.subs=new Map,this.configSearch=Object.assign(new m.a,{id:"ssgl",pageSize:5,currentPage:1}),this.config=Object.assign(new m.a,{id:"sgl",pageSize:5,currentPage:1}),this.currentSearchQuery=""}ngOnInit(){this.searchForm=this.formBuilder.group({query:""}),this.subs.set(Re.ActiveGroup,this.groupDataService.getActiveGroup().subscribe(e=>{null!=e&&(this.groupBeingEdited=e,this.retrieveSubGroups())}))}retrieveSubGroups(){this.unsubFrom(Re.Members),this.subs.set(Re.Members,this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(l.a)(e=>this.groupDataService.findAllByHref(this.groupBeingEdited._links.subgroups.href,{currentPage:e.currentPage,elementsPerPage:e.pageSize}))).subscribe(e=>{this.subGroups$.next(e)}))}isSubgroupOfGroup(e){return this.groupDataService.getActiveGroup().pipe(Object(p.a)(1),Object(he.a)(t=>null!=t?t.uuid===e.uuid?Object(C.a)(!1):this.groupDataService.findAllByHref(t._links.subgroups.href,{currentPage:1,elementsPerPage:9999}).pipe(Object(f.i)(),Object(f.o)(),Object(c.a)(t=>t.page.filter(t=>t.id===e.id)),Object(c.a)(e=>e.length>0)):Object(C.a)(!1)))}isActiveGroup(e){return this.groupDataService.getActiveGroup().pipe(Object(p.a)(1),Object(he.a)(t=>null!=t&&t.uuid===e.uuid?Object(C.a)(!0):Object(C.a)(!1)))}deleteSubgroupFromGroup(e){this.groupDataService.getActiveGroup().pipe(Object(p.a)(1)).subscribe(t=>{if(null!=t){const n=this.groupDataService.deleteSubGroupFromGroup(t,e);this.showNotifications("deleteSubgroup",n,e.name,t)}else this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure.noActiveGroup"))})}addSubgroupToGroup(e){this.groupDataService.getActiveGroup().pipe(Object(p.a)(1)).subscribe(t=>{if(null!=t)if(t.uuid!==e.uuid){const n=this.groupDataService.addSubGroupToGroup(t,e);this.showNotifications("addSubgroup",n,e.name,t)}else this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure.subgroupToAddIsActiveGroup"));else this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure.noActiveGroup"))})}search(e){const t=e.query;null!=t&&this.currentSearchQuery!==t&&(this.router.navigateByUrl(this.groupDataService.getGroupEditPageRouterLink(this.groupBeingEdited)),this.currentSearchQuery=t,this.configSearch.currentPage=1),this.searchDone=!0,this.unsubFrom(Re.SearchResults),this.subs.set(Re.SearchResults,this.paginationService.getCurrentPagination(this.configSearch.id,this.configSearch).pipe(Object(l.a)(e=>this.groupDataService.searchGroups(this.currentSearchQuery,{currentPage:e.currentPage,elementsPerPage:e.pageSize}))).subscribe(e=>{this.searchResults$.next(e)}))}unsubFrom(e){this.subs.has(e)&&(this.subs.get(e).unsubscribe(),this.subs.delete(e))}ngOnDestroy(){for(const e of this.subs.keys())this.unsubFrom(e);this.paginationService.clearPagination(this.config.id),this.paginationService.clearPagination(this.configSearch.id)}showNotifications(e,t,n,i){t.pipe(Object(f.g)()).subscribe(t=>{t.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.messagePrefix+".notification.success."+e,{name:n})),this.groupDataService.clearGroupLinkRequests(i._links.subgroups.href)):this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure."+e,{name:n}))})}clearFormAndResetResult(){this.searchForm.patchValue({query:""}),this.search({query:""})}}return e.\u0275fac=function(t){return new(t||e)(S["\u0275\u0275directiveInject"](D.a),S["\u0275\u0275directiveInject"](y.f),S["\u0275\u0275directiveInject"](E.a),S["\u0275\u0275directiveInject"](P.FormBuilder),S["\u0275\u0275directiveInject"](j.a),S["\u0275\u0275directiveInject"](r.g))},e.\u0275cmp=S["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-subgroups-list"]],inputs:{messagePrefix:"messagePrefix"},decls:54,vars:28,consts:[[1,"border-bottom","pb-2"],["id","search",1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],[1,"flex-grow-1","mr-3"],[1,"form-group","input-group","mr-3"],["type","text","name","query","id","query","formControlName","query","aria-label","Search input",1,"form-control"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],[1,"btn","btn-secondary","float-right",3,"click"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","groupsSearch",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[3,"routerLink","click"],[1,"btn-group","edit-field"],["class","btn btn-outline-danger btn-sm deleteButton",3,"title","click",4,"ngIf"],[4,"ngIf"],["class","btn btn-outline-primary btn-sm addButton",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm","deleteButton",3,"title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-primary","btn-sm","addButton",3,"title","click"],[1,"fas","fa-plus","fa-fw"],["role","alert",1,"alert","alert-info","w-100","mb-2"],["id","subgroupsOfGroup",1,"table","table-striped","table-hover","table-bordered"]],template:function(e,t){var n,i,r,a;1&e&&(S["\u0275\u0275elementContainerStart"](0),S["\u0275\u0275text"](1,"\n  "),S["\u0275\u0275elementStart"](2,"h3",0),S["\u0275\u0275text"](3),S["\u0275\u0275pipe"](4,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](5,"\n\n  "),S["\u0275\u0275elementStart"](6,"h4",1),S["\u0275\u0275text"](7),S["\u0275\u0275pipe"](8,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](9,"\n  "),S["\u0275\u0275elementStart"](10,"form",2),S["\u0275\u0275listener"]("ngSubmit",(function(){return t.search(t.searchForm.value)})),S["\u0275\u0275text"](11,"\n    "),S["\u0275\u0275elementStart"](12,"div",3),S["\u0275\u0275text"](13,"\n      "),S["\u0275\u0275elementStart"](14,"div",4),S["\u0275\u0275text"](15,"\n        "),S["\u0275\u0275element"](16,"input",5),S["\u0275\u0275text"](17,"\n        "),S["\u0275\u0275elementStart"](18,"span",6),S["\u0275\u0275text"](19,"\n            "),S["\u0275\u0275elementStart"](20,"button",7),S["\u0275\u0275text"](21,"\n              "),S["\u0275\u0275element"](22,"i",8),S["\u0275\u0275text"](23),S["\u0275\u0275pipe"](24,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](25,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](26,"\n\n      "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](27,"\n    "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](28,"\n    "),S["\u0275\u0275elementStart"](29,"div"),S["\u0275\u0275text"](30,"\n      "),S["\u0275\u0275elementStart"](31,"button",9),S["\u0275\u0275listener"]("click",(function(){return t.clearFormAndResetResult()})),S["\u0275\u0275text"](32),S["\u0275\u0275pipe"](33,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](34,"\n    "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](35,"\n  "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](36,"\n\n  "),S["\u0275\u0275template"](37,$e,34,21,"ds-pagination",10),S["\u0275\u0275pipe"](38,"async"),S["\u0275\u0275text"](39,"\n\n  "),S["\u0275\u0275template"](40,Ae,3,3,"div",11),S["\u0275\u0275pipe"](41,"async"),S["\u0275\u0275text"](42,"\n\n  "),S["\u0275\u0275elementStart"](43,"h4"),S["\u0275\u0275text"](44),S["\u0275\u0275pipe"](45,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](46,"\n\n  "),S["\u0275\u0275template"](47,Ne,34,21,"ds-pagination",10),S["\u0275\u0275pipe"](48,"async"),S["\u0275\u0275text"](49,"\n\n  "),S["\u0275\u0275template"](50,qe,3,3,"div",11),S["\u0275\u0275pipe"](51,"async"),S["\u0275\u0275text"](52,"\n\n"),S["\u0275\u0275elementContainerEnd"](),S["\u0275\u0275text"](53,"\n")),2&e&&(S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](4,10,t.messagePrefix+".head")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate1"]("",S["\u0275\u0275pipeBind1"](8,12,t.messagePrefix+".search.head"),"\n\n  "),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("formGroup",t.searchForm),S["\u0275\u0275advance"](13),S["\u0275\u0275textInterpolate1"](" ",S["\u0275\u0275pipeBind1"](24,14,t.messagePrefix+".search.button"),"\n            "),S["\u0275\u0275advance"](9),S["\u0275\u0275textInterpolate1"]("\n        ",S["\u0275\u0275pipeBind1"](33,16,t.messagePrefix+".button.see-all"),"\n      "),S["\u0275\u0275advance"](5),S["\u0275\u0275property"]("ngIf",(null==(n=S["\u0275\u0275pipeBind1"](38,18,t.searchResults$))||null==n.payload?null:n.payload.totalElements)>0),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("ngIf",0==(null==(i=S["\u0275\u0275pipeBind1"](41,20,t.searchResults$))||null==i.payload?null:i.payload.totalElements)&&t.searchDone),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](45,22,t.messagePrefix+".headSubgroups")),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("ngIf",(null==(r=S["\u0275\u0275pipeBind1"](48,24,t.subGroups$))||null==r.payload?null:r.payload.totalElements)>0),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("ngIf",0==(null==(a=S["\u0275\u0275pipeBind1"](51,26,t.subGroups$))||null==a.payload?null:a.payload.totalElements)))},directives:[P["\u0275angular_packages_forms_forms_y"],P.NgControlStatusGroup,P.FormGroupDirective,P.DefaultValueAccessor,P.NgControlStatus,P.FormControlName,i.u,A.a,i.t,r.j],pipes:[y.e,i.b],encapsulation:2}),e})();function Ve(e,t){1&e&&S["\u0275\u0275element"](0,"div")}function ze(e,t){if(1&e&&(S["\u0275\u0275text"](0,"\n        "),S["\u0275\u0275elementStart"](1,"h2",14),S["\u0275\u0275text"](2),S["\u0275\u0275pipe"](3,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](4,"\n      ")),2&e){const e=S["\u0275\u0275nextContext"]();S["\u0275\u0275advance"](2),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](3,1,e.messagePrefix+".head.create"))}}function _e(e,t){if(1&e&&(S["\u0275\u0275text"](0,"\n        "),S["\u0275\u0275elementStart"](1,"h2",14),S["\u0275\u0275text"](2),S["\u0275\u0275pipe"](3,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](4,"\n      ")),2&e){const e=S["\u0275\u0275nextContext"]();S["\u0275\u0275advance"](2),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](3,1,e.messagePrefix+".head.edit"))}}function Te(e,t){if(1&e&&S["\u0275\u0275element"](0,"ds-alert",15),2&e){const e=S["\u0275\u0275nextContext"]();S["\u0275\u0275property"]("type",e.AlertTypeEnum.Warning)("content",e.messagePrefix+".alert.permanent")}}const He=function(e,t,n){return{name:e,comcol:t,comcolEditRolesRoute:n}};function Qe(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"ds-alert",15),S["\u0275\u0275pipe"](1,"translate"),S["\u0275\u0275pipe"](2,"async"),S["\u0275\u0275pipe"](3,"async"),S["\u0275\u0275pipe"](4,"async"),S["\u0275\u0275text"](5,"\n      "),S["\u0275\u0275elementEnd"]()),2&e){const e=S["\u0275\u0275nextContext"]();var n=null;S["\u0275\u0275property"]("type",e.AlertTypeEnum.Warning)("content",S["\u0275\u0275pipeBind2"](1,2,e.messagePrefix+".alert.workflowGroup",S["\u0275\u0275pureFunction3"](11,He,null==(n=S["\u0275\u0275pipeBind1"](2,5,e.getLinkedDSO(e.groupBeingEdited)))||null==n.payload?null:n.payload.name,null==(n=S["\u0275\u0275pipeBind1"](3,7,e.getLinkedDSO(e.groupBeingEdited)))||null==n.payload?null:n.payload.type,S["\u0275\u0275pipeBind1"](4,9,e.getLinkedEditRolesRoute(e.groupBeingEdited)))))}}function We(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"div",16),S["\u0275\u0275text"](1,"\n          "),S["\u0275\u0275elementStart"](2,"button",17),S["\u0275\u0275listener"]("click",(function(){return S["\u0275\u0275restoreView"](e),S["\u0275\u0275nextContext"]().delete()})),S["\u0275\u0275pipe"](3,"async"),S["\u0275\u0275text"](4,"\n            "),S["\u0275\u0275element"](5,"i",18),S["\u0275\u0275text"](6),S["\u0275\u0275pipe"](7,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](8,"\n        "),S["\u0275\u0275elementEnd"]()}if(2&e){const e=S["\u0275\u0275nextContext"]();S["\u0275\u0275advance"](2),S["\u0275\u0275property"]("disabled",!S["\u0275\u0275pipeBind1"](3,2,e.canEdit$)||e.groupBeingEdited.permanent),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate1"](" ",S["\u0275\u0275pipeBind1"](7,4,e.messagePrefix+".actions.delete"),"\n          ")}}function Ue(e,t){if(1&e&&S["\u0275\u0275element"](0,"ds-members-list",19),2&e){const e=S["\u0275\u0275nextContext"]();S["\u0275\u0275property"]("messagePrefix",e.messagePrefix+".members-list")}}function Ye(e,t){if(1&e&&S["\u0275\u0275element"](0,"ds-subgroups-list",19),2&e){const e=S["\u0275\u0275nextContext"]();S["\u0275\u0275property"]("messagePrefix",e.messagePrefix+".subgroups-list")}}let Je=(()=>{class e{constructor(e,t,n,i,r,a,s,o,l,c,p){this.groupDataService=e,this.ePersonDataService=t,this.dSpaceObjectDataService=n,this.formBuilderService=i,this.translateService=r,this.notificationsService=a,this.route=s,this.router=o,this.authorizationService=l,this.modalService=c,this.requestService=p,this.messagePrefix="admin.access-control.groups.form",this.formId="group-form",this.formLayout={groupName:{grid:{host:"row"}},groupDescription:{grid:{host:"row"}}},this.submitForm=new S.EventEmitter,this.cancelForm=new S.EventEmitter,this.subs=[],this.AlertTypeEnum=ue.a}ngOnInit(){this.initialisePage()}initialisePage(){this.subs.push(this.route.params.subscribe(e=>{"newGroup"!==e.groupId&&this.setActiveGroup(e.groupId)})),this.canEdit$=this.groupDataService.getActiveGroup().pipe(Object(d.c)(),Object(l.a)(e=>Object(o.a)(this.authorizationService.isAuthorized(h.a.CanDelete,Object(d.e)(e)?e.self:void 0),this.hasLinkedDSO(e),(e,t)=>e&&!t))),Object(o.a)(this.translateService.get(`${this.messagePrefix}.groupName`),this.translateService.get(`${this.messagePrefix}.groupDescription`)).subscribe(([e,t])=>{this.groupName=new w.I({id:"groupName",label:e,name:"groupName",validators:{required:null},required:!0}),this.groupDescription=new w.O({id:"groupDescription",label:t,name:"groupDescription",required:!1}),this.formModel=[this.groupName,this.groupDescription],this.formGroup=this.formBuilderService.createFormGroup(this.formModel),this.subs.push(Object(o.a)(this.groupDataService.getActiveGroup(),this.canEdit$).subscribe(([e,t])=>{null!=e&&(this.groupBeingEdited=e,this.formGroup.patchValue({groupName:null!=e?e.name:"",groupDescription:null!=e?e.firstMetadataValue("dc.description"):""}),t&&!e.permanent||this.formGroup.disable())}))})}onCancel(){this.groupDataService.cancelEditGroup(),this.cancelForm.emit(),this.router.navigate([this.groupDataService.getGroupRegistryRouterLink()])}onSubmit(){this.groupDataService.getActiveGroup().pipe(Object(p.a)(1)).subscribe(e=>{null===e?this.createNewGroup({name:this.groupName.value,metadata:{"dc.description":[{value:this.groupDescription.value}]}}):this.editGroup(e)})}createNewGroup(e){const t=Object.assign(new le.a,e);this.groupDataService.create(t).pipe(Object(f.g)()).subscribe(e=>{e.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.messagePrefix+".notification.created.success",{name:t.name})),this.submitForm.emit(t),Object(d.e)(e.payload)&&(this.setActiveGroupWithLink(e.payload._links.self.href),this.groupDataService.clearGroupsRequests(),this.router.navigateByUrl(this.groupDataService.getGroupEditPageRouterLinkWithID(e.payload.uuid)))):(this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.created.failure",{name:t.name})),this.showNotificationIfNameInUse(t,"created"),this.cancelForm.emit())})}showNotificationIfNameInUse(e,t){this.subs.push(this.groupDataService.searchGroups(e.name,{currentPage:1,elementsPerPage:0}).pipe(Object(f.i)(),Object(f.o)()).subscribe(n=>{n.totalElements>0&&this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification."+t+".failure.groupNameInUse",{name:e.name}))}))}editGroup(e){let t=[];Object(d.b)(this.groupDescription.value)&&(t=[...t,{op:"replace",path:"/metadata/dc.description/0/value",value:this.groupDescription.value}]),Object(d.b)(this.groupName.value)&&(t=[...t,{op:"replace",path:"/name",value:this.groupName.value}]),this.groupDataService.patch(e,t).pipe(Object(f.g)()).subscribe(t=>{t.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.messagePrefix+".notification.edited.success",{name:t.payload.name})),this.submitForm.emit(t.payload)):(this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.edited.failure",{name:e.name})),this.cancelForm.emit())})}setActiveGroup(e){this.groupDataService.cancelEditGroup(),this.groupDataService.findById(e).pipe(Object(f.i)(),Object(f.o)()).subscribe(e=>{this.groupDataService.editGroup(e)})}setActiveGroupWithLink(e){this.groupDataService.getActiveGroup().pipe(Object(p.a)(1)).subscribe(t=>{null===t&&(this.groupDataService.cancelEditGroup(),this.groupDataService.findByHref(e,!1,!1,Object(de.a)("subgroups"),Object(de.a)("epersons"),Object(de.a)("object")).pipe(Object(f.i)(),Object(f.o)()).subscribe(e=>{this.groupDataService.editGroup(e)}))})}delete(){this.groupDataService.getActiveGroup().pipe(Object(p.a)(1)).subscribe(e=>{const t=this.modalService.open(b.a);t.componentInstance.dso=e,t.componentInstance.headerLabel=this.messagePrefix+".delete-group.modal.header",t.componentInstance.infoLabel=this.messagePrefix+".delete-group.modal.info",t.componentInstance.cancelLabel=this.messagePrefix+".delete-group.modal.cancel",t.componentInstance.confirmLabel=this.messagePrefix+".delete-group.modal.confirm",t.componentInstance.brandColor="danger",t.componentInstance.confirmIcon="fas fa-trash",t.componentInstance.response.pipe(Object(p.a)(1)).subscribe(t=>{t&&Object(d.b)(e.id)&&this.groupDataService.delete(e.id).pipe(Object(f.g)()).subscribe(t=>{t.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.messagePrefix+".notification.deleted.success",{name:e.name})),this.reset()):this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.deleted.failure.title",{name:e.name}),this.translateService.get(this.messagePrefix+".notification.deleted.failure.content",{cause:t.errorMessage}))})})})}reset(){this.groupDataService.getBrowseEndpoint().pipe(Object(p.a)(1)).subscribe(e=>{this.requestService.removeByHrefSubstring(e)}),this.onCancel()}ngOnDestroy(){this.groupDataService.cancelEditGroup(),this.subs.filter(e=>Object(d.b)(e)).forEach(e=>e.unsubscribe())}hasLinkedDSO(e){if(Object(d.b)(e)&&Object(d.b)(e._links.object.href))return this.getLinkedDSO(e).pipe(Object(c.a)(e=>!(!Object(d.b)(e)||!Object(d.b)(e.payload))),Object(ae.a)(()=>Object(C.a)(!1)))}getLinkedDSO(e){if(Object(d.b)(e)&&Object(d.b)(e._links.object.href))return void 0===e.object?this.dSpaceObjectDataService.findByHref(e._links.object.href):e.object}getLinkedEditRolesRoute(e){if(Object(d.b)(e)&&Object(d.b)(e._links.object.href))return this.getLinkedDSO(e).pipe(Object(c.a)(e=>{if(Object(d.b)(e)&&Object(d.b)(e.payload))switch(e.payload.type){case pe.a.type.value:return Object(oe.f)(e.payload.id);case ce.a.type.value:return Object(se.g)(e.payload.id)}}))}}return e.\u0275fac=function(t){return new(t||e)(S["\u0275\u0275directiveInject"](D.a),S["\u0275\u0275directiveInject"](v.a),S["\u0275\u0275directiveInject"](me.a),S["\u0275\u0275directiveInject"](F.a),S["\u0275\u0275directiveInject"](y.f),S["\u0275\u0275directiveInject"](E.a),S["\u0275\u0275directiveInject"](r.a),S["\u0275\u0275directiveInject"](r.g),S["\u0275\u0275directiveInject"](I.a),S["\u0275\u0275directiveInject"](O.u),S["\u0275\u0275directiveInject"](B.a))},e.\u0275cmp=S["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-group-form"]],hostBindings:function(e,t){1&e&&S["\u0275\u0275listener"]("beforeunload",(function(){return t.ngOnDestroy()}),!1,S["\u0275\u0275resolveWindow"])},outputs:{submitForm:"submitForm",cancelForm:"cancelForm"},decls:44,vars:22,consts:[[1,"container"],[1,"group-form","row"],[1,"col-12"],[4,"ngIf","ngIfThen","ngIfElse"],["createHeader",""],["editheader",""],[3,"type","content",4,"ngIf"],[3,"formId","formModel","formGroup","formLayout","displayCancel","submitForm"],["before","",1,"btn-group"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left"],["after","","class","btn-group",4,"ngIf"],[1,"mb-5"],[3,"messagePrefix",4,"ngIf"],[1,"border-bottom","pb-2"],[3,"type","content"],["after","",1,"btn-group"],[1,"btn","btn-danger","delete-button",3,"disabled","click"],[1,"fa","fa-trash"],[3,"messagePrefix"]],template:function(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"div",0),S["\u0275\u0275text"](1,"\n  "),S["\u0275\u0275elementStart"](2,"div",1),S["\u0275\u0275text"](3,"\n    "),S["\u0275\u0275elementStart"](4,"div",2),S["\u0275\u0275text"](5,"\n\n      "),S["\u0275\u0275template"](6,Ve,1,0,"div",3),S["\u0275\u0275pipe"](7,"async"),S["\u0275\u0275text"](8,"\n\n      "),S["\u0275\u0275template"](9,ze,5,3,"ng-template",null,4,S["\u0275\u0275templateRefExtractor"]),S["\u0275\u0275text"](11,"\n\n      "),S["\u0275\u0275template"](12,_e,5,3,"ng-template",null,5,S["\u0275\u0275templateRefExtractor"]),S["\u0275\u0275text"](14,"\n\n      "),S["\u0275\u0275template"](15,Te,1,2,"ds-alert",6),S["\u0275\u0275text"](16,"\n      "),S["\u0275\u0275template"](17,Qe,6,15,"ds-alert",6),S["\u0275\u0275pipe"](18,"async"),S["\u0275\u0275pipe"](19,"async"),S["\u0275\u0275text"](20,"\n\n      "),S["\u0275\u0275elementStart"](21,"ds-form",7),S["\u0275\u0275listener"]("submitForm",(function(){return t.onSubmit()})),S["\u0275\u0275text"](22,"\n        "),S["\u0275\u0275elementStart"](23,"div",8),S["\u0275\u0275text"](24,"\n          "),S["\u0275\u0275elementStart"](25,"button",9),S["\u0275\u0275listener"]("click",(function(){return t.onCancel()})),S["\u0275\u0275element"](26,"i",10),S["\u0275\u0275text"](27),S["\u0275\u0275pipe"](28,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](29,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](30,"\n        "),S["\u0275\u0275template"](31,We,9,6,"div",11),S["\u0275\u0275text"](32,"\n      "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](33,"\n\n      "),S["\u0275\u0275elementStart"](34,"div",12),S["\u0275\u0275text"](35,"\n        "),S["\u0275\u0275template"](36,Ue,1,1,"ds-members-list",13),S["\u0275\u0275text"](37,"\n      "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](38,"\n      "),S["\u0275\u0275template"](39,Ye,1,1,"ds-subgroups-list",13),S["\u0275\u0275text"](40,"\n\n\n\n    "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](41,"\n  "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](42,"\n"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](43,"\n")),2&e){const e=S["\u0275\u0275reference"](10),n=S["\u0275\u0275reference"](13);S["\u0275\u0275advance"](6),S["\u0275\u0275property"]("ngIf",S["\u0275\u0275pipeBind1"](7,14,t.groupDataService.getActiveGroup()))("ngIfThen",n)("ngIfElse",e),S["\u0275\u0275advance"](9),S["\u0275\u0275property"]("ngIf",null==t.groupBeingEdited?null:t.groupBeingEdited.permanent),S["\u0275\u0275advance"](2),S["\u0275\u0275property"]("ngIf",!S["\u0275\u0275pipeBind1"](18,16,t.canEdit$)&&S["\u0275\u0275pipeBind1"](19,18,t.groupDataService.getActiveGroup())),S["\u0275\u0275advance"](4),S["\u0275\u0275property"]("formId",t.formId)("formModel",t.formModel)("formGroup",t.formGroup)("formLayout",t.formLayout)("displayCancel",!1),S["\u0275\u0275advance"](6),S["\u0275\u0275textInterpolate1"](" ",S["\u0275\u0275pipeBind1"](28,20,t.messagePrefix+".return"),""),S["\u0275\u0275advance"](4),S["\u0275\u0275property"]("ngIf",null!=t.groupBeingEdited),S["\u0275\u0275advance"](5),S["\u0275\u0275property"]("ngIf",null!=t.groupBeingEdited),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("ngIf",null!=t.groupBeingEdited)}},directives:[i.u,$.a,P.NgControlStatusGroup,P.FormGroupDirective,ge.a,Be,Me],pipes:[i.b,y.e],encapsulation:2}),e})();class Ke{}var Ze=n("ppE2");function Xe(e,t){1&e&&S["\u0275\u0275element"](0,"ds-loading")}const et=function(e){return{name:e}};function tt(e,t){if(1&e){const e=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"button",29),S["\u0275\u0275listener"]("click",(function(){S["\u0275\u0275restoreView"](e);const t=S["\u0275\u0275nextContext"]().$implicit;return S["\u0275\u0275nextContext"](2).deleteGroup(t)})),S["\u0275\u0275pipe"](1,"translate"),S["\u0275\u0275text"](2,"\n                    "),S["\u0275\u0275element"](3,"i",30),S["\u0275\u0275text"](4,"\n                  "),S["\u0275\u0275elementEnd"]()}if(2&e){const e=S["\u0275\u0275nextContext"]().$implicit,t=S["\u0275\u0275nextContext"](2);S["\u0275\u0275propertyInterpolate"]("title",S["\u0275\u0275pipeBind2"](1,1,t.messagePrefix+"table.edit.buttons.remove",S["\u0275\u0275pureFunction1"](4,et,e.group.name)))}}function nt(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"tr"),S["\u0275\u0275text"](1,"\n              "),S["\u0275\u0275elementStart"](2,"td"),S["\u0275\u0275text"](3),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](4,"\n              "),S["\u0275\u0275elementStart"](5,"td"),S["\u0275\u0275text"](6),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](7,"\n              "),S["\u0275\u0275elementStart"](8,"td"),S["\u0275\u0275text"](9),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](10,"\n              "),S["\u0275\u0275elementStart"](11,"td"),S["\u0275\u0275text"](12,"\n                "),S["\u0275\u0275elementStart"](13,"div",25),S["\u0275\u0275text"](14,"\n                  "),S["\u0275\u0275elementStart"](15,"button",26),S["\u0275\u0275pipe"](16,"translate"),S["\u0275\u0275text"](17,"\n                    "),S["\u0275\u0275element"](18,"i",27),S["\u0275\u0275text"](19,"\n                  "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](20,"\n                  "),S["\u0275\u0275template"](21,tt,5,6,"button",28),S["\u0275\u0275text"](22,"\n                "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](23,"\n              "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](24,"\n            "),S["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=S["\u0275\u0275nextContext"](2);S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"](e.group.id),S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"](e.group.name),S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"]((null==e.epersons?null:e.epersons.totalElements)+(null==e.subgroups?null:e.subgroups.totalElements)),S["\u0275\u0275advance"](6),S["\u0275\u0275propertyInterpolate"]("title",S["\u0275\u0275pipeBind2"](16,6,n.messagePrefix+"table.edit.buttons.edit",S["\u0275\u0275pureFunction1"](9,et,e.group.name))),S["\u0275\u0275property"]("routerLink",n.groupService.getGroupEditPageRouterLink(e.group)),S["\u0275\u0275advance"](6),S["\u0275\u0275property"]("ngIf",!(null!=e.group&&e.group.permanent)&&e.ableToDelete)}}function it(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"ds-pagination",20),S["\u0275\u0275pipe"](1,"async"),S["\u0275\u0275text"](2,"\n\n        "),S["\u0275\u0275elementStart"](3,"div",21),S["\u0275\u0275text"](4,"\n          "),S["\u0275\u0275elementStart"](5,"table",22),S["\u0275\u0275text"](6,"\n            "),S["\u0275\u0275elementStart"](7,"thead"),S["\u0275\u0275text"](8,"\n            "),S["\u0275\u0275elementStart"](9,"tr"),S["\u0275\u0275text"](10,"\n              "),S["\u0275\u0275elementStart"](11,"th",23),S["\u0275\u0275text"](12),S["\u0275\u0275pipe"](13,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](14,"\n              "),S["\u0275\u0275elementStart"](15,"th",23),S["\u0275\u0275text"](16),S["\u0275\u0275pipe"](17,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](18,"\n              "),S["\u0275\u0275elementStart"](19,"th",23),S["\u0275\u0275text"](20),S["\u0275\u0275pipe"](21,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](22,"\n              "),S["\u0275\u0275elementStart"](23,"th"),S["\u0275\u0275text"](24),S["\u0275\u0275pipe"](25,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](26,"\n            "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](27,"\n            "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](28,"\n            "),S["\u0275\u0275elementStart"](29,"tbody"),S["\u0275\u0275text"](30,"\n            "),S["\u0275\u0275template"](31,nt,25,11,"tr",24),S["\u0275\u0275pipe"](32,"async"),S["\u0275\u0275text"](33,"\n            "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](34,"\n          "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](35,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](36,"\n      "),S["\u0275\u0275elementEnd"]()),2&e){const e=S["\u0275\u0275nextContext"]();var n,i;S["\u0275\u0275property"]("paginationOptions",e.config)("pageInfoState",e.pageInfoState$)("collectionSize",null==(n=S["\u0275\u0275pipeBind1"](1,10,e.pageInfoState$))?null:n.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),S["\u0275\u0275advance"](12),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](13,12,e.messagePrefix+"table.id")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](17,14,e.messagePrefix+"table.name")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](21,16,e.messagePrefix+"table.members")),S["\u0275\u0275advance"](4),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](25,18,e.messagePrefix+"table.edit")),S["\u0275\u0275advance"](7),S["\u0275\u0275property"]("ngForOf",null==(i=S["\u0275\u0275pipeBind1"](32,20,e.groupsDto$))?null:i.page)}}function rt(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"div",31),S["\u0275\u0275text"](1),S["\u0275\u0275pipe"](2,"translate"),S["\u0275\u0275elementEnd"]()),2&e){const e=S["\u0275\u0275nextContext"]();S["\u0275\u0275advance"](1),S["\u0275\u0275textInterpolate1"]("\n        ",S["\u0275\u0275pipeBind1"](2,1,e.messagePrefix+"no-items"),"\n      ")}}const at=function(){return["newGroup"]};let st=(()=>{class e{constructor(e,t,n,i,r,a,o,l,c,p,u){this.groupService=e,this.ePersonDataService=t,this.dSpaceObjectDataService=n,this.translateService=i,this.notificationsService=r,this.formBuilder=a,this.routeService=o,this.router=l,this.authorizationService=c,this.paginationService=p,this.requestService=u,this.messagePrefix="admin.access-control.groups.",this.config=Object.assign(new m.a,{id:"gl",pageSize:5,currentPage:1}),this.groupsDto$=new s.a({}),this.deletedGroupsIds=[],this.pageInfoState$=new s.a(void 0),this.searching$=new s.a(!1),this.subs=[],this.currentSearchQuery="",this.searchForm=this.formBuilder.group({query:this.currentSearchQuery})}ngOnInit(){this.search({query:this.currentSearchQuery})}search(e){this.searching$.next(!0),Object(d.b)(this.searchSub)&&(this.searchSub.unsubscribe(),this.subs=this.subs.filter(e=>e!==this.searchSub)),this.searchSub=this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(l.a)(t=>{const n=e.query;return null!=n&&this.currentSearchQuery!==n&&(this.currentSearchQuery=n,this.paginationService.updateRouteWithUrl(this.config.id,[],{page:1})),this.groupService.searchGroups(this.currentSearchQuery.trim(),{currentPage:t.currentPage,elementsPerPage:t.pageSize})}),Object(f.c)(),Object(f.o)(),Object(l.a)(e=>0===e.page.length?Object(C.a)(Object(u.b)(e.pageInfo,[])):Object(o.a)(e.page.map(e=>{if(!this.deletedGroupsIds.includes(e.id))return Object(o.a)([this.authorizationService.isAuthorized(h.a.CanDelete,Object(d.b)(e)?e.self:void 0),this.hasLinkedDSO(e),this.getSubgroups(e),this.getMembers(e)]).pipe(Object(c.a)(([t,n,i,r])=>{const a=new Ke;return a.ableToDelete=t&&!n,a.group=e,a.subgroups=i.payload,a.epersons=r.payload,a}))})).pipe(Object(c.a)(t=>Object(u.b)(e.pageInfo,t))))).subscribe(e=>{this.groupsDto$.next(e),this.pageInfoState$.next(e.pageInfo),this.searching$.next(!1)}),this.subs.push(this.searchSub)}deleteGroup(e){Object(d.b)(e.group.id)&&this.groupService.delete(e.group.id).pipe(Object(f.g)()).subscribe(t=>{t.hasSucceeded?(this.deletedGroupsIds=[...this.deletedGroupsIds,e.group.id],this.notificationsService.success(this.translateService.get(this.messagePrefix+"notification.deleted.success",{name:e.group.name})),this.reset()):this.notificationsService.error(this.translateService.get(this.messagePrefix+"notification.deleted.failure.title",{name:e.group.name}),this.translateService.get(this.messagePrefix+"notification.deleted.failure.content",{cause:t.errorMessage}))})}reset(){this.groupService.getBrowseEndpoint().pipe(Object(p.a)(1)).subscribe(e=>{this.requestService.setStaleByHrefSubstring(e)})}getMembers(e){return this.ePersonDataService.findAllByHref(e._links.epersons.href).pipe(Object(f.i)())}getSubgroups(e){return this.groupService.findAllByHref(e._links.subgroups.href).pipe(Object(f.i)())}hasLinkedDSO(e){return this.dSpaceObjectDataService.findByHref(e._links.object.href).pipe(Object(f.i)(),Object(c.a)(e=>Object(d.b)(e)&&Object(d.b)(e.payload)),Object(ae.a)(()=>Object(C.a)(!1)))}clearFormAndResetResult(){this.searchForm.patchValue({query:""}),this.search({query:""})}ngOnDestroy(){this.cleanupSubscribes(),this.paginationService.clearPagination(this.config.id)}cleanupSubscribes(){Object(d.b)(this.paginationSub)&&this.paginationSub.unsubscribe(),this.subs.filter(e=>Object(d.b)(e)).forEach(e=>e.unsubscribe()),this.paginationService.clearPagination(this.config.id)}}return e.\u0275fac=function(t){return new(t||e)(S["\u0275\u0275directiveInject"](D.a),S["\u0275\u0275directiveInject"](v.a),S["\u0275\u0275directiveInject"](me.a),S["\u0275\u0275directiveInject"](y.f),S["\u0275\u0275directiveInject"](E.a),S["\u0275\u0275directiveInject"](P.FormBuilder),S["\u0275\u0275directiveInject"](Ze.a),S["\u0275\u0275directiveInject"](r.g),S["\u0275\u0275directiveInject"](I.a),S["\u0275\u0275directiveInject"](j.a),S["\u0275\u0275directiveInject"](B.a))},e.\u0275cmp=S["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-groups-registry"]],decls:71,vars:35,consts:[[1,"container"],[1,"groups-registry","row"],[1,"col-12"],[1,"d-flex","justify-content-between","border-bottom","mb-3"],["id","header",1,"pb-2"],[1,"mr-auto","btn","btn-success",3,"routerLink"],[1,"fas","fa-plus"],[1,"d-none","d-sm-inline"],["id","search",1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],[1,"flex-grow-1","mr-3"],[1,"form-group","input-group"],["type","text","name","query","id","query","formControlName","query",1,"form-control",3,"placeholder"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],[1,"btn","btn-secondary",3,"click"],[4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","groups",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink","title"],[1,"fas","fa-edit","fa-fw"],["class","btn btn-outline-danger btn-sm",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm",3,"title","click"],[1,"fas","fa-trash-alt","fa-fw"],["role","alert",1,"alert","alert-info","w-100","mb-2"]],template:function(e,t){var n,i;1&e&&(S["\u0275\u0275elementStart"](0,"div",0),S["\u0275\u0275text"](1,"\n  "),S["\u0275\u0275elementStart"](2,"div",1),S["\u0275\u0275text"](3,"\n    "),S["\u0275\u0275elementStart"](4,"div",2),S["\u0275\u0275text"](5,"\n      "),S["\u0275\u0275elementStart"](6,"div",3),S["\u0275\u0275text"](7,"\n        "),S["\u0275\u0275elementStart"](8,"h2",4),S["\u0275\u0275text"](9),S["\u0275\u0275pipe"](10,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](11,"\n        "),S["\u0275\u0275elementStart"](12,"div"),S["\u0275\u0275text"](13,"\n          "),S["\u0275\u0275elementStart"](14,"button",5),S["\u0275\u0275text"](15,"\n            "),S["\u0275\u0275element"](16,"i",6),S["\u0275\u0275text"](17,"\n            "),S["\u0275\u0275elementStart"](18,"span",7),S["\u0275\u0275text"](19),S["\u0275\u0275pipe"](20,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](21,"\n          "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](22,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](23,"\n      "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](24,"\n\n      "),S["\u0275\u0275elementStart"](25,"h3",8),S["\u0275\u0275text"](26),S["\u0275\u0275pipe"](27,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](28,"\n      "),S["\u0275\u0275elementStart"](29,"form",9),S["\u0275\u0275listener"]("ngSubmit",(function(){return t.search(t.searchForm.value)})),S["\u0275\u0275text"](30,"\n        "),S["\u0275\u0275elementStart"](31,"div",10),S["\u0275\u0275text"](32,"\n          "),S["\u0275\u0275elementStart"](33,"div",11),S["\u0275\u0275text"](34,"\n            "),S["\u0275\u0275element"](35,"input",12),S["\u0275\u0275pipe"](36,"translate"),S["\u0275\u0275pipe"](37,"translate"),S["\u0275\u0275text"](38,"\n            "),S["\u0275\u0275elementStart"](39,"span",13),S["\u0275\u0275text"](40,"\n              "),S["\u0275\u0275elementStart"](41,"button",14),S["\u0275\u0275text"](42,"\n                "),S["\u0275\u0275element"](43,"i",15),S["\u0275\u0275text"](44),S["\u0275\u0275pipe"](45,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](46,"\n            "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](47,"\n          "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](48,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](49,"\n        "),S["\u0275\u0275elementStart"](50,"div"),S["\u0275\u0275text"](51,"\n          "),S["\u0275\u0275elementStart"](52,"button",16),S["\u0275\u0275listener"]("click",(function(){return t.clearFormAndResetResult()})),S["\u0275\u0275text"](53),S["\u0275\u0275pipe"](54,"translate"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](55,"\n        "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](56,"\n      "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](57,"\n\n      "),S["\u0275\u0275template"](58,Xe,1,0,"ds-loading",17),S["\u0275\u0275pipe"](59,"async"),S["\u0275\u0275text"](60,"\n      "),S["\u0275\u0275template"](61,it,37,22,"ds-pagination",18),S["\u0275\u0275pipe"](62,"async"),S["\u0275\u0275pipe"](63,"async"),S["\u0275\u0275text"](64,"\n\n      "),S["\u0275\u0275template"](65,rt,3,3,"div",19),S["\u0275\u0275pipe"](66,"async"),S["\u0275\u0275text"](67,"\n\n    "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](68,"\n  "),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](69,"\n"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275text"](70,"\n")),2&e&&(S["\u0275\u0275advance"](9),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](10,12,t.messagePrefix+"head")),S["\u0275\u0275advance"](5),S["\u0275\u0275property"]("routerLink",S["\u0275\u0275pureFunction0"](34,at)),S["\u0275\u0275advance"](5),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](20,14,t.messagePrefix+"button.add")),S["\u0275\u0275advance"](7),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](27,16,t.messagePrefix+"search.head")),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("formGroup",t.searchForm),S["\u0275\u0275advance"](6),S["\u0275\u0275property"]("placeholder",S["\u0275\u0275pipeBind1"](37,20,t.messagePrefix+"search.placeholder")),S["\u0275\u0275attribute"]("aria-label",S["\u0275\u0275pipeBind1"](36,18,t.messagePrefix+"search.placeholder")),S["\u0275\u0275advance"](9),S["\u0275\u0275textInterpolate1"](" ",S["\u0275\u0275pipeBind1"](45,22,t.messagePrefix+"search.button"),"\n              "),S["\u0275\u0275advance"](9),S["\u0275\u0275textInterpolate1"]("\n            ",S["\u0275\u0275pipeBind1"](54,24,t.messagePrefix+"button.see-all"),"\n          "),S["\u0275\u0275advance"](5),S["\u0275\u0275property"]("ngIf",S["\u0275\u0275pipeBind1"](59,26,t.searching$)),S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("ngIf",(null==(n=S["\u0275\u0275pipeBind1"](62,28,t.pageInfoState$))?null:n.totalElements)>0&&!S["\u0275\u0275pipeBind1"](63,30,t.searching$)),S["\u0275\u0275advance"](4),S["\u0275\u0275property"]("ngIf",0==(null==(i=S["\u0275\u0275pipeBind1"](66,32,t.pageInfoState$))?null:i.totalElements)))},directives:[r.h,P["\u0275angular_packages_forms_forms_y"],P.NgControlStatusGroup,P.FormGroupDirective,P.DefaultValueAccessor,P.NgControlStatus,P.FormControlName,i.u,U.a,A.a,i.t],pipes:[y.e,i.b],encapsulation:2}),e})();var ot=n("mOAm"),lt=n("A0IO");let ct=(()=>{class e{}return e.\u0275mod=S["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=S["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.k.forChild([{path:"epeople",component:re,resolve:{breadcrumb:lt.a},data:{title:"admin.access-control.epeople.title",breadcrumbKey:"admin.access-control.epeople"}},{path:ot.a,component:st,resolve:{breadcrumb:lt.a},data:{title:"admin.access-control.groups.title",breadcrumbKey:"admin.access-control.groups"}},{path:`${ot.a}/newGroup`,component:Je,resolve:{breadcrumb:lt.a},data:{title:"admin.access-control.groups.title.addGroup",breadcrumbKey:"admin.access-control.groups.addGroup"}},{path:`${ot.a}/:groupId`,component:Je,resolve:{breadcrumb:lt.a},data:{title:"admin.access-control.groups.title.singleGroup",breadcrumbKey:"admin.access-control.groups.singleGroup"}}])]]}),e})(),pt=(()=>{class e{}return e.\u0275mod=S["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=S["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,a.a,r.k,ct]]}),e})()},tv3Y:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zr/d"),r=n("LRne"),a=n("8Y7J");let s=(()=>{class e{getBreadcrumbs(e,t){return Object(r.a)([new i.a(e+".breadcrumbs",t)])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"zr/d":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e,t){this.text=e,this.url=t}}}}]);
//# sourceMappingURL=6-es2015.a7a5a60215b7dadbbb00.js.map