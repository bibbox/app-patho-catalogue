(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{C63K:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var i=n("zZO8"),a=n("tmoE");const r="bitstream-formats";function s(){return new i.a(Object(a.b)(),r).toString()}},PT0L:function(e,t,n){"use strict";n.r(t),n.d(t,"BitstreamFormatsModule",(function(){return G}));var i=n("SVse"),a=n("iInd"),r=n("PCNd"),s=n("1QIV"),o=n("8Y7J"),l=n("B7d6");let c=(()=>{class e{constructor(e){this.bitstreamFormatDataService=e}resolve(e,t){return this.bitstreamFormatDataService.findById(e.params.id).pipe(Object(s.g)())}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](l.a))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var d=n("lJxs"),m=n("C63K"),p=n("lI3o"),u=n("TSSN"),f=n("6dfX"),h=n("87+M"),g=n("QOHy"),b=n("J3qs"),v=n("hqmO");function x(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"ds-form",1),o["\u0275\u0275listener"]("submitForm",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().onSubmit()}))("cancel",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().onCancel()})),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("formId","comcol-form-id")("formModel",e.formModel)}}let S=(()=>{class e{constructor(e,t,n){this.dynamicFormService=e,this.translateService=t,this.router=n,this.bitstreamFormat=new f.a,this.updatedFormat=new o.EventEmitter,this.supportLevelOptions=[{label:h.a.Known,value:h.a.Known},{label:h.a.Unknown,value:h.a.Unknown},{label:h.a.Supported,value:h.a.Supported}],this.arrayElementLayout={grid:{group:"form-row"}},this.arrayInputElementLayout={grid:{host:"col"}},this.formModel=[new g.I({id:"shortDescription",name:"shortDescription",label:"admin.registries.bitstream-formats.edit.shortDescription.label",hint:"admin.registries.bitstream-formats.edit.shortDescription.hint",required:!0,validators:{required:null},errorMessages:{required:"Please enter a name for this bitstream format"}}),new g.I({id:"mimetype",name:"mimetype",label:"admin.registries.bitstream-formats.edit.mimetype.label",hint:"admin.registries.bitstream-formats.edit.mimetype.hint"}),new g.O({id:"description",name:"description",label:"admin.registries.bitstream-formats.edit.description.label",hint:"admin.registries.bitstream-formats.edit.description.hint"}),new g.M({id:"supportLevel",name:"supportLevel",options:this.supportLevelOptions,label:"admin.registries.bitstream-formats.edit.supportLevel.label",hint:"admin.registries.bitstream-formats.edit.supportLevel.hint",value:this.supportLevelOptions[0].value}),new g.q({id:"internal",name:"internal",label:"Internal",hint:"admin.registries.bitstream-formats.edit.internal.hint"}),new g.v({id:"extensions",name:"extensions",label:"admin.registries.bitstream-formats.edit.extensions.label",groupFactory:()=>[new g.I({id:"extension",placeholder:"admin.registries.bitstream-formats.edit.extensions.placeholder"},this.arrayInputElementLayout)]},this.arrayElementLayout)]}ngOnInit(){this.initValues()}initValues(){this.formModel.forEach(e=>{if("extensions"===e.name){if(Object(b.b)(this.bitstreamFormat.extensions)){const t=this.bitstreamFormat.extensions,n=e;for(let e=0;e<t.length;e++)n.insertGroup(e).group[0]=new g.I({id:`extension-${e}`,value:t[e]},this.arrayInputElementLayout)}}else Object(b.b)(this.bitstreamFormat[e.name])&&(e.value=this.bitstreamFormat[e.name])})}onSubmit(){const e=Object.assign(new f.a,{id:this.bitstreamFormat.id});this.formModel.forEach(t=>{if("extensions"===t.name){const n=t,i=[];for(let e=0;e<n.groups.length;e++){const t=n.get(e).get(0).value;Object(b.d)(t)||i.push(n.get(e).get(0).value)}e.extensions=i}else e[t.name]=t.value}),this.updatedFormat.emit(e)}onCancel(){this.router.navigate([Object(m.b)()])}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](g.F),o["\u0275\u0275directiveInject"](u.f),o["\u0275\u0275directiveInject"](a.g))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-bitstream-format-form"]],inputs:{bitstreamFormat:"bitstreamFormat"},outputs:{updatedFormat:"updatedFormat"},decls:1,vars:1,consts:[[3,"formId","formModel","submitForm","cancel",4,"ngIf"],[3,"formId","formModel","submitForm","cancel"]],template:function(e,t){1&e&&o["\u0275\u0275template"](0,x,1,2,"ds-form",0),2&e&&o["\u0275\u0275property"]("ngIf",t.formModel)},directives:[i.u,v.a],encapsulation:2}),e})();const y=function(e){return{format:e}};let I=(()=>{class e{constructor(e,t,n,i,a){this.route=e,this.router=t,this.notificationService=n,this.translateService=i,this.bitstreamFormatDataService=a}ngOnInit(){this.bitstreamFormatRD$=this.route.data.pipe(Object(d.a)(e=>e.bitstreamFormat))}updateFormat(e){this.bitstreamFormatDataService.updateBitstreamFormat(e).pipe(Object(s.g)()).subscribe(e=>{e.hasSucceeded?(this.notificationService.success(this.translateService.get("admin.registries.bitstream-formats.edit.success.head"),this.translateService.get("admin.registries.bitstream-formats.edit.success.content")),this.router.navigate([Object(m.b)()])):this.notificationService.error("admin.registries.bitstream-formats.edit.failure.head","admin.registries.bitstream-formats.create.edit.content")})}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](a.a),o["\u0275\u0275directiveInject"](a.g),o["\u0275\u0275directiveInject"](p.a),o["\u0275\u0275directiveInject"](u.f),o["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-edit-bitstream-format"]],decls:16,vars:11,consts:[[1,"container"],[1,"row"],[1,"col-12","mb-4"],["id","sub-header",1,"border-bottom","mb-2"],[3,"bitstreamFormat","updatedFormat"]],template:function(e,t){var n,i;1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275text"](1,"\n    "),o["\u0275\u0275elementStart"](2,"div",1),o["\u0275\u0275text"](3,"\n        "),o["\u0275\u0275elementStart"](4,"div",2),o["\u0275\u0275text"](5,"\n            "),o["\u0275\u0275elementStart"](6,"h2",3),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275pipe"](9,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](10,"\n\n             "),o["\u0275\u0275elementStart"](11,"ds-bitstream-format-form",4),o["\u0275\u0275listener"]("updatedFormat",(function(e){return t.updateFormat(e)})),o["\u0275\u0275pipe"](12,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](13,"\n\n        "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](14,"\n    "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](15,"\n"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](7),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](8,2,"admin.registries.bitstream-formats.edit.head",o["\u0275\u0275pureFunction1"](9,y,null==(n=o["\u0275\u0275pipeBind1"](9,5,t.bitstreamFormatRD$))?null:n.payload.shortDescription))),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("bitstreamFormat",null==(i=o["\u0275\u0275pipeBind1"](12,7,t.bitstreamFormatRD$))?null:i.payload))},directives:[S],pipes:[u.e,i.b],encapsulation:2}),e})();var w=n("1uah"),E=n("itXk"),j=n("7DXY"),F=n("B/au"),k=n("IzEk"),O=n("eIep"),C=n("MFUF"),B=n("Exvd");function M(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("(",o["\u0275\u0275pipeBind1"](2,1,"admin.registries.bitstream-formats.table.internal"),")"))}const L=function(e){return["/admin/registries/bitstream-formats",e,"edit"]};function D(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275text"](1,"\n                "),o["\u0275\u0275elementStart"](2,"td"),o["\u0275\u0275text"](3,"\n                  "),o["\u0275\u0275elementStart"](4,"label"),o["\u0275\u0275text"](5,"\n                    "),o["\u0275\u0275elementStart"](6,"input",16),o["\u0275\u0275listener"]("change",(function(n){o["\u0275\u0275restoreView"](e);const i=t.$implicit;return o["\u0275\u0275nextContext"](2).selectBitStreamFormat(i,n)})),o["\u0275\u0275pipe"](7,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](8,"\n                  "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](9,"\n                "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](10,"\n                "),o["\u0275\u0275elementStart"](11,"td"),o["\u0275\u0275elementStart"](12,"a",17),o["\u0275\u0275text"](13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](14,"\n                "),o["\u0275\u0275elementStart"](15,"td"),o["\u0275\u0275elementStart"](16,"a",17),o["\u0275\u0275text"](17),o["\u0275\u0275template"](18,M,3,3,"span",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](19,"\n                "),o["\u0275\u0275elementStart"](20,"td"),o["\u0275\u0275elementStart"](21,"a",17),o["\u0275\u0275text"](22),o["\u0275\u0275pipe"](23,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](24,"\n              "),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("checked",o["\u0275\u0275pipeBind1"](7,8,n.isSelected(e))),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("routerLink",o["\u0275\u0275pureFunction1"](12,L,e.id)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.shortDescription),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("routerLink",o["\u0275\u0275pureFunction1"](14,L,e.id)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",e.mimetype," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.internal),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("routerLink",o["\u0275\u0275pureFunction1"](16,L,e.id)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](23,10,"admin.registries.bitstream-formats.table.supportLevel."+e.supportLevel))}}function P(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"ds-pagination",11),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275pipe"](2,"async"),o["\u0275\u0275text"](3,"\n        "),o["\u0275\u0275elementStart"](4,"div",12),o["\u0275\u0275text"](5,"\n          "),o["\u0275\u0275elementStart"](6,"table",13),o["\u0275\u0275text"](7,"\n            "),o["\u0275\u0275elementStart"](8,"thead"),o["\u0275\u0275text"](9,"\n              "),o["\u0275\u0275elementStart"](10,"tr"),o["\u0275\u0275text"](11,"\n                "),o["\u0275\u0275element"](12,"th",14),o["\u0275\u0275text"](13,"\n                "),o["\u0275\u0275elementStart"](14,"th",14),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](17,"\n                "),o["\u0275\u0275elementStart"](18,"th",14),o["\u0275\u0275text"](19),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](21,"\n                "),o["\u0275\u0275elementStart"](22,"th",14),o["\u0275\u0275text"](23),o["\u0275\u0275pipe"](24,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](25,"\n              "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](26,"\n            "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](27,"\n            "),o["\u0275\u0275elementStart"](28,"tbody"),o["\u0275\u0275text"](29,"\n              "),o["\u0275\u0275template"](30,D,25,18,"tr",15),o["\u0275\u0275pipe"](31,"async"),o["\u0275\u0275text"](32,"\n            "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](33,"\n          "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](34,"\n        "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](35,"\n      "),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();var n,i,a;o["\u0275\u0275property"]("paginationOptions",e.pageConfig)("pageInfoState",null==(n=o["\u0275\u0275pipeBind1"](1,9,e.bitstreamFormats))?null:n.payload)("collectionSize",null==(i=o["\u0275\u0275pipeBind1"](2,11,e.bitstreamFormats))||null==i.payload?null:i.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),o["\u0275\u0275advance"](15),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](16,13,"admin.registries.bitstream-formats.table.name")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](20,15,"admin.registries.bitstream-formats.table.mimetype")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](24,17,"admin.registries.bitstream-formats.table.supportLevel.head")),o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("ngForOf",null==(a=o["\u0275\u0275pipeBind1"](31,19,e.bitstreamFormats))||null==a.payload?null:a.payload.page)}}function R(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",19),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("\n        ",o["\u0275\u0275pipeBind1"](2,1,"admin.registries.bitstream-formats.no-items"),"\n      "))}function V(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",20),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().deselectAll()})),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"admin.registries.bitstream-formats.table.deselect-all")))}function $(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",21),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().deleteFormats()})),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"admin.registries.bitstream-formats.table.delete")))}let q=(()=>{class e{constructor(e,t,n,i,a){this.notificationsService=e,this.router=t,this.translateService=n,this.bitstreamFormatService=i,this.paginationService=a,this.config=Object.assign(new F.f,{elementsPerPage:20}),this.pageConfig=Object.assign(new j.a,{id:"rbp",pageSize:20})}deleteFormats(){this.bitstreamFormatService.clearBitStreamFormatRequests().subscribe(),this.bitstreamFormatService.getSelectedBitstreamFormats().pipe(Object(k.a)(1)).subscribe(e=>{const t=[];for(const n of e)Object(b.b)(n.id)&&t.push(this.bitstreamFormatService.delete(n.id).pipe(Object(d.a)(e=>e.hasSucceeded)));Object(w.a)(...t).subscribe(e=>{const t=e.filter(e=>e),n=e.filter(e=>!e);t.length>0&&this.showNotification(!0,t.length),n.length>0&&this.showNotification(!1,n.length),this.deselectAll(),this.paginationService.resetPage(this.pageConfig.id)})})}deselectAll(){this.bitstreamFormatService.deselectAllBitstreamFormats()}isSelected(e){return this.bitstreamFormatService.getSelectedBitstreamFormats().pipe(Object(d.a)(t=>null!=t.find(t=>t.id===e.id)))}selectBitStreamFormat(e,t){t.target.checked?this.bitstreamFormatService.selectBitstreamFormat(e):this.bitstreamFormatService.deselectBitstreamFormat(e)}showNotification(e,t){const n="admin.registries.bitstream-formats.delete",i=e?"success":"failure";Object(E.a)(this.translateService.get(`${n}.${i}.head`),this.translateService.get(`${n}.${i}.amount`,{amount:t})).subscribe(([t,n])=>{e?this.notificationsService.success(t,n):this.notificationsService.error(t,n)})}ngOnInit(){this.bitstreamFormats=this.paginationService.getFindListOptions(this.pageConfig.id,this.config).pipe(Object(O.a)(e=>this.bitstreamFormatService.findAll(e)))}ngOnDestroy(){this.paginationService.clearPagination(this.pageConfig.id)}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](p.a),o["\u0275\u0275directiveInject"](a.g),o["\u0275\u0275directiveInject"](u.f),o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](C.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-bitstream-formats"]],decls:37,vars:22,consts:[[1,"container"],[1,"bitstream-formats","row"],[1,"col-12"],["id","header",1,"border-bottom","pb-2"],["id","description"],["id","create-new",1,"mb-2"],[1,"btn","btn-success",3,"routerLink"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info","role","alert",4,"ngIf"],["class","btn btn-primary deselect",3,"click",4,"ngIf"],["type","submit","class","btn btn-danger float-right",3,"click",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","formats",1,"table","table-striped","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],["type","checkbox",3,"checked","change"],[3,"routerLink"],[4,"ngIf"],["role","alert",1,"alert","alert-info"],[1,"btn","btn-primary","deselect",3,"click"],["type","submit",1,"btn","btn-danger","float-right",3,"click"]],template:function(e,t){var n,i,a,r;1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275text"](1,"\n  "),o["\u0275\u0275elementStart"](2,"div",1),o["\u0275\u0275text"](3,"\n    "),o["\u0275\u0275elementStart"](4,"div",2),o["\u0275\u0275text"](5,"\n\n      "),o["\u0275\u0275elementStart"](6,"h2",3),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](9,"\n\n      "),o["\u0275\u0275elementStart"](10,"p",4),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](13,"\n      "),o["\u0275\u0275elementStart"](14,"p",5),o["\u0275\u0275elementStart"](15,"a",6),o["\u0275\u0275text"](16),o["\u0275\u0275pipe"](17,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](18,"\n\n\n      "),o["\u0275\u0275template"](19,P,36,21,"ds-pagination",7),o["\u0275\u0275pipe"](20,"async"),o["\u0275\u0275text"](21,"\n      "),o["\u0275\u0275template"](22,R,3,3,"div",8),o["\u0275\u0275pipe"](23,"async"),o["\u0275\u0275text"](24,"\n\n      "),o["\u0275\u0275elementStart"](25,"div"),o["\u0275\u0275text"](26,"\n        "),o["\u0275\u0275template"](27,V,3,3,"button",9),o["\u0275\u0275pipe"](28,"async"),o["\u0275\u0275text"](29,"\n        "),o["\u0275\u0275template"](30,$,3,3,"button",10),o["\u0275\u0275pipe"](31,"async"),o["\u0275\u0275text"](32,"\n      "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](33,"\n    "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](34,"\n  "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](35,"\n"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](36,"\n")),2&e&&(o["\u0275\u0275advance"](7),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](8,8,"admin.registries.bitstream-formats.head")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](12,10,"admin.registries.bitstream-formats.description")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("routerLink","add"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](17,12,"admin.registries.bitstream-formats.create.new")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",(null==(n=o["\u0275\u0275pipeBind1"](20,14,t.bitstreamFormats))||null==n.payload?null:n.payload.totalElements)>0),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",0==(null==(i=o["\u0275\u0275pipeBind1"](23,16,t.bitstreamFormats))||null==i.payload?null:i.payload.totalElements)),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngIf",(null==(a=o["\u0275\u0275pipeBind1"](28,18,t.bitstreamFormats))||null==a.payload||null==a.payload.page?null:a.payload.page.length)>0),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",(null==(r=o["\u0275\u0275pipeBind1"](31,20,t.bitstreamFormats))||null==r.payload||null==r.payload.page?null:r.payload.page.length)>0))},directives:[a.j,i.u,B.a,i.t],pipes:[u.e,i.b],encapsulation:2}),e})(),N=(()=>{class e{constructor(e,t,n,i){this.router=e,this.notificationService=t,this.translateService=n,this.bitstreamFormatDataService=i}createBitstreamFormat(e){this.bitstreamFormatDataService.createBitstreamFormat(e).pipe(Object(s.g)()).subscribe(e=>{e.hasSucceeded?(this.notificationService.success(this.translateService.get("admin.registries.bitstream-formats.create.success.head"),this.translateService.get("admin.registries.bitstream-formats.create.success.content")),this.router.navigate([Object(m.b)()]),this.bitstreamFormatDataService.clearBitStreamFormatRequests().subscribe()):this.notificationService.error(this.translateService.get("admin.registries.bitstream-formats.create.failure.head"),this.translateService.get("admin.registries.bitstream-formats.create.failure.content"))})}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](a.g),o["\u0275\u0275directiveInject"](p.a),o["\u0275\u0275directiveInject"](u.f),o["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-add-bitstream-format"]],decls:14,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-12","mb-4"],["id","sub-header",1,"border-bottom","mb-2"],[3,"updatedFormat"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275text"](1,"\n    "),o["\u0275\u0275elementStart"](2,"div",1),o["\u0275\u0275text"](3,"\n        "),o["\u0275\u0275elementStart"](4,"div",2),o["\u0275\u0275text"](5,"\n            "),o["\u0275\u0275elementStart"](6,"h2",3),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](9,"\n\n            "),o["\u0275\u0275elementStart"](10,"ds-bitstream-format-form",4),o["\u0275\u0275listener"]("updatedFormat",(function(e){return t.createBitstreamFormat(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](11,"\n\n        "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](12,"\n    "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](13,"\n"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](7),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](8,1,"admin.registries.bitstream-formats.create.new")))},directives:[S],pipes:[u.e],encapsulation:2}),e})();var A=n("A0IO");let T=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[c],imports:[[a.k.forChild([{path:"",component:q},{path:"add",resolve:{breadcrumb:A.a},component:N,data:{breadcrumbKey:"admin.registries.bitstream-formats.create"}},{path:":id/edit",component:I,resolve:{bitstreamFormat:c,breadcrumb:A.a},data:{breadcrumbKey:"admin.registries.bitstream-formats.edit"}}])]]}),e})(),G=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,r.a,a.k,T]]}),e})()},V0Sv:function(e,t,n){"use strict";n.r(t),n.d(t,"AdminModule",(function(){return tt}));var i=n("PCNd"),a=n("esCw"),r=n("uCsG"),s=n("iInd"),o=n("TtJg"),l=n("ygbf"),c=n("J3qs"),d=n("1QIV"),m=n("Wy8O"),p=n("8Y7J"),u=n("SVse"),f=n("TSSN"),h=n("lI3o"),g=n("L6kw");let b=(()=>{class e{constructor(e,t,n,i,a){this.location=e,this.translate=t,this.notificationsService=n,this.scriptDataService=i,this.router=a}setFile(e){this.fileObject=e}onReturn(){this.location.back()}importMetadata(){if(null==this.fileObject)this.notificationsService.error(this.translate.get("admin.metadata-import.page.error.addFile"));else{const e=[Object.assign(new l.a,{name:"-f",value:this.fileObject.name})];this.scriptDataService.invoke(o.b,e,[this.fileObject]).pipe(Object(d.g)()).subscribe(e=>{if(e.hasSucceeded){const t=this.translate.get("process.new.notification.success.title"),n=this.translate.get("process.new.notification.success.content");this.notificationsService.success(t,n),Object(c.e)(e.payload)&&this.router.navigateByUrl(Object(m.b)(e.payload.processId))}else{const e=this.translate.get("process.new.notification.error.title"),t=this.translate.get("process.new.notification.error.content");this.notificationsService.error(e,t)}})}}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](u.o),p["\u0275\u0275directiveInject"](f.f),p["\u0275\u0275directiveInject"](h.a),p["\u0275\u0275directiveInject"](o.c),p["\u0275\u0275directiveInject"](s.g))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-metadata-import-page"]],decls:22,vars:14,consts:[[1,"container"],["id","header"],[3,"dropMessageLabel","dropMessageLabelReplacement","onFileAdded"],["id","backButton",1,"btn","btn-secondary",3,"click"],["id","proceedButton",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div",0),p["\u0275\u0275text"](1,"\n  "),p["\u0275\u0275elementStart"](2,"h2",1),p["\u0275\u0275text"](3),p["\u0275\u0275pipe"](4,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](5,"\n  "),p["\u0275\u0275elementStart"](6,"p"),p["\u0275\u0275text"](7),p["\u0275\u0275pipe"](8,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](9,"\n\n  "),p["\u0275\u0275elementStart"](10,"ds-file-dropzone-no-uploader",2),p["\u0275\u0275listener"]("onFileAdded",(function(e){return t.setFile(e)})),p["\u0275\u0275text"](11,"\n  "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](12,"\n\n  "),p["\u0275\u0275elementStart"](13,"button",3),p["\u0275\u0275listener"]("click",(function(){return t.onReturn()})),p["\u0275\u0275text"](14),p["\u0275\u0275pipe"](15,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](16,"\n  "),p["\u0275\u0275elementStart"](17,"button",4),p["\u0275\u0275listener"]("click",(function(){return t.importMetadata()})),p["\u0275\u0275text"](18),p["\u0275\u0275pipe"](19,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](20,"\n"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](21,"\n")),2&e&&(p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](4,6,"admin.metadata-import.page.header")),p["\u0275\u0275advance"](4),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](8,8,"admin.metadata-import.page.help")),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("dropMessageLabel","admin.metadata-import.page.dropMsg")("dropMessageLabelReplacement","admin.metadata-import.page.dropMsgReplace"),p["\u0275\u0275advance"](4),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](15,10,"admin.metadata-import.page.button.return")),p["\u0275\u0275advance"](4),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](19,12,"admin.metadata-import.page.button.proceed")))},directives:[g.a],pipes:[f.e],encapsulation:2}),e})();var v=n("ynxc"),x=n("Y8Hs");let S=(()=>{class e{constructor(){this.context=v.a.AdminSearch}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-admin-search-page"]],decls:2,vars:1,consts:[["configuration","administrativeView",3,"context"]],template:function(e,t){1&e&&(p["\u0275\u0275element"](0,"ds-configuration-search-page",0),p["\u0275\u0275text"](1,"\n")),2&e&&p["\u0275\u0275property"]("context",t.context)},directives:[x.ConfigurationSearchPageComponent],styles:[""]}),e})();var y=n("A0IO");let I=(()=>{class e{constructor(){this.context=v.a.AdminWorkflowSearch}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-admin-workflow-page"]],decls:2,vars:1,consts:[["configuration","workflowAdmin",3,"context"]],template:function(e,t){1&e&&(p["\u0275\u0275element"](0,"ds-configuration-search-page",0),p["\u0275\u0275text"](1,"\n")),2&e&&p["\u0275\u0275property"]("context",t.context)},directives:[x.ConfigurationSearchPageComponent],styles:[""]}),e})();var w=n("tv3Y"),E=n("Rgmz");let j=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-admin-curation-task"]],decls:9,vars:3,consts:[[1,"container"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div",0),p["\u0275\u0275text"](1,"\n    "),p["\u0275\u0275elementStart"](2,"h2"),p["\u0275\u0275text"](3),p["\u0275\u0275pipe"](4,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](5,"\n    "),p["\u0275\u0275element"](6,"ds-curation-form"),p["\u0275\u0275text"](7,"\n"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](8,"\n")),2&e&&(p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](4,1,"admin.curation-tasks.header")))},directives:[E.a],pipes:[f.e],encapsulation:2}),e})();var F=n("tmoE");let k=(()=>{class e{}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[y.a,w.a],imports:[[s.k.forChild([{path:F.a,loadChildren:()=>Promise.resolve().then(n.bind(null,"uCsG")).then(e=>e.AdminRegistriesModule)},{path:"search",resolve:{breadcrumb:y.a},component:S,data:{title:"admin.search.title",breadcrumbKey:"admin.search"}},{path:"workflow",resolve:{breadcrumb:y.a},component:I,data:{title:"admin.workflow.title",breadcrumbKey:"admin.workflow"}},{path:"curation-tasks",resolve:{breadcrumb:y.a},component:j,data:{title:"admin.curation-tasks.title",breadcrumbKey:"admin.curation-tasks"}},{path:"metadata-import",resolve:{breadcrumb:y.a},component:b,data:{title:"admin.metadata-import.title",breadcrumbKey:"admin.metadata-import"}}])]]}),e})();var O=n("mrSG"),C=n("3jCq"),B=n("4v6T"),M=n("rrDp"),L=n("DB7N"),D=n("PCBh"),P=n("Wm14"),R=n("sfEo"),V=n("84Zn"),$=n("IzEk"),q=n("t9+m"),N=n("k7Qu"),A=n("enlO");function T(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"span",5),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"translate"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](2,1,"admin.workflow.item.delete"),""))}function G(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"span",5),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"translate"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](2,1,"admin.workflow.item.send-back"),""))}const z=function(e){return{"btn-sm":e}},Q=function(e){return[e]};let U=(()=>{class e{getDeleteRoute(){return Object(A.d)(this.wfi.id)}getSendBackRoute(){return Object(A.e)(this.wfi.id)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-workflow-item-admin-workflow-actions-element"]],inputs:{wfi:"wfi",small:"small"},decls:14,vars:20,consts:[[1,"btn","btn-light","my-1","delete-link",3,"ngClass","routerLink","title"],[1,"fa","fa-trash"],["class","d-none d-sm-inline",4,"ngIf"],[1,"btn","btn-light","my-1","send-back-link",3,"ngClass","routerLink","title"],[1,"fa","fa-hand-point-left"],[1,"d-none","d-sm-inline"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"a",0),p["\u0275\u0275pipe"](1,"translate"),p["\u0275\u0275text"](2,"\n    "),p["\u0275\u0275element"](3,"i",1),p["\u0275\u0275template"](4,T,3,3,"span",2),p["\u0275\u0275text"](5,"\n"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](6,"\n\n"),p["\u0275\u0275elementStart"](7,"a",3),p["\u0275\u0275pipe"](8,"translate"),p["\u0275\u0275text"](9,"\n    "),p["\u0275\u0275element"](10,"i",4),p["\u0275\u0275template"](11,G,3,3,"span",2),p["\u0275\u0275text"](12,"\n"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](13,"\n")),2&e&&(p["\u0275\u0275property"]("ngClass",p["\u0275\u0275pureFunction1"](12,z,t.small))("routerLink",p["\u0275\u0275pureFunction1"](14,Q,t.getDeleteRoute()))("title",p["\u0275\u0275pipeBind1"](1,8,"admin.workflow.item.delete")),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngIf",!t.small),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngClass",p["\u0275\u0275pureFunction1"](16,z,t.small))("routerLink",p["\u0275\u0275pureFunction1"](18,Q,t.getSendBackRoute()))("title",p["\u0275\u0275pipeBind1"](8,10,"admin.workflow.item.send-back")),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngIf",!t.small))},directives:[s.j,u.r,u.u],pipes:[f.e],styles:[""]}),e})();const W=["badges"],K=["buttons"];function J(e,t){1&e&&p["\u0275\u0275text"](0,"\n")}function Y(e,t){if(1&e&&p["\u0275\u0275element"](0,"ds-workflow-item-admin-workflow-actions-element",9),2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("wfi",e.dso)("small",!0)}}let H=(()=>{let e=class extends M.a{constructor(e,t,n,i,a){super(n,a),this.componentFactoryResolver=e,this.linkService=t,this.truncatableService=n,this.themeService=i,this.bitstreamDataService=a}ngOnInit(){super.ngOnInit(),this.dso=this.linkService.resolveLink(this.dso,Object(V.a)("item")),this.item$=this.dso.item.pipe(Object(d.c)(),Object(d.o)()),this.item$.pipe(Object($.a)(1)).subscribe(e=>{const t=this.componentFactoryResolver.resolveComponentFactory(this.getComponent(e)),n=this.listableObjectDirective.viewContainerRef;n.clear();const i=n.createComponent(t,0,void 0,[[this.badges.nativeElement],[this.buttons.nativeElement]]);i.instance.object=e,i.instance.index=this.index,i.instance.linkType=this.linkType,i.instance.listID=this.listID,i.changeDetectorRef.detectChanges()})}getComponent(e){return Object(B.a)(e.getRenderTypes(),C.a.GridElement,void 0,this.themeService.getThemeName())}};return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](p.ComponentFactoryResolver),p["\u0275\u0275directiveInject"](R.a),p["\u0275\u0275directiveInject"](L.a),p["\u0275\u0275directiveInject"](N.a),p["\u0275\u0275directiveInject"](D.a))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-workflow-item-search-result-admin-workflow-grid-element"]],viewQuery:function(e,t){var n;1&e&&(p["\u0275\u0275staticViewQuery"](P.a,!0),p["\u0275\u0275staticViewQuery"](W,!0),p["\u0275\u0275staticViewQuery"](K,!0)),2&e&&(p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.listableObjectDirective=n.first),p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.badges=n.first),p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.buttons=n.first))},features:[p["\u0275\u0275InheritDefinitionFeature"]],decls:22,vars:4,consts:[["dsListableObject",""],[1,"position-absolute","ml-1"],["badges",""],[1,"workflow-badge"],[1,"badge","badge-info"],[1,"list-group","list-group-flush"],["buttons",""],[1,"list-group-item"],["class","d-flex justify-content-between",3,"wfi","small",4,"ngIf"],[1,"d-flex","justify-content-between",3,"wfi","small"]],template:function(e,t){1&e&&(p["\u0275\u0275template"](0,J,1,0,"ng-template",0),p["\u0275\u0275text"](1,"\n"),p["\u0275\u0275elementStart"](2,"div",1,2),p["\u0275\u0275text"](4,"\n    "),p["\u0275\u0275elementStart"](5,"div",3),p["\u0275\u0275text"](6,"\n        "),p["\u0275\u0275elementStart"](7,"span",4),p["\u0275\u0275text"](8),p["\u0275\u0275pipe"](9,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](10,"\n    "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](11,"\n"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](12,"\n"),p["\u0275\u0275elementStart"](13,"ul",5,6),p["\u0275\u0275text"](15,"\n    "),p["\u0275\u0275elementStart"](16,"li",7),p["\u0275\u0275text"](17,"\n        "),p["\u0275\u0275template"](18,Y,1,2,"ds-workflow-item-admin-workflow-actions-element",8),p["\u0275\u0275text"](19,"\n    "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](20,"\n"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](21,"\n")),2&e&&(p["\u0275\u0275advance"](8),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](9,2,"admin.workflow.item.workflow")),p["\u0275\u0275advance"](10),p["\u0275\u0275property"]("ngIf",t.object))},directives:[P.a,u.u,U],pipes:[f.e],styles:[""]}),e=Object(O.b)([Object(B.b)(q.a,C.a.GridElement,v.a.AdminWorkflowSearch)],e),e})();var X=n("UVdL"),Z=n("C765"),_=n("1aCu");function ee(e,t){if(1&e&&(p["\u0275\u0275element"](0,"ds-listable-object-component-loader",4),p["\u0275\u0275pipe"](1,"async")),2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("object",p["\u0275\u0275pipeBind1"](1,5,e.item$))("viewMode",e.viewModes.ListElement)("index",e.index)("linkType",e.linkType)("listID",e.listID)}}const te=[(()=>{let e=class extends X.a{constructor(e,t,n){super(t,n),this.linkService=e,this.truncatableService=t,this.dsoNameService=n}ngOnInit(){super.ngOnInit(),this.dso=this.linkService.resolveLink(this.dso,Object(V.a)("item")),this.item$=this.dso.item.pipe(Object(d.c)(),Object(d.o)())}};return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](R.a),p["\u0275\u0275directiveInject"](L.a),p["\u0275\u0275directiveInject"](Z.a))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-workflow-item-search-result-admin-workflow-list-element"]],features:[p["\u0275\u0275InheritDefinitionFeature"]],decls:12,vars:8,consts:[[1,"workflow-badge"],[1,"badge","badge-info"],[3,"object","viewMode","index","linkType","listID",4,"ngIf"],[3,"wfi","small"],[3,"object","viewMode","index","linkType","listID"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div",0),p["\u0275\u0275text"](1,"\n    "),p["\u0275\u0275elementStart"](2,"span",1),p["\u0275\u0275text"](3),p["\u0275\u0275pipe"](4,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](5,"\n"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](6,"\n"),p["\u0275\u0275template"](7,ee,2,7,"ds-listable-object-component-loader",2),p["\u0275\u0275pipe"](8,"async"),p["\u0275\u0275text"](9,"\n"),p["\u0275\u0275element"](10,"ds-workflow-item-admin-workflow-actions-element",3),p["\u0275\u0275text"](11,"\n")),2&e&&(p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](4,4,"admin.workflow.item.workflow")),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngIf",p["\u0275\u0275pipeBind1"](8,6,t.item$)),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("wfi",t.dso)("small",!1))},directives:[u.u,U,_.a],pipes:[f.e,u.b],styles:[""]}),e=Object(O.b)([Object(B.b)(q.a,C.a.ListElement,v.a.AdminWorkflowSearch)],e),e})(),H];let ne=(()=>{class e{static withEntryComponents(){return{ngModule:i.a,providers:te.map(e=>({provide:e}))}}}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.a.withEntryComponents()]]}),e})();var ie=n("4SI6"),ae=n("zZO8"),re=n("MEmd"),se=n("YqLK");function oe(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"span",11),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"translate"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](2,1,"admin.search.item.move"),""))}function le(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"span",11),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"translate"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](2,1,"admin.search.item.make-private"),""))}const ce=function(e){return{"btn-sm":e}},de=function(e){return[e]};function me(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"a",12),p["\u0275\u0275pipe"](1,"translate"),p["\u0275\u0275text"](2,"\n    "),p["\u0275\u0275element"](3,"i",13),p["\u0275\u0275template"](4,le,3,3,"span",2),p["\u0275\u0275text"](5,"\n"),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("ngClass",p["\u0275\u0275pureFunction1"](6,ce,e.small))("routerLink",p["\u0275\u0275pureFunction1"](8,de,e.getPrivateRoute()))("title",p["\u0275\u0275pipeBind1"](1,4,"admin.search.item.make-private")),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngIf",!e.small)}}function pe(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"span",11),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"translate"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](2,1,"admin.search.item.make-public"),""))}function ue(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"a",14),p["\u0275\u0275pipe"](1,"translate"),p["\u0275\u0275text"](2,"\n    "),p["\u0275\u0275element"](3,"i",15),p["\u0275\u0275template"](4,pe,3,3,"span",2),p["\u0275\u0275text"](5,"\n"),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("ngClass",p["\u0275\u0275pureFunction1"](6,ce,e.small))("routerLink",p["\u0275\u0275pureFunction1"](8,de,e.getPublicRoute()))("title",p["\u0275\u0275pipeBind1"](1,4,"admin.search.item.make-public")),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngIf",!e.small)}}function fe(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"span",11),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"translate"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](2,1,"admin.search.item.edit"),""))}function he(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"span",11),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"translate"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](2,1,"admin.search.item.withdraw"),""))}function ge(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"a",16),p["\u0275\u0275pipe"](1,"translate"),p["\u0275\u0275text"](2,"\n  "),p["\u0275\u0275element"](3,"i",17),p["\u0275\u0275template"](4,he,3,3,"span",2),p["\u0275\u0275text"](5,"\n"),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("ngClass",p["\u0275\u0275pureFunction1"](6,ce,e.small))("routerLink",p["\u0275\u0275pureFunction1"](8,de,e.getWithdrawRoute()))("title",p["\u0275\u0275pipeBind1"](1,4,"admin.search.item.withdraw")),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngIf",!e.small)}}function be(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"span",11),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"translate"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](2,1,"admin.search.item.reinstate"),""))}function ve(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"a",18),p["\u0275\u0275pipe"](1,"translate"),p["\u0275\u0275text"](2,"\n  "),p["\u0275\u0275element"](3,"i",19),p["\u0275\u0275template"](4,be,3,3,"span",2),p["\u0275\u0275text"](5,"\n"),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("ngClass",p["\u0275\u0275pureFunction1"](6,ce,e.small))("routerLink",p["\u0275\u0275pureFunction1"](8,de,e.getReinstateRoute()))("title",p["\u0275\u0275pipeBind1"](1,4,"admin.search.item.reinstate")),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngIf",!e.small)}}function xe(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"span",11),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"translate"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](2,1,"admin.search.item.delete"),""))}let Se=(()=>{class e{getEditRoute(){return Object(re.e)(this.item)}getMoveRoute(){return new ae.a(this.getEditRoute(),se.c).toString()}getDeleteRoute(){return new ae.a(this.getEditRoute(),se.b).toString()}getWithdrawRoute(){return new ae.a(this.getEditRoute(),se.g).toString()}getReinstateRoute(){return new ae.a(this.getEditRoute(),se.f).toString()}getPrivateRoute(){return new ae.a(this.getEditRoute(),se.d).toString()}getPublicRoute(){return new ae.a(this.getEditRoute(),se.e).toString()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-admin-search-result-actions-element"]],inputs:{item:"item",small:"small"},decls:29,vars:34,consts:[[1,"btn","btn-secondary","my-1","move-link",3,"ngClass","routerLink","title"],[1,"fa","fa-arrow-circle-right"],["class","d-none d-sm-inline",4,"ngIf"],["class","btn btn-secondary my-1 private-link",3,"ngClass","routerLink","title",4,"ngIf"],["class","btn btn-secondary my-1 public-link",3,"ngClass","routerLink","title",4,"ngIf"],[1,"btn","btn-secondary","my-1","edit-link",3,"ngClass","routerLink","title"],[1,"fa","fa-edit"],["class","btn btn-warning t my-1 withdraw-link",3,"ngClass","routerLink","title",4,"ngIf"],["class","btn btn-warning my-1 reinstate-link",3,"ngClass","routerLink","title",4,"ngIf"],[1,"btn","btn-danger","my-1","delete-link",3,"ngClass","routerLink","title"],[1,"fa","fa-trash"],[1,"d-none","d-sm-inline"],[1,"btn","btn-secondary","my-1","private-link",3,"ngClass","routerLink","title"],[1,"fa","fa-eye-slash"],[1,"btn","btn-secondary","my-1","public-link",3,"ngClass","routerLink","title"],[1,"fa","fa-eye"],[1,"btn","btn-warning","t","my-1","withdraw-link",3,"ngClass","routerLink","title"],[1,"fa","fa-ban"],[1,"btn","btn-warning","my-1","reinstate-link",3,"ngClass","routerLink","title"],[1,"fa","fa-undo"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"a",0),p["\u0275\u0275pipe"](1,"translate"),p["\u0275\u0275text"](2,"\n  "),p["\u0275\u0275element"](3,"i",1),p["\u0275\u0275template"](4,oe,3,3,"span",2),p["\u0275\u0275text"](5,"\n"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](6,"\n\n"),p["\u0275\u0275template"](7,me,6,10,"a",3),p["\u0275\u0275text"](8,"\n\n"),p["\u0275\u0275template"](9,ue,6,10,"a",4),p["\u0275\u0275text"](10,"\n\n"),p["\u0275\u0275elementStart"](11,"a",5),p["\u0275\u0275pipe"](12,"translate"),p["\u0275\u0275text"](13,"\n  "),p["\u0275\u0275element"](14,"i",6),p["\u0275\u0275template"](15,fe,3,3,"span",2),p["\u0275\u0275text"](16,"\n"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](17,"\n\n"),p["\u0275\u0275template"](18,ge,6,10,"a",7),p["\u0275\u0275text"](19,"\n\n"),p["\u0275\u0275template"](20,ve,6,10,"a",8),p["\u0275\u0275text"](21,"\n\n"),p["\u0275\u0275elementStart"](22,"a",9),p["\u0275\u0275pipe"](23,"translate"),p["\u0275\u0275text"](24,"\n    "),p["\u0275\u0275element"](25,"i",10),p["\u0275\u0275template"](26,xe,3,3,"span",2),p["\u0275\u0275text"](27,"\n"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](28,"\n\n")),2&e&&(p["\u0275\u0275property"]("ngClass",p["\u0275\u0275pureFunction1"](22,ce,t.small))("routerLink",p["\u0275\u0275pureFunction1"](24,de,t.getMoveRoute()))("title",p["\u0275\u0275pipeBind1"](1,16,"admin.search.item.move")),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngIf",!t.small),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngIf",t.item&&t.item.isDiscoverable),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf",t.item&&!t.item.isDiscoverable),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngClass",p["\u0275\u0275pureFunction1"](26,ce,t.small))("routerLink",p["\u0275\u0275pureFunction1"](28,de,t.getEditRoute()))("title",p["\u0275\u0275pipeBind1"](12,18,"admin.search.item.edit")),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngIf",!t.small),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngIf",t.item&&!t.item.isWithdrawn),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf",t.item&&t.item.isWithdrawn),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngClass",p["\u0275\u0275pureFunction1"](30,ce,t.small))("routerLink",p["\u0275\u0275pureFunction1"](32,de,t.getDeleteRoute()))("title",p["\u0275\u0275pipeBind1"](23,20,"admin.search.item.delete")),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngIf",!t.small))},directives:[s.j,u.r,u.u],pipes:[f.e],styles:[""]}),e})(),ye=(()=>{let e=class extends X.a{};return e.\u0275fac=function(t){return Ie(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-admin-search-result-list-element"]],features:[p["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:8,consts:[[3,"object","viewMode","index","linkType","listID","hideBadges"],[3,"item","small"]],template:function(e,t){1&e&&(p["\u0275\u0275element"](0,"ds-listable-object-component-loader",0),p["\u0275\u0275text"](1,"\n"),p["\u0275\u0275element"](2,"ds-item-admin-search-result-actions-element",1),p["\u0275\u0275text"](3,"\n")),2&e&&(p["\u0275\u0275property"]("object",t.object)("viewMode",t.viewModes.ListElement)("index",t.index)("linkType",t.linkType)("listID",t.listID)("hideBadges",!0),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("item",t.dso)("small",!1))},directives:[_.a,Se],styles:[""]}),e=Object(O.b)([Object(B.b)(ie.a,C.a.ListElement,v.a.AdminSearch)],e),e})();const Ie=p["\u0275\u0275getInheritedFactory"](ye);var we=n("Hymi"),Ee=n("KIxa"),je=n("83zO");const Fe=function(e){return[e]};let ke=(()=>{let e=class extends X.a{ngOnInit(){super.ngOnInit(),this.editPath=Object(Ee.g)(this.dso.uuid)}};return e.\u0275fac=function(t){return Oe(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-community-admin-search-result-list-element"]],features:[p["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:10,consts:[[3,"object","index","linkType","listID"],[1,"btn","btn-light","mt-1",3,"routerLink"],[1,"fa","fa-edit"]],template:function(e,t){1&e&&(p["\u0275\u0275element"](0,"ds-community-search-result-list-element",0),p["\u0275\u0275text"](1,"\n"),p["\u0275\u0275elementStart"](2,"div"),p["\u0275\u0275text"](3,"\n    "),p["\u0275\u0275elementStart"](4,"a",1),p["\u0275\u0275text"](5,"\n        "),p["\u0275\u0275element"](6,"i",2),p["\u0275\u0275text"](7),p["\u0275\u0275pipe"](8,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](9,"\n"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](10,"\n")),2&e&&(p["\u0275\u0275property"]("object",t.object)("index",t.index)("linkType",t.linkType)("listID",t.listID),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("routerLink",p["\u0275\u0275pureFunction1"](8,Fe,t.editPath)),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](8,6,"admin.search.community.edit"),"\n    "))},directives:[je.a,s.j],pipes:[f.e],styles:[""]}),e=Object(O.b)([Object(B.b)(we.a,C.a.ListElement,v.a.AdminSearch)],e),e})();const Oe=p["\u0275\u0275getInheritedFactory"](ke);var Ce=n("BSkO"),Be=n("HaPv"),Me=n("ecQD");const Le=function(e){return[e]};let De=(()=>{let e=class extends X.a{ngOnInit(){super.ngOnInit(),this.editPath=Object(Be.h)(this.dso.uuid)}};return e.\u0275fac=function(t){return Pe(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-collection-admin-search-result-list-element"]],features:[p["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:10,consts:[[3,"object","index","linkType","listID"],[1,"btn","btn-light","mt-1",3,"routerLink"],[1,"fa","fa-edit"]],template:function(e,t){1&e&&(p["\u0275\u0275element"](0,"ds-collection-search-result-list-element",0),p["\u0275\u0275text"](1,"\n"),p["\u0275\u0275elementStart"](2,"div"),p["\u0275\u0275text"](3,"\n    "),p["\u0275\u0275elementStart"](4,"a",1),p["\u0275\u0275text"](5,"\n        "),p["\u0275\u0275element"](6,"i",2),p["\u0275\u0275text"](7),p["\u0275\u0275pipe"](8,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](9,"\n"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](10,"\n")),2&e&&(p["\u0275\u0275property"]("object",t.object)("index",t.index)("linkType",t.linkType)("listID",t.listID),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("routerLink",p["\u0275\u0275pureFunction1"](8,Le,t.editPath)),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](8,6,"admin.search.collection.edit"),"\n    "))},directives:[Me.a,s.j],pipes:[f.e],styles:[""]}),e=Object(O.b)([Object(B.b)(Ce.a,C.a.ListElement,v.a.AdminSearch)],e),e})();const Pe=p["\u0275\u0275getInheritedFactory"](De),Re=["badges"],Ve=["buttons"];function $e(e,t){1&e&&p["\u0275\u0275text"](0,"\n")}const qe=["*"];let Ne=(()=>{let e=class extends M.a{constructor(e,t,n,i){super(e,t),this.truncatableService=e,this.bitstreamDataService=t,this.themeService=n,this.componentFactoryResolver=i}ngOnInit(){super.ngOnInit();const e=this.componentFactoryResolver.resolveComponentFactory(this.getComponent()),t=this.listableObjectDirective.viewContainerRef;t.clear();const n=t.createComponent(e,0,void 0,[[this.badges.nativeElement],[this.buttons.nativeElement]]);n.instance.object=this.object,n.instance.index=this.index,n.instance.linkType=this.linkType,n.instance.listID=this.listID}getComponent(){return Object(B.a)(this.object.getRenderTypes(),C.a.GridElement,void 0,this.themeService.getThemeName())}};return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](L.a),p["\u0275\u0275directiveInject"](D.a),p["\u0275\u0275directiveInject"](N.a),p["\u0275\u0275directiveInject"](p.ComponentFactoryResolver))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-admin-search-result-grid-element"]],viewQuery:function(e,t){var n;1&e&&(p["\u0275\u0275staticViewQuery"](P.a,!0),p["\u0275\u0275staticViewQuery"](Re,!0),p["\u0275\u0275staticViewQuery"](Ve,!0)),2&e&&(p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.listableObjectDirective=n.first),p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.badges=n.first),p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.buttons=n.first))},features:[p["\u0275\u0275InheritDefinitionFeature"]],ngContentSelectors:qe,decls:17,vars:2,consts:[["dsListableObject",""],["badges",""],[1,"list-group","list-group-flush"],["buttons",""],[1,"list-group-item"],[1,"d-flex","justify-content-between",3,"item","small"]],template:function(e,t){1&e&&(p["\u0275\u0275projectionDef"](),p["\u0275\u0275template"](0,$e,1,0,"ng-template",0),p["\u0275\u0275text"](1,"\n"),p["\u0275\u0275elementStart"](2,"div",null,1),p["\u0275\u0275text"](4,"\n  "),p["\u0275\u0275projection"](5),p["\u0275\u0275text"](6,"\n"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](7,"\n"),p["\u0275\u0275elementStart"](8,"ul",2,3),p["\u0275\u0275text"](10,"\n  "),p["\u0275\u0275elementStart"](11,"li",4),p["\u0275\u0275text"](12,"\n      "),p["\u0275\u0275element"](13,"ds-item-admin-search-result-actions-element",5),p["\u0275\u0275text"](14,"\n  "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](15,"\n"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](16,"\n")),2&e&&(p["\u0275\u0275advance"](13),p["\u0275\u0275property"]("item",t.dso)("small",!0))},directives:[P.a,Se],styles:[""]}),e=Object(O.b)([Object(B.b)(ie.a,C.a.GridElement,v.a.AdminSearch)],e),e})();var Ae=n("xG+5");const Te=function(e){return[e]};let Ge=(()=>{let e=class extends M.a{ngOnInit(){super.ngOnInit(),this.editPath=Object(Ee.g)(this.dso.uuid)}};return e.\u0275fac=function(t){return ze(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-community-admin-search-result-grid-element"]],features:[p["\u0275\u0275InheritDefinitionFeature"]],decls:14,vars:7,consts:[[3,"object","index","linkType","listID"],[1,"list-group","list-group-flush"],[1,"list-group-item","text-center"],[1,"btn","btn-light","btn-sm","btn-auto","my-1","edit-link",3,"routerLink"],[1,"fa","fa-edit"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"ds-community-search-result-grid-element",0),p["\u0275\u0275text"](1,"\n  "),p["\u0275\u0275elementStart"](2,"ul",1),p["\u0275\u0275text"](3,"\n    "),p["\u0275\u0275elementStart"](4,"li",2),p["\u0275\u0275text"](5,"\n      "),p["\u0275\u0275elementStart"](6,"a",3),p["\u0275\u0275text"](7,"\n        "),p["\u0275\u0275element"](8,"i",4),p["\u0275\u0275text"](9,"\n      "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](10,"\n    "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](11,"\n  "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](12,"\n"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](13,"\n\n")),2&e&&(p["\u0275\u0275property"]("object",t.object)("index",t.index)("linkType",t.linkType)("listID",t.listID),p["\u0275\u0275advance"](6),p["\u0275\u0275property"]("routerLink",p["\u0275\u0275pureFunction1"](5,Te,t.editPath)))},directives:[Ae.a,s.j],styles:[""]}),e=Object(O.b)([Object(B.b)(we.a,C.a.GridElement,v.a.AdminSearch)],e),e})();const ze=p["\u0275\u0275getInheritedFactory"](Ge);var Qe=n("SJRl");const Ue=function(e){return[e]};let We=(()=>{let e=class extends M.a{ngOnInit(){super.ngOnInit(),this.editPath=Object(Be.h)(this.dso.uuid)}};return e.\u0275fac=function(t){return Ke(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-collection-admin-search-result-list-element"]],features:[p["\u0275\u0275InheritDefinitionFeature"]],decls:14,vars:7,consts:[[3,"object","index","linkType","listID"],[1,"list-group","list-group-flush"],[1,"list-group-item","text-center"],[1,"btn","btn-light","btn-sm","btn-auto","my-1","edit-link",3,"routerLink"],[1,"fa","fa-edit"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"ds-collection-search-result-grid-element",0),p["\u0275\u0275text"](1,"\n  "),p["\u0275\u0275elementStart"](2,"ul",1),p["\u0275\u0275text"](3,"\n    "),p["\u0275\u0275elementStart"](4,"li",2),p["\u0275\u0275text"](5,"\n      "),p["\u0275\u0275elementStart"](6,"a",3),p["\u0275\u0275text"](7,"\n        "),p["\u0275\u0275element"](8,"i",4),p["\u0275\u0275text"](9,"\n      "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](10,"\n    "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](11,"\n  "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](12,"\n"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](13,"\n\n")),2&e&&(p["\u0275\u0275property"]("object",t.object)("index",t.index)("linkType",t.linkType)("listID",t.listID),p["\u0275\u0275advance"](6),p["\u0275\u0275property"]("routerLink",p["\u0275\u0275pureFunction1"](5,Ue,t.editPath)))},directives:[Qe.a,s.j],styles:[""]}),e=Object(O.b)([Object(B.b)(Ce.a,C.a.GridElement,v.a.AdminSearch)],e),e})();const Ke=p["\u0275\u0275getInheritedFactory"](We);var Je=n("N0eT"),Ye=n("udvk");const He=[ye,ke,De,Ne,Ge,We,Se];let Xe=(()=>{class e{static withEntryComponents(){return{ngModule:i.a,providers:He.map(e=>({provide:e}))}}}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.a.withEntryComponents(),Je.a.withEntryComponents(),Ye.a.withEntryComponents()]]}),e})();var Ze=n("j/v9"),_e=n("quIJ");const et=[Ze.a,_e.a];let tt=(()=>{class e{static withEntryComponents(){return{ngModule:e,providers:et.map(e=>({provide:e}))}}}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[k,r.AdminRegistriesModule,a.AccessControlModule,Xe.withEntryComponents(),ne.withEntryComponents(),i.a]]}),e})()},tmoE:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var i=n("zZO8"),a=n("TVZh");const r="registries";function s(){return new i.a(Object(a.k)(),r).toString()}},uCsG:function(e,t,n){"use strict";n.r(t),n.d(t,"AdminRegistriesModule",(function(){return le}));var i=n("2Vo4"),a=n("1uah"),r=n("itXk"),s=n("7DXY"),o=n("pLZG"),l=n("eIep"),c=n("IzEk"),d=n("lJxs"),m=n("J3qs"),p=n("B/au");function u(e,t){return Object.assign(new p.f,t,{currentPage:e.currentPage,elementsPerPage:e.pageSize})}var f=n("1QIV"),h=n("8Y7J"),g=n("Y6Ni"),b=n("lI3o"),v=n("iInd"),x=n("MFUF"),S=n("TSSN"),y=n("QOHy"),I=n("Hbzl"),w=n("Q5/L"),E=n("SVse"),j=n("hqmO"),F=n("s7LF");function k(e,t){1&e&&h["\u0275\u0275element"](0,"div")}function O(e,t){if(1&e&&(h["\u0275\u0275text"](0,"\n    "),h["\u0275\u0275elementStart"](1,"h4"),h["\u0275\u0275text"](2),h["\u0275\u0275pipe"](3,"translate"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](4,"\n")),2&e){const e=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind1"](3,1,e.messagePrefix+".create"))}}function C(e,t){if(1&e&&(h["\u0275\u0275text"](0,"\n    "),h["\u0275\u0275elementStart"](1,"h4"),h["\u0275\u0275text"](2),h["\u0275\u0275pipe"](3,"translate"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](4,"\n")),2&e){const e=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind1"](3,1,e.messagePrefix+".edit"))}}let B=(()=>{class e{constructor(e,t,n){this.registryService=e,this.formBuilderService=t,this.translateService=n,this.formId="metadata-schema-form",this.messagePrefix="admin.registries.metadata.form",this.formLayout={name:{grid:{host:"col col-sm-6 d-inline-block"}},namespace:{grid:{host:"col col-sm-6 d-inline-block"}}},this.submitForm=new h.EventEmitter}ngOnInit(){Object(r.a)(this.translateService.get(`${this.messagePrefix}.name`),this.translateService.get(`${this.messagePrefix}.namespace`)).subscribe(([e,t])=>{this.name=new y.I({id:"name",label:e,name:"name",validators:{required:null,pattern:"^[^ ,_]{1,32}$"},required:!0}),this.namespace=new y.I({id:"namespace",label:t,name:"namespace",validators:{required:null},required:!0}),this.formModel=[new y.C({id:"metadatadataschemagroup",group:[this.namespace,this.name]})],this.formGroup=this.formBuilderService.createFormGroup(this.formModel),this.registryService.getActiveMetadataSchema().subscribe(e=>{this.formGroup.patchValue({metadatadataschemagroup:{name:null!=e?e.prefix:"",namespace:null!=e?e.namespace:""}})})})}onCancel(){this.registryService.cancelEditMetadataSchema()}onSubmit(){this.registryService.clearMetadataSchemaRequests().subscribe(),this.registryService.getActiveMetadataSchema().pipe(Object(c.a)(1)).subscribe(e=>{const t={prefix:this.name.value,namespace:this.namespace.value};null==e?this.registryService.createOrUpdateMetadataSchema(Object.assign(new I.a,t)).subscribe(e=>{this.submitForm.emit(e)}):this.registryService.createOrUpdateMetadataSchema(Object.assign(new I.a,e,{id:e.id,prefix:t.prefix?t.prefix:e.prefix,namespace:t.namespace?t.namespace:e.namespace})).subscribe(e=>{this.submitForm.emit(e)}),this.clearFields(),this.registryService.cancelEditMetadataSchema()})}clearFields(){this.formGroup.patchValue({metadatadataschemagroup:{prefix:"",namespace:""}})}ngOnDestroy(){this.onCancel()}}return e.\u0275fac=function(t){return new(t||e)(h["\u0275\u0275directiveInject"](g.a),h["\u0275\u0275directiveInject"](w.a),h["\u0275\u0275directiveInject"](S.f))},e.\u0275cmp=h["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-metadata-schema-form"]],outputs:{submitForm:"submitForm"},decls:12,vars:9,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["createHeader",""],["editheader",""],[3,"formId","formModel","formGroup","formLayout","cancel","submitForm"]],template:function(e,t){if(1&e&&(h["\u0275\u0275template"](0,k,1,0,"div",0),h["\u0275\u0275pipe"](1,"async"),h["\u0275\u0275text"](2,"\n\n"),h["\u0275\u0275template"](3,O,5,3,"ng-template",null,1,h["\u0275\u0275templateRefExtractor"]),h["\u0275\u0275text"](5,"\n\n"),h["\u0275\u0275template"](6,C,5,3,"ng-template",null,2,h["\u0275\u0275templateRefExtractor"]),h["\u0275\u0275text"](8,"\n\n"),h["\u0275\u0275elementStart"](9,"ds-form",3),h["\u0275\u0275listener"]("cancel",(function(){return t.onCancel()}))("submitForm",(function(){return t.onSubmit()})),h["\u0275\u0275text"](10,"\n\n"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](11,"\n")),2&e){const e=h["\u0275\u0275reference"](4),n=h["\u0275\u0275reference"](7);h["\u0275\u0275property"]("ngIf",h["\u0275\u0275pipeBind1"](1,7,t.registryService.getActiveMetadataSchema()))("ngIfThen",n)("ngIfElse",e),h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("formId",t.formId)("formModel",t.formModel)("formGroup",t.formGroup)("formLayout",t.formLayout)}},directives:[E.u,j.a,F.NgControlStatusGroup,F.FormGroupDirective],pipes:[E.b,S.e],encapsulation:2}),e})();var M=n("Exvd");const L=function(e){return{"table-primary":e}},D=function(e){return[e]};function P(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",14),h["\u0275\u0275pipe"](1,"async"),h["\u0275\u0275text"](2,"\n                            "),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4,"\n                                "),h["\u0275\u0275elementStart"](5,"label"),h["\u0275\u0275text"](6,"\n                                    "),h["\u0275\u0275elementStart"](7,"input",15),h["\u0275\u0275listener"]("change",(function(n){h["\u0275\u0275restoreView"](e);const i=t.$implicit;return h["\u0275\u0275nextContext"](2).selectMetadataSchema(i,n)})),h["\u0275\u0275pipe"](8,"async"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](9,"\n                                "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](10,"\n                            "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](11,"\n                            "),h["\u0275\u0275elementStart"](12,"td",16),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](e);const n=t.$implicit;return h["\u0275\u0275nextContext"](2).editSchema(n)})),h["\u0275\u0275elementStart"](13,"a",17),h["\u0275\u0275text"](14),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](15,"\n                            "),h["\u0275\u0275elementStart"](16,"td",16),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](e);const n=t.$implicit;return h["\u0275\u0275nextContext"](2).editSchema(n)})),h["\u0275\u0275elementStart"](17,"a",17),h["\u0275\u0275text"](18),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](19,"\n                            "),h["\u0275\u0275elementStart"](20,"td",16),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](e);const n=t.$implicit;return h["\u0275\u0275nextContext"](2).editSchema(n)})),h["\u0275\u0275elementStart"](21,"a",17),h["\u0275\u0275text"](22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](23,"\n                        "),h["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=h["\u0275\u0275nextContext"](2);h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](12,L,h["\u0275\u0275pipeBind1"](1,8,n.isActive(e)))),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("checked",h["\u0275\u0275pipeBind1"](8,10,n.isSelected(e))),h["\u0275\u0275advance"](6),h["\u0275\u0275property"]("routerLink",h["\u0275\u0275pureFunction1"](14,D,e.prefix)),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](e.id),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("routerLink",h["\u0275\u0275pureFunction1"](16,D,e.prefix)),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](e.namespace),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("routerLink",h["\u0275\u0275pureFunction1"](18,D,e.prefix)),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](e.prefix)}}function R(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"ds-pagination",9),h["\u0275\u0275pipe"](1,"async"),h["\u0275\u0275text"](2,"\n\n                "),h["\u0275\u0275elementStart"](3,"div",10),h["\u0275\u0275text"](4,"\n                    "),h["\u0275\u0275elementStart"](5,"table",11),h["\u0275\u0275text"](6,"\n                        "),h["\u0275\u0275elementStart"](7,"thead"),h["\u0275\u0275text"](8,"\n                        "),h["\u0275\u0275elementStart"](9,"tr"),h["\u0275\u0275text"](10,"\n                            "),h["\u0275\u0275element"](11,"th",12),h["\u0275\u0275text"](12,"\n                            "),h["\u0275\u0275elementStart"](13,"th",12),h["\u0275\u0275text"](14),h["\u0275\u0275pipe"](15,"translate"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](16,"\n                            "),h["\u0275\u0275elementStart"](17,"th",12),h["\u0275\u0275text"](18),h["\u0275\u0275pipe"](19,"translate"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](20,"\n                            "),h["\u0275\u0275elementStart"](21,"th",12),h["\u0275\u0275text"](22),h["\u0275\u0275pipe"](23,"translate"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](24,"\n                        "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](25,"\n                        "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](26,"\n                        "),h["\u0275\u0275elementStart"](27,"tbody"),h["\u0275\u0275text"](28,"\n                        "),h["\u0275\u0275template"](29,P,24,20,"tr",13),h["\u0275\u0275pipe"](30,"async"),h["\u0275\u0275text"](31,"\n                        "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](32,"\n                    "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](33,"\n                "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](34,"\n\n            "),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"]();var n,i;h["\u0275\u0275property"]("paginationOptions",e.config)("collectionSize",null==(n=h["\u0275\u0275pipeBind1"](1,8,e.metadataSchemas))||null==n.payload?null:n.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),h["\u0275\u0275advance"](14),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind1"](15,10,"admin.registries.metadata.schemas.table.id")),h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind1"](19,12,"admin.registries.metadata.schemas.table.namespace")),h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind1"](23,14,"admin.registries.metadata.schemas.table.name")),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngForOf",null==(i=h["\u0275\u0275pipeBind1"](30,16,e.metadataSchemas))||null==i.payload?null:i.payload.page)}}function V(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",18),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"translate"),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"]("\n              ",h["\u0275\u0275pipeBind1"](2,1,"admin.registries.metadata.schemas.no-items"),"\n            "))}function $(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"button",19),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"]().deleteSchemas()})),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"translate"),h["\u0275\u0275elementEnd"]()}2&e&&(h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind1"](2,1,"admin.registries.metadata.schemas.table.delete")))}let q=(()=>{class e{constructor(e,t,n,a,r){this.registryService=e,this.notificationsService=t,this.router=n,this.paginationService=a,this.translateService=r,this.config=Object.assign(new s.a,{id:"rm",pageSize:25}),this.needsUpdate$=new i.a(!0),this.updateSchemas()}updateSchemas(){this.metadataSchemas=this.needsUpdate$.pipe(Object(o.a)(e=>!0===e),Object(l.a)(()=>this.paginationService.getCurrentPagination(this.config.id,this.config)),Object(l.a)(e=>this.registryService.getMetadataSchemas(u(e))))}forceUpdateSchemas(){this.needsUpdate$.next(!0)}editSchema(e){this.getActiveSchema().pipe(Object(c.a)(1)).subscribe(t=>{e===t?this.registryService.cancelEditMetadataSchema():this.registryService.editMetadataSchema(e)})}isActive(e){return this.getActiveSchema().pipe(Object(d.a)(t=>e===t))}getActiveSchema(){return this.registryService.getActiveMetadataSchema()}selectMetadataSchema(e,t){t.target.checked?this.registryService.selectMetadataSchema(e):this.registryService.deselectMetadataSchema(e)}isSelected(e){return this.registryService.getSelectedMetadataSchemas().pipe(Object(d.a)(t=>null!=t.find(t=>t===e)))}deleteSchemas(){this.registryService.clearMetadataSchemaRequests().subscribe(),this.registryService.getSelectedMetadataSchemas().pipe(Object(c.a)(1)).subscribe(e=>{const t=[];for(const n of e)Object(m.b)(n.id)&&t.push(this.registryService.deleteMetadataSchema(n.id).pipe(Object(f.g)()));Object(a.a)(...t).subscribe(e=>{const t=e.filter(e=>e.hasSucceeded),n=e.filter(e=>e.hasFailed);t.length>0&&this.showNotification(!0,t.length),n.length>0&&this.showNotification(!1,n.length),this.registryService.deselectAllMetadataSchema(),this.registryService.cancelEditMetadataSchema(),this.forceUpdateSchemas()})})}showNotification(e,t){const n="admin.registries.schema.notification",i=e?"success":"failure";Object(r.a)(this.translateService.get(`${n}.${i}`),this.translateService.get(`${n}.deleted.${i}`,{amount:t})).subscribe(([t,n])=>{e?this.notificationsService.success(t,n):this.notificationsService.error(t,n)})}ngOnDestroy(){this.paginationService.clearPagination(this.config.id)}}return e.\u0275fac=function(t){return new(t||e)(h["\u0275\u0275directiveInject"](g.a),h["\u0275\u0275directiveInject"](b.a),h["\u0275\u0275directiveInject"](v.g),h["\u0275\u0275directiveInject"](x.a),h["\u0275\u0275directiveInject"](S.f))},e.\u0275cmp=h["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-metadata-registry"]],decls:31,vars:15,consts:[[1,"container"],[1,"metadata-registry","row"],[1,"col-12"],["id","header",1,"border-bottom","pb-2"],["id","description",1,"pb-2"],[3,"submitForm"],[3,"paginationOptions","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],["type","submit","class","btn btn-danger float-right",3,"click",4,"ngIf"],[3,"paginationOptions","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","metadata-schemas",1,"table","table-striped","table-hover"],["scope","col"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["type","checkbox",3,"checked","change"],[1,"selectable-row",3,"click"],[3,"routerLink"],["role","alert",1,"alert","alert-info","w-100","mb-2"],["type","submit",1,"btn","btn-danger","float-right",3,"click"]],template:function(e,t){var n,i,a;1&e&&(h["\u0275\u0275elementStart"](0,"div",0),h["\u0275\u0275text"](1,"\n    "),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275text"](3,"\n        "),h["\u0275\u0275elementStart"](4,"div",2),h["\u0275\u0275text"](5,"\n\n            "),h["\u0275\u0275elementStart"](6,"h2",3),h["\u0275\u0275text"](7),h["\u0275\u0275pipe"](8,"translate"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](9,"\n\n            "),h["\u0275\u0275elementStart"](10,"p",4),h["\u0275\u0275text"](11),h["\u0275\u0275pipe"](12,"translate"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](13,"\n\n            "),h["\u0275\u0275elementStart"](14,"ds-metadata-schema-form",5),h["\u0275\u0275listener"]("submitForm",(function(){return t.forceUpdateSchemas()})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](15,"\n\n            "),h["\u0275\u0275template"](16,R,35,18,"ds-pagination",6),h["\u0275\u0275pipe"](17,"async"),h["\u0275\u0275text"](18,"\n\n            "),h["\u0275\u0275template"](19,V,3,3,"div",7),h["\u0275\u0275pipe"](20,"async"),h["\u0275\u0275text"](21,"\n\n            "),h["\u0275\u0275elementStart"](22,"div"),h["\u0275\u0275text"](23,"\n              "),h["\u0275\u0275template"](24,$,3,3,"button",8),h["\u0275\u0275pipe"](25,"async"),h["\u0275\u0275text"](26,"\n            "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](27,"\n\n        "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](28,"\n    "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](29,"\n"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](30,"\n")),2&e&&(h["\u0275\u0275advance"](7),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind1"](8,5,"admin.registries.metadata.head")),h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind1"](12,7,"admin.registries.metadata.description")),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngIf",(null==(n=h["\u0275\u0275pipeBind1"](17,9,t.metadataSchemas))||null==n.payload?null:n.payload.totalElements)>0),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngIf",0==(null==(i=h["\u0275\u0275pipeBind1"](20,11,t.metadataSchemas))||null==i.payload?null:i.payload.totalElements)),h["\u0275\u0275advance"](5),h["\u0275\u0275property"]("ngIf",(null==(a=h["\u0275\u0275pipeBind1"](25,13,t.metadataSchemas))||null==a.payload||null==a.payload.page?null:a.payload.page.length)>0))},directives:[B,E.u,M.a,E.t,E.r,v.j],pipes:[S.e,E.b],styles:[".selectable-row[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),e})();var N=n("LRne"),A=n("O/5o"),T=n("jf8X");function G(e,t){1&e&&h["\u0275\u0275element"](0,"div")}function z(e,t){if(1&e&&(h["\u0275\u0275text"](0,"\n    "),h["\u0275\u0275elementStart"](1,"h4"),h["\u0275\u0275text"](2),h["\u0275\u0275pipe"](3,"translate"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](4,"\n")),2&e){const e=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind1"](3,1,e.messagePrefix+".create"))}}function Q(e,t){if(1&e&&(h["\u0275\u0275text"](0,"\n    "),h["\u0275\u0275elementStart"](1,"h4"),h["\u0275\u0275text"](2),h["\u0275\u0275pipe"](3,"translate"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](4,"\n")),2&e){const e=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind1"](3,1,e.messagePrefix+".edit"))}}let U=(()=>{class e{constructor(e,t,n){this.registryService=e,this.formBuilderService=t,this.translateService=n,this.formId="metadata-field-form",this.messagePrefix="admin.registries.schema.form",this.formLayout={element:{grid:{host:"col col-sm-6 d-inline-block"}},qualifier:{grid:{host:"col col-sm-6 d-inline-block"}},scopeNote:{grid:{host:"col col-sm-12 d-inline-block"}}},this.submitForm=new h.EventEmitter}ngOnInit(){Object(r.a)(this.translateService.get(`${this.messagePrefix}.element`),this.translateService.get(`${this.messagePrefix}.qualifier`),this.translateService.get(`${this.messagePrefix}.scopenote`)).subscribe(([e,t,n])=>{this.element=new y.I({id:"element",label:e,name:"element",validators:{required:null},required:!0}),this.qualifier=new y.I({id:"qualifier",label:t,name:"qualifier",required:!1}),this.scopeNote=new y.I({id:"scopeNote",label:n,name:"scopeNote",required:!1}),this.formModel=[new y.C({id:"metadatadatafieldgroup",group:[this.element,this.qualifier,this.scopeNote]})],this.formGroup=this.formBuilderService.createFormGroup(this.formModel),this.registryService.getActiveMetadataField().subscribe(e=>{this.formGroup.patchValue({metadatadatafieldgroup:{element:null!=e?e.element:"",qualifier:null!=e?e.qualifier:"",scopeNote:null!=e?e.scopeNote:""}})})})}onCancel(){this.registryService.cancelEditMetadataField()}onSubmit(){this.registryService.getActiveMetadataField().pipe(Object(c.a)(1)).subscribe(e=>{const t={element:this.element.value,qualifier:this.qualifier.value,scopeNote:this.scopeNote.value};null==e?this.registryService.createMetadataField(Object.assign(new T.a,t),this.metadataSchema).subscribe(e=>{this.submitForm.emit(e)}):this.registryService.updateMetadataField(Object.assign(new T.a,e,{id:e.id,element:t.element?t.element:e.element,qualifier:t.qualifier?t.qualifier:e.qualifier,scopeNote:t.scopeNote?t.scopeNote:e.scopeNote})).subscribe(e=>{this.submitForm.emit(e)}),this.clearFields(),this.registryService.cancelEditMetadataField()})}clearFields(){this.formGroup.patchValue({metadatadatafieldgroup:{element:"",qualifier:"",scopeNote:""}})}ngOnDestroy(){this.onCancel()}}return e.\u0275fac=function(t){return new(t||e)(h["\u0275\u0275directiveInject"](g.a),h["\u0275\u0275directiveInject"](w.a),h["\u0275\u0275directiveInject"](S.f))},e.\u0275cmp=h["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-metadata-field-form"]],inputs:{metadataSchema:"metadataSchema"},outputs:{submitForm:"submitForm"},decls:12,vars:9,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["createHeader",""],["editheader",""],[3,"formId","formModel","formLayout","formGroup","cancel","submit"]],template:function(e,t){if(1&e&&(h["\u0275\u0275template"](0,G,1,0,"div",0),h["\u0275\u0275pipe"](1,"async"),h["\u0275\u0275text"](2,"\n\n"),h["\u0275\u0275template"](3,z,5,3,"ng-template",null,1,h["\u0275\u0275templateRefExtractor"]),h["\u0275\u0275text"](5,"\n\n"),h["\u0275\u0275template"](6,Q,5,3,"ng-template",null,2,h["\u0275\u0275templateRefExtractor"]),h["\u0275\u0275text"](8,"\n\n"),h["\u0275\u0275elementStart"](9,"ds-form",3),h["\u0275\u0275listener"]("cancel",(function(){return t.onCancel()}))("submit",(function(){return t.onSubmit()})),h["\u0275\u0275text"](10,"\n\n"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](11,"\n")),2&e){const e=h["\u0275\u0275reference"](4),n=h["\u0275\u0275reference"](7);h["\u0275\u0275property"]("ngIf",h["\u0275\u0275pipeBind1"](1,7,t.registryService.getActiveMetadataField()))("ngIfThen",n)("ngIfElse",e),h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("formId",t.formId)("formModel",t.formModel)("formLayout",t.formLayout)("formGroup",t.formGroup)}},directives:[E.u,j.a,F.NgControlStatusGroup,F.FormGroupDirective],pipes:[E.b,S.e],encapsulation:2}),e})();function W(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"label"),h["\u0275\u0275text"](1,"."),h["\u0275\u0275elementEnd"]())}const K=function(e){return{"table-primary":e}};function J(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr",17),h["\u0275\u0275pipe"](1,"async"),h["\u0275\u0275text"](2,"\n                "),h["\u0275\u0275elementStart"](3,"td"),h["\u0275\u0275text"](4,"\n                  "),h["\u0275\u0275elementStart"](5,"label"),h["\u0275\u0275text"](6,"\n                    "),h["\u0275\u0275elementStart"](7,"input",18),h["\u0275\u0275listener"]("change",(function(n){h["\u0275\u0275restoreView"](e);const i=t.$implicit;return h["\u0275\u0275nextContext"](4).selectMetadataField(i,n)})),h["\u0275\u0275pipe"](8,"async"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](9,"\n                  "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](10,"\n                "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](11,"\n                "),h["\u0275\u0275elementStart"](12,"td",19),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](e);const n=t.$implicit;return h["\u0275\u0275nextContext"](4).editField(n)})),h["\u0275\u0275text"](13),h["\u0275\u0275template"](14,W,2,0,"label",20),h["\u0275\u0275text"](15),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](16,"\n                "),h["\u0275\u0275elementStart"](17,"td",19),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](e);const n=t.$implicit;return h["\u0275\u0275nextContext"](4).editField(n)})),h["\u0275\u0275text"](18),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](19,"\n              "),h["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=h["\u0275\u0275nextContext"](3).ngVar,i=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("ngClass",h["\u0275\u0275pureFunction1"](11,K,h["\u0275\u0275pipeBind1"](1,7,i.isActive(e)))),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("checked",h["\u0275\u0275pipeBind1"](8,9,i.isSelected(e))),h["\u0275\u0275advance"](6),h["\u0275\u0275textInterpolate2"]("",null==n?null:n.prefix,".",e.element,""),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.qualifier),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](e.qualifier),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](e.scopeNote)}}function Y(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"ds-pagination",12),h["\u0275\u0275text"](1,"\n          "),h["\u0275\u0275elementStart"](2,"div",13),h["\u0275\u0275text"](3,"\n            "),h["\u0275\u0275elementStart"](4,"table",14),h["\u0275\u0275text"](5,"\n              "),h["\u0275\u0275elementStart"](6,"thead"),h["\u0275\u0275text"](7,"\n              "),h["\u0275\u0275elementStart"](8,"tr"),h["\u0275\u0275text"](9,"\n                "),h["\u0275\u0275element"](10,"th"),h["\u0275\u0275text"](11,"\n                "),h["\u0275\u0275elementStart"](12,"th",15),h["\u0275\u0275text"](13),h["\u0275\u0275pipe"](14,"translate"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](15,"\n                "),h["\u0275\u0275elementStart"](16,"th",15),h["\u0275\u0275text"](17),h["\u0275\u0275pipe"](18,"translate"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](19,"\n              "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](20,"\n              "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](21,"\n              "),h["\u0275\u0275elementStart"](22,"tbody"),h["\u0275\u0275text"](23,"\n              "),h["\u0275\u0275template"](24,J,20,13,"tr",16),h["\u0275\u0275text"](25,"\n              "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](26,"\n            "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](27,"\n          "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](28,"\n        "),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"]().ngVar,t=h["\u0275\u0275nextContext"](2);h["\u0275\u0275property"]("paginationOptions",t.config)("pageInfoState",e)("collectionSize",null==e?null:e.totalElements)("hideGear",!1)("hidePagerWhenSinglePage",!0),h["\u0275\u0275advance"](13),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind1"](14,8,"admin.registries.schema.fields.table.field")),h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind1"](18,10,"admin.registries.schema.fields.table.scopenote")),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngForOf",null==e?null:e.page)}}function H(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",21),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"translate"),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"]("\n          ",h["\u0275\u0275pipeBind1"](2,1,"admin.registries.schema.fields.no-items"),"\n        "))}function X(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"button",22),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"](3).deleteFields()})),h["\u0275\u0275text"](1),h["\u0275\u0275pipe"](2,"translate"),h["\u0275\u0275elementEnd"]()}2&e&&(h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind1"](2,1,"admin.registries.schema.fields.table.delete")))}const Z=function(){return["/admin/registries/metadata"]};function _(e,t){if(1&e&&(h["\u0275\u0275elementContainerStart"](0),h["\u0275\u0275text"](1,"\n        "),h["\u0275\u0275template"](2,Y,29,12,"ds-pagination",8),h["\u0275\u0275text"](3,"\n\n        "),h["\u0275\u0275template"](4,H,3,3,"div",9),h["\u0275\u0275text"](5,"\n\n        "),h["\u0275\u0275elementStart"](6,"div"),h["\u0275\u0275text"](7,"\n          "),h["\u0275\u0275elementStart"](8,"button",10),h["\u0275\u0275text"](9),h["\u0275\u0275pipe"](10,"translate"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](11,"\n          "),h["\u0275\u0275template"](12,X,3,3,"button",11),h["\u0275\u0275text"](13,"\n        "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](14,"\n      "),h["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngVar;h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",(null==e?null:e.totalElements)>0),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngIf",0==(null==e?null:e.totalElements)),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("routerLink",h["\u0275\u0275pureFunction0"](7,Z)),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind1"](10,5,"admin.registries.schema.return")),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngIf",(null==e||null==e.page?null:e.page.length)>0)}}const ee=function(e){return{namespace:e}};function te(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",3),h["\u0275\u0275text"](1,"\n\n      "),h["\u0275\u0275elementStart"](2,"h2",4),h["\u0275\u0275text"](3),h["\u0275\u0275pipe"](4,"translate"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](5,"\n\n      "),h["\u0275\u0275elementStart"](6,"p",5),h["\u0275\u0275text"](7),h["\u0275\u0275pipe"](8,"translate"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](9,"\n\n      "),h["\u0275\u0275elementStart"](10,"ds-metadata-field-form",6),h["\u0275\u0275listener"]("submitForm",(function(){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"]().forceUpdateFields()})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](11,"\n\n      "),h["\u0275\u0275elementStart"](12,"h3"),h["\u0275\u0275text"](13),h["\u0275\u0275pipe"](14,"translate"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](15,"\n\n      "),h["\u0275\u0275template"](16,_,15,8,"ng-container",7),h["\u0275\u0275pipe"](17,"async"),h["\u0275\u0275text"](18,"\n\n    "),h["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngVar,i=h["\u0275\u0275nextContext"]();var n;h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate2"]("",h["\u0275\u0275pipeBind1"](4,6,"admin.registries.schema.head"),': "',null==e?null:e.prefix,'"'),h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind2"](8,8,"admin.registries.schema.description",h["\u0275\u0275pureFunction1"](15,ee,null==e?null:e.namespace))),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("metadataSchema",e),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](h["\u0275\u0275pipeBind1"](14,11,"admin.registries.schema.fields.head")),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngVar",null==(n=h["\u0275\u0275pipeBind1"](17,13,i.metadataFields$))?null:n.payload)}}let ne=(()=>{class e{constructor(e,t,n,a,r,o){this.registryService=e,this.route=t,this.notificationsService=n,this.router=a,this.paginationService=r,this.translateService=o,this.config=Object.assign(new s.a,{id:"rm",pageSize:25,pageSizeOptions:[25,50,100,200]}),this.needsUpdate$=new i.a(!0)}ngOnInit(){this.route.params.subscribe(e=>{this.initialize(e)})}initialize(e){this.metadataSchema$=this.registryService.getMetadataSchemaByPrefix(e.schemaName).pipe(Object(f.j)()),this.updateFields()}updateFields(){this.metadataFields$=this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(l.a)(e=>Object(r.a)(this.metadataSchema$,this.needsUpdate$,Object(N.a)(e))),Object(l.a)(([e,t,n])=>(t&&this.needsUpdate$.next(!1),this.registryService.getMetadataFieldsBySchema(e,u(n),!t,!0))))}forceUpdateFields(){this.registryService.clearMetadataFieldRequests(),this.needsUpdate$.next(!0)}editField(e){this.getActiveField().pipe(Object(c.a)(1)).subscribe(t=>{e===t?this.registryService.cancelEditMetadataField():this.registryService.editMetadataField(e)})}isActive(e){return this.getActiveField().pipe(Object(d.a)(t=>e===t))}getActiveField(){return this.registryService.getActiveMetadataField()}selectMetadataField(e,t){t.target.checked?this.registryService.selectMetadataField(e):this.registryService.deselectMetadataField(e)}isSelected(e){return this.registryService.getSelectedMetadataFields().pipe(Object(d.a)(t=>null!=t.find(t=>t===e)))}deleteFields(){this.registryService.getSelectedMetadataFields().pipe(Object(c.a)(1)).subscribe(e=>{const t=[];for(const n of e)Object(m.b)(n.id)&&t.push(this.registryService.deleteMetadataField(n.id).pipe(Object(f.g)()));Object(a.a)(...t).subscribe(e=>{const t=e.filter(e=>e.hasSucceeded),n=e.filter(e=>e.hasFailed);t.length>0&&(this.showNotification(!0,t.length),this.registryService.clearMetadataFieldRequests()),n.length>0&&this.showNotification(!1,n.length),this.registryService.deselectAllMetadataField(),this.registryService.cancelEditMetadataField(),this.forceUpdateFields()})})}showNotification(e,t){const n="admin.registries.schema.notification",i=e?"success":"failure";Object(r.a)(this.translateService.get(`${n}.${i}`),this.translateService.get(`${n}.field.deleted.${i}`,{amount:t})).subscribe(([t,n])=>{e?this.notificationsService.success(t,n):this.notificationsService.error(t,n)})}ngOnDestroy(){this.paginationService.clearPagination(this.config.id)}}return e.\u0275fac=function(t){return new(t||e)(h["\u0275\u0275directiveInject"](g.a),h["\u0275\u0275directiveInject"](v.a),h["\u0275\u0275directiveInject"](b.a),h["\u0275\u0275directiveInject"](v.g),h["\u0275\u0275directiveInject"](x.a),h["\u0275\u0275directiveInject"](S.f))},e.\u0275cmp=h["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-metadata-schema"]],decls:9,vars:3,consts:[[1,"container"],[1,"metadata-schema","row"],["class","col-12",4,"ngVar"],[1,"col-12"],["id","header",1,"border-bottom","pb-2"],["id","description",1,"pb-2"],[3,"metadataSchema","submitForm"],[4,"ngVar"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"],["type","submit","class","btn btn-danger float-right",3,"click",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","metadata-fields",1,"table","table-striped","table-hover"],["scope","col"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["type","checkbox",3,"checked","change"],[1,"selectable-row",3,"click"],[4,"ngIf"],["role","alert",1,"alert","alert-info","w-100","mb-2"],["type","submit",1,"btn","btn-danger","float-right",3,"click"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",0),h["\u0275\u0275text"](1,"\n  "),h["\u0275\u0275elementStart"](2,"div",1),h["\u0275\u0275text"](3,"\n    "),h["\u0275\u0275template"](4,te,19,17,"div",2),h["\u0275\u0275pipe"](5,"async"),h["\u0275\u0275text"](6,"\n  "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](7,"\n"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](8,"\n")),2&e&&(h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngVar",h["\u0275\u0275pipeBind1"](5,1,t.metadataSchema$)))},directives:[A.a,U,E.u,v.h,M.a,E.t,E.r],pipes:[E.b,S.e],styles:[".selectable-row[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),e})();var ie=n("A0IO"),ae=n("C63K");let re=(()=>{class e{}return e.\u0275mod=h["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[v.k.forChild([{path:"metadata",resolve:{breadcrumb:ie.a},data:{title:"admin.registries.metadata.title",breadcrumbKey:"admin.registries.metadata"},children:[{path:"",component:q},{path:":schemaName",resolve:{breadcrumb:ie.a},component:ne,data:{title:"admin.registries.schema.title",breadcrumbKey:"admin.registries.schema"}}]},{path:ae.a,resolve:{breadcrumb:ie.a},loadChildren:()=>Promise.resolve().then(n.bind(null,"PT0L")).then(e=>e.BitstreamFormatsModule),data:{title:"admin.registries.bitstream-formats.title",breadcrumbKey:"admin.registries.bitstream-formats"}}])]]}),e})();var se=n("PCNd"),oe=n("PT0L");let le=(()=>{class e{}return e.\u0275mod=h["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[E.c,se.a,v.k,oe.BitstreamFormatsModule,re]]}),e})()}}]);
//# sourceMappingURL=27-es2015.32f7afbafc1282fd9968.js.map